{"version":3,"sources":["webpack://BetterDiscord/webpack/bootstrap","webpack://BetterDiscord/external \"electron\"","webpack://BetterDiscord/external \"path\"","webpack://BetterDiscord/external \"fs\"","webpack://BetterDiscord/external \"crypto\"","webpack://BetterDiscord/external \"node-fetch\"","webpack://BetterDiscord/external \"events\"","webpack://BetterDiscord/external \"module\"","webpack://BetterDiscord/./src/0globals.js","webpack://BetterDiscord/./src/modules/webpackModules.js","webpack://BetterDiscord/./src/modules/dataStore.js","webpack://BetterDiscord/./src/modules/bdEvents.js","webpack://BetterDiscord/./src/modules/pluginModule.js","webpack://BetterDiscord/./src/ui/tooltip.js","webpack://BetterDiscord/./src/ui/tooltipWrap.js","webpack://BetterDiscord/./src/modules/pluginCertifier.js","webpack://BetterDiscord/./src/modules/contentManager.js","webpack://BetterDiscord/./src/modules/domtools.js","webpack://BetterDiscord/./src/modules/themeModule.js","webpack://BetterDiscord/./src/modules/v2.js","webpack://BetterDiscord/./src/modules/utils.js","webpack://BetterDiscord/./src/modules/settingsPanelSidebar.js","webpack://BetterDiscord/./src/modules/coloredText.js","webpack://BetterDiscord/./src/modules/24hour.js","webpack://BetterDiscord/./src/ui/settingsTitle.js","webpack://BetterDiscord/./src/ui/tabBarSeparator.js","webpack://BetterDiscord/./src/ui/publicservers/serverCard.js","webpack://BetterDiscord/./src/modules/hooks.js","webpack://BetterDiscord/./src/ui/publicservers/publicServers.js","webpack://BetterDiscord/./src/svg/bug_hunter.jsx","webpack://BetterDiscord/./src/svg/circus.jsx","webpack://BetterDiscord/./src/modules/distant.js","webpack://BetterDiscord/./src/modules/Layers.jsx","webpack://BetterDiscord/./src/modules/publicServers.js","webpack://BetterDiscord/./src/modules/voiceMode.js","webpack://BetterDiscord/./src/modules/classNormalizer.js","webpack://BetterDiscord/./src/modules/devMode.js","webpack://BetterDiscord/./src/ui/components/switch.jsx","webpack://BetterDiscord/./src/ui/switch.js","webpack://BetterDiscord/./src/ui/margintop.jsx","webpack://BetterDiscord/./src/ui/settingsGroup.jsx","webpack://BetterDiscord/./src/ui/sectionedSettingsPanel.js","webpack://BetterDiscord/./src/ui/checkbox.js","webpack://BetterDiscord/./src/ui/cssEditorDetached.js","webpack://BetterDiscord/./src/ui/cssEditor.js","webpack://BetterDiscord/./src/ui/errorBoundary.js","webpack://BetterDiscord/./src/ui/contentColumn.js","webpack://BetterDiscord/./src/ui/reloadIcon.js","webpack://BetterDiscord/./src/ui/xSvg.js","webpack://BetterDiscord/./src/ui/icons/edit.jsx","webpack://BetterDiscord/./src/ui/icons/delete.jsx","webpack://BetterDiscord/./src/ui/addoncard.jsx","webpack://BetterDiscord/./src/ui/icons/downarrow.jsx","webpack://BetterDiscord/./src/ui/components/dropdown.jsx","webpack://BetterDiscord/./src/ui/icons/search.jsx","webpack://BetterDiscord/./src/ui/components/search.jsx","webpack://BetterDiscord/./src/ui/addonlist.jsx","webpack://BetterDiscord/./src/modules/CustomRichPresence.js","webpack://BetterDiscord/./src/ui/presenceSettings.jsx","webpack://BetterDiscord/./src/ui/AccountInfos.jsx","webpack://BetterDiscord/./src/modules/AntiAdDM.js","webpack://BetterDiscord/./src/modules/blurPrivate.js","webpack://BetterDiscord/./src/modules/disableTyping.js","webpack://BetterDiscord/./src/ui/ApiPreview.jsx","webpack://BetterDiscord/./src/ui/icons/history.jsx","webpack://BetterDiscord/./src/modules/popoutWindow.js","webpack://BetterDiscord/./src/modules/settingsPanel.js","webpack://BetterDiscord/./src/ui/bdLogo.js","webpack://BetterDiscord/./src/svg/Lightcord.jsx","webpack://BetterDiscord/./src/modules/emojiModule.js","webpack://BetterDiscord/./src/modules/core.js","webpack://BetterDiscord/./src/modules/bdApi.js","webpack://BetterDiscord/./src/localStorageFix.js","webpack://BetterDiscord/./src/index.js","webpack://BetterDiscord/./src/loadingIcon.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","minimumDiscordVersion","currentDiscordVersion","window","DiscordNative","remoteApp","getVersion","minSupportedVersion","bbdVersion","bbdChangelog","description","changes","title","type","items","settings","id","info","implemented","hidden","cat","category","experimental","process","platform","defaultCookie","settingsCookie","settingsRPC","defaultRPC","Date","now","lightcordSettings","defaultLightcordSettings","bdpluginErrors","bdthemeErrors","bdConfig","BetterDiscordConfig","bdthemes","bdplugins","pluginCookie","themeCookie","req","webpackJsonp","push","__extra_id__","find","filter","default","mod","findAll","findByProps","propNames","every","prop","undefined","findByPrototypes","protoNames","protoProp","findByDisplayName","displayName","Lightcord","BetterDiscord","WebpackModules","__non_webpack_require__","fs","path","releaseChannel","globals","app","getReleaseChannel","dataPath","env","APPDATA","join","HOME","XDG_CONFIG_HOME","constructor","this","data","stable","canary","ptb","pluginData","DataStore","initialize","existsSync","BDFile","writeFileSync","JSON","stringify","parse","readFileSync","settingsFile","unlinkSync","assign","setBDData","err","console","error","Utils","alert","_injectionPath","_configFile","resolve","injectionPath","_BDFile","_settingsFile","getPluginFile","pluginName","ContentManager","pluginsFolder","getSettingGroup","setSettingGroup","getBDData","getPluginData","setPluginData","deletePluginData","EventEmitter","super","BDEvents","dispatch","eventName","args","emit","off","eventAction","removeListener","PluginModule","loadPlugins","async","loadPluginData","splice","plugins","keys","length","plugin","getName","load","file","filename","message","stack","start","showToast","Promise","setTimeout","savePluginData","remote","getCurrentWebContents","on","channelSwitch","startPlugin","reload","stopPlugin","stop","enablePlugin","enable","disablePlugin","disable","togglePlugin","toggle","loadPlugin","loadContent","showContentErrors","values","log","unloadPlugin","filenameOrName","bdplugin","unloadContent","delete","fullPath","reloadPlugin","enabled","reloadContent","edit","shell","openItem","updatePluginList","results","loadNewContent","added","removed","saved","newMessage","onMessage","onSwitch","rawObserver","e","observer","TooltipClasses","TooltipLayers","getTooltipClasses","getTooltipLayers","getClass","sideOrColor","upperCase","toUpperCase","slice","tooltipClass","classExists","toPx","EmulatedTooltip","node","text","options","style","side","preventFlip","disabled","attachEvents","jQuery","label","toLowerCase","element","document","createElement","className","layer","disabledPointerEvents","tooltipElement","tooltip","labelElement","tooltipContent","pointerElement","tooltipPointer","append","addEventListener","show","MutationObserver","mutations","forEach","mutation","nodes","Array","from","removedNodes","directMatch","indexOf","parentMatch","some","parent","contains","hide","disconnect","observe","body","subtree","childList","querySelector","removeDa","BDModules","popouts","layerContainer","getBoundingClientRect","top","offsetHeight","screenHeight","left","offsetWidth","screenWidth","remove","_className","textContent","container","canShowAbove","showAbove","showBelow","canShowBelow","canShowLeft","showLeft","showRight","canShowRight","classList","add","setProperty","centerHorizontally","centerVertically","nodecenter","React","Component","props","BDV2","reactDom","findDOMNode","Tooltip","componentWillUnmount","render","children","cache","cache2","PluginCertifier","patch","attachment","nextTick","getElementById","url","startsWith","endsWith","nodeFetch","headers","electron","userAgent","then","res","status","Error","hash","crypto","Buffer","alloc","chunk","concat","update","hashResult","digest","hashToUrl","checkHash","result","div","childNodes","flowerStarModule","flowerStarContainer","childModule","childContainer","suspect","parentNode","borderColor","nextNode","child","tagName","preventDefault","stopImmediatePropagation","showConfirmationModal","harm","confirmText","cancelText","danger","onCancel","onConfirm","openExternal","href","includes","react","tooltipWrap","width","height","svg","viewBox","x","y","mask","fill","pointerEvents","official","span","display","float","flowerStar","stroke","color","onClick","link","getKeyedArray","content","buffer","installPath","contentManager","_pluginsFolder","_themesFolder","catch","cursor","fill-rule","class","renderToElements","elem","processAttachment","isTrusted","tests","threats","checkViruses","resultCallback","removeCallback","isHarmful","no_comments","toString","replace","trim","test","scrpt","exec","split","pop","json","processFile","__path","isFromLoader","createReadStream","addonCache","timestamp","saveAddonCache","basename","obj","arr","k","save","generateKey","encryptSettingsCache","cipher","encrypted","final","Api","ensureExported","ObjectStorage","localStorageModule","localStorage","impl","set","btoa","setInterval","val","safeJSONParse","atob","isArray","Module","globalPaths","getAppPath","MetaError","originalJSRequire","_extensions","originalCSSRequire","splitRegex","escapedAtRegex","hasPatched","timeCache","watchers","patchExtensions","getContentRequire","realpathSync","loadAddonCertifierCache","dataStore","decipher","decrypted","decryptSettingsCache","watchContent","contentType","isPlugin","baseFolder","themesFolder","fileEnding","watch","persistent","eventType","statSync","code","pluginModule","themeModule","unloadTheme","isFile","stats","mtime","getTime","loadTheme","reloadTheme","unwatchContent","close","extractMeta","firstLine","parseOldMeta","parseNewMeta","meta","rawMeta","substring","lastIndexOf","parsed","testJSON","format","block","out","field","accum","line","charAt","substr","self","originalRequire","possiblePath","Reflect","apply","arguments","stripBOM","atimeMs","modified","mtimeMs","size","css","_compile","isEmpty","warn","makePlaceholderPlugin","getAuthor","getDescription","source","website","escapeID","isLoaded","cantUnload","basedir","files","readdirSync","contentList","map","f","errors","loadAllContent","loadThemes","DOMTools","head","script","src","onload","timing","_","duration","performance","requestAnimationFrame","animate","time","timeFraction","progress","selector","parseHTML","NodeList","nodeType","query","baseElement","querySelectorAll","html","fragment","template","innerHTML","cloneNode","textNode","createTextNode","spanElement","nodeValue","classes","flat","classname","indicator","oldName","newName","thisNode","thatNode","prepend","targetNode","insertBefore","nextSibling","newNode","nextElementSibling","next","matches","previous","previousElementSibling","num","indexInParent","parentElement","parents","closest","attribute","global","getComputedStyle","parseInt","clientWidth","clientHeight","_listeners","event","delegate","callback","namespace","hasDelegate","eventFunc","target","cancel","removeEventListener","listeners","newCancel","findIndex","matchFilter","listener","defaultFilter","list","__offAll","onMount","wrappedCallback","unsubscribe","subscribe","addedNodes","onMountChange","onUnmount","elements","domWrapper","appendChild","Element","DOM","ThemeModule","loadThemeData","themes","theme","addStyle","unescape","saveThemeData","enableTheme","bdEvents","version","disableTheme","removeStyle","toggleTheme","bdtheme","updateThemeList","editorDetached","protect","theModule","isDefault","clear","sort","getToken","getEmail","showToken","proxy","Proxy","getOwnPropertyDescriptor","func","__proto__","findByUniqueProperties","internal","getInternalInstance","V2","joinBD1","InviteActions","acceptInviteAndTransitionToInviteChannel","leaveBD1","GuildActions","leaveGuild","joinBD2","leaveBD2","joinLC","leaveLC","anchor","anchorUnderlineOnHover","guildsWrapper","wrapper","unreadMentionsBar","guilds","guildsError","selected","pill","blobContainer","defaultProps","search","submit","activateRagingDemon","dismiss","openDM","userId","selfId","UserStore","getCurrentUser","privateChannelId","ChannelStore","getDMFromUserId","PrivateChannelActions","selectPrivateChannel","ChannelActions","openPrivateChannel","parseSettings","reduce","setting","Math","max","documentElement","innerWidth","innerHeight","_windowConfigFile","transparent","frame","charCodeAt","channelTextArea","titleWrapper","textarea","focus","selectionStart","selectionEnd","execCommand","moduleName","groupCollapsed","groupEnd","string","replacement","RegExp","method","params","what","methodName","before","after","instead","once","silent","force","origMethod","canceled","thisObject","methodArguments","cancelPatch","originalMethod","callOriginalMethod","returnValue","tempRet","suppressErrors","__monkeyPatched","__originalMethod","sidebar","hasNotice","form","bottom","toastWrapper","icon","timeout","toastElem","innerText","modalModule","modal","inner","hideOnFullscreen","headerModule","header","responsiveWidthMobile","footer2Module","focusLock","backdrop","backdropWithLayer","footer","addClass","closingListeners","onClose","pluginErrors","themeErrors","generateTab","el","tabs","removeClass","scroller","index","click","ModalStack","ChangelogClasses","TextElement","FlexChild","Titles","Changelog","selectable","MarkdownParser","image","subtitle","ce","changelogItems","entry","margin","marginTop","renderHeader","Child","grow","shrink","tag","Tags","H4","Sizes","SMALL","Colors","STANDARD","date","renderFooter","Anchor","AnchorClasses","joinSupportServer","stopPropagation","supportLink","defaultFooter","onScroll","ModalActions","Markdown","ConfirmationModal","emptyFunction","openModal","red","modalKey","V2_SettingsPanel_Sidebar","panels","register","panel","component","getComponent","Settings","devMode","section","LCitems","LCDevItems","injectColoredText","cancelColoredText","MessageComponent","monkeyPatch","childrenMessageContent","messageContent","originalType","roleColor","colorString","removeColoredText","classNameMarkup","markup","inject24Hour","cancel24Hour","twelveHour","convert","matched","match","padStart","cancelCozy","TimeFormatter","cancelCompact","remove24Hour","V2C_SettingsTitle","reactComponent","V2C_TabBarSeparator","V2C_ServerCard","server","iconUrl","fallback","state","imageError","joined","guildList","identifier","cardModule","card","cardPrimary","flexModule","flexChild","_horizontalReverse","wrapModule","noWrap","streamerModeEnabled","marginBottom8","pinned","ref","onError","handleError","draggable","horizontal","members","flex","categories","minHeight","backgroundColor","setState","useState","SettingsView","V2C_PublicServers","setInitialState","changeCategory","searchKeyDown","checkConnection","connect","GuildStore","AvatarDefaults","SortedGuildStore","hooks","componentDidMount","selectedCategory","loading","servers","connection","user","categorySlugs","fetch","searchEndPoint","end","term","categoryButtons","total","serverCard","acceptInvite","invite_code","joinEndPoint","credentials","windowOptions","round","screenX","screenY","win","joinWindow","webContents","loadURL","setMenuBarVisibility","resizable","maximizable","minimizable","alwaysOnTop","center","webPreferences","nodeIntegration","getFlattenedGuildIds","defaultList","DEFAULT_AVATARS","ServerCard","online","nativejoin","floor","random","response","onSetSection","sections","searchInput","getThis","setValue","marginLeft","serchinput","refs","searchinput","onKeyDown","onChange","placeholder","maxLength","which","notConnected","columnModule","contentColumnDefault","contentColumn","SettingsTitle","bdServer","marginBottom","lineHeight","forceUpdate","useEffect","TabBarSeparator","fontSize","username","discriminator","padding","BugHunterBadge","Circus","xmlns","cx","cy","uuidv4","awaitingBadgesPromises","badgesToFetch","_cache","badges","DistantServer","newPromise","badge","Constants","defaultUsers","fetchedBadges","users","handleRequest","Routes","responseBody","promise","user_id","LightcordError","route","SERVER_URL","Authorization","reject","scopes","layers","Layers","inject","isInjected","classNameLayers","v2","ReactInstance","FindReact","createLayer","getLayer","lay","LayerModules","Layer","animation","Value","keydown","ev","componentWillEnter","toValue","componentWillLeave","interpolation","interpolate","inputRange","outputRange","opacity","transform","scale","Div","__SECRET_EMOTION__","position","right","overflow","WebkitBoxOrient","WebkitBoxDirection","msFlexDirection","flexDirection","zIndex","paddingTop","_appendButton","V2_PublicServers","rootId","btn","guildClasses","listItem","circleButtonMask","classNametutorialContainer","downloadProgress","tutorialContainer","button","addButton","guildPatch","GuildList","webpackModules","GuildListOld","removeButton","randClass","ClassNormalizer","unpatchClassModules","moduleFilter","revertElement","patchClassModules","normalizeElement","patchDOMMethods","patchClassModule","unpatchClassModule","shouldIgnore","isNaN","baseClassName","componentName","classNames","normalClass","camelCase","newString","clen","newClass","toRemove","DOMTokenList","token","tokens","debugListener","copySelectorListener","startDebugListener","startCopySelector","stopDebugListener","stopCopySelector","getSelector","classLayer","classItems","menu","cm","cmWrap","styleFlexible","accommodateScrollbar","clientY","clientX","setAttribute","scrollerClasses","scrollerWrap","scrollerThemed","themeGhostHairline","removeCM","keyCode","cmg","cmi","item","labelContainer","colorDefault","NativeModule","copy","queryAll","focused","separator","scrollHeight","names","unshift","ownerDocument","entries","Switch","checked","switch","Components","inputs","classnames","getClassName","SwitchItem","beta","userSettingsVoice","formModule","switchItem","betaClassNames","marginModule","marginTop60","MarginTop","V2C_SettingsGroup","renderOldSettings","buttonComponent","componentDidCatch","errInfo","FormSection","FormText","hideBorder","DEFAULT","Themes","note","setImmediate","V2C_SectionedSettingsPanel","SettingsGroup","V2C_Checkbox","checkboxElement","checkbox","checkboxInner","V2C_CssEditorDetached","updateCss","saveCss","editor","ace","setTheme","session","setMode","setShowPrintMargin","setFontSize","destroy","updateLineCount","lineCount","lines","lineNumbers","indentUnit","scrollbarStyle","_ccss","ccss","_root","injectRoot","detachedRoot","insertAfter","Checkbox","borderRadius","borderRight","borderLeft","saveSettings","attach","unmountComponentAtNode","root","getValue","V2C_CssEditor","detachedEditor","detach","detached","componentDidUpdate","prevProps","prevState","codeMirror","arg","droot","injectDetachedRoot","BDErrorBoundary","hasError","originalRender","configurable","V2C_ContentColumn","V2C_ReloadIcon","V2C_XSvg","fillRule","Edit","Delete","anchorClasses","V2C_PluginCard","showSettings","hasSettings","addon","getSettingsPanel","settingsPanel","reloads","trusted","closeSettings","panelRef","current","settingsOpen","settingspanel","cardNode","cTop","scrollTop","cBottom","eTop","offsetTop","eBottom","isHidden","thisNodeOffset","offset","containerOffset","original","endPoint","getString","XSvg","dangerouslySetInnerHTML","__html","buildTitle","author","nameIndex","versionIndex","authorIndex","LayerStack","popLayer","makeLink","makeButton","action","unmounted","links","invite","tester","donate","patreon","settingsComponent","authorId","authorLink","isScanning","DownArrow","Select","open","dropdown","createRef","showMenu","hideMenu","opt","isOpen","Search","onFocus","onBlur","CardList","ascending","isPlugins","cookie","manager","reverse","onAddonChanges","openFolder","openPath","confirmDelete","BdApi","toLocaleLowerCase","getProps","getAddons","sortedAddons","a","b","cap","first","second","localeCompare","rendered","renderCheckUpdates","ZeresPluginLibrary","PluginUpdates","checkAll","tooltipIsShowing","onMouseLeave","Button","look","hoverColor","onRightClick","checkUpdateButton","refreshIcon","addonCards","sortOptions","directions","dispatcher","Dispatcher","ActionTypes","pid","game","application_id","details","timestamps","assets","large_image","small_image","sendGame","LOCAL_ACTIVITY_UPDATE","socketId","activity","formatedGame","applicationId","getAssets","V2C_PresenceSettingsModules","V2C_PresenceSettings","preview","isfetching","fetchAssets","assetComponents","Set","updateWhenFetched","comp","defaultSetting","RPCProps","CustomRichPresence","asset","updatePreview","marginBottom20","optionsComponents","RpcPreview","ohgodohfuck","_optionsComponents","InputText","InputNumber","InputChoice","choices","inputTextModules","InputNumberModules","InputChoiceModules","PureComponent","removeKeybind","defaultMarginh5","colorStandard","size32","_horizontal","inputMini","size16","size20","input","TextInput","lastEdited","isTiming","rowModule","marginModule2","colorModule","sizeModule","inputModule","sizeModule2","row","size14","h5","Divider","colorTransparent","clipboard","Dropdown","emptyClasses","popoutModules","UserPopoutComponent","PopoutProps","profileModules","UserProfileComponent","ProfileProps","connectedProfileStore","DividerModules","divider","dividerDefault","active","changeTab","tab","setActive","Tab","rpc","isActive","Profile","Popout","PresenceErrorCatcher","emptyStateImage","emptyState","emptyStateHeader","emptyStateSubtext","role","tabindex","UserPopout","userModule","render1","guildId","channelId","disableUserProfileLink","_UserPopout","popout","excludeProperties","UserProfile","render2","render3","render4","profile","scrollbarModule1","scrollbarGhostHairline","GuildModule","getGuilds","relationShipModule","getRelationships","sessionModule","getSessions","V2C_AccountInfos","CodeContent","getProfileValue","language","getStatistics","getSessionValue","sessionsRaw","sessions","sessionId","clientInfo","os","client","activities","repeat","createdAt","avatarURL","avatar","getAvatarURL","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","flags","hasPremiumSubscription","email","mfaEnabled","mobile","phone","verified","nsfwAllowed","relations","friends","isFriend","blocked","isBlocked","hightlightJS","highlight","messageModule1","messageModule2","listLanguages","DiscordModules","ChannelModule","getChannel","hasChannel","addRelationship","DMModule","closePrivateChannel","antiDM","bot","guild_id","channel","channel_id","EmbedsContains","location","embeds","embed","fields","selectors","standardSidebarView","defaultClassName","selects","userSettingsAccount","paymentSourceRow","subText","descriptionWrapper","viewBody","userSettingsSecurity","getSelectors","startTyping","typingModule","stopTyping","DisableTyping","ApiPreview","states","allComponents","general","AlertBox","compName","compPath","ComponentPreview","AllPreviews","getStrForProp","lang","String","$$typeof","for","generateCode","openTag","propStrings","childrenProp","str","propObject","isLast","childrenData","help","success","SettingSubTitle","searchable","Tabs","ErrorCatcher","CodeBlock","History","windows","Map","init","popoutModule","getWindow","applyThemes","removeThemes","themeName","existing","removeAttribute","BDSidebarHeader","sidebarComponents","Separator","Header","Item","changelogButton","showChangelogModal","isClearingCache","updateSettings","registerComponents","makeComponent","lightcordComponent","PresenceComponent","AccountInfosComponent","ApiPreviewComponent","coreComponent","customCssComponent","renderAddonPane","getSettings","publicServersModule","voiceMode","tfHour","coloredText","setWindowPreference","dMode","callRingingBeat","settingsStore","showCurrentGame","updateRemoteSettings","getCurrentWindow","setAlwaysOnTop","AntiAdDM","blurPrivate","disableTyping","appSettings","getGlobal","relaunch","exit","popoutWindow","core","methods","NotificationsUseShim","loadSettings","renderSidebar","SectionedSettingsPanel","coreSettings","isChecked","ipc","send","argv","quit","clearCache","PresenceSettings","CssEditor","ContentList","prefix","SettingComponent","BDLogo","clipRule","strokeLinecap","strokeLinejoin","LightcordLogo","x1","y1","x2","y2","gradientTransform","gradientUnits","stopColor","EmojiRegex","CustomEmojiModule","CustomEmoji","EmojiModuleApi","getCustomEmojiById","AutocompleteModule","AutoCompletionTemplates","getAutocompleteOptions","EmojiModuleQuery","queryEmojiResults","Messages","EMOJI_MATCHING","guildModule","getGuild","isFetching","emojiSearch","getDisambiguatedEmojiContext","LIGHTCORD_EMOJIS","arg1","arg2","condition","setEmojiUsable","queryResults","renderResults","D","emojis","EMOJI","Emoji","emoji","uniqueName","sentinel","guild","getPlainText","isAnimated","animated","managed","originalName","getRawText","cancelEmojiRender","cancelEmoteRender","getNestedProp","newContent","hasParsed","raw","words","word","emojiId","jumboable","shift","u","onHover","R","Title","classNameLayer","classNameSocialLinks","classNameModal","EmojiFilterModule","isEmojiDisabled","isUsable","usable","surrogates","diversity","Core","setConfig","config","hasStarted","setMethods","ED","WebSocket","patchAttributes","initSettings","checkForGuilds","initializeSettings","getElementsByClassName","initObserver","previousVersion","EmojiModule","patchSocial","patchGuildPills","patchGuildListItems","patchGuildSeparator","patchMessageHeader","patchMemberList","patchAttachment","haveInstalledDefault","logo","attribsPatchs","cancelPatchAttributes","DiscordTag","DiscordTagComp","badgeDiv","TooltipWrap","applyBadges","timesChecked","blob","deferLoaded","readyState","injectExternals","getPredicateSections","settingModule","poped","mlen","animating","socialLinks","getAttribute","socialPatch","TabBar","socialModule1","newOne","returnVal","classNameColorMuted","sizes","classNameVersionHash","colorMuted","versionHash","branch","additional","size12","commit","originalVersions","chat","blockDiv","distant","getBadges","scope","div2","guildListItemsPatch","GuildClasses","getGuildClasses","listItemClass","blobClass","GuildComponent","return","guildData","unread","audio","video","animatable","guildPillPatch","guildPill","hovered","guildSeparatorPatch","Guilds","guildComponents","GuildSeparator","AttachmentPatch","Attachment","messageHeaderPatch","MessageHeader","memberListPatch","MemberListItem","renderDecorators","updateInjector","ReactDom","ReactComponent","WindowConfigFile","getAllWindowPreferences","getWindowPreference","addScript","removeScript","mainCore","protos","getData","loadData","saveData","setData","deleteData","onRemoved","isPluginEnabled","isThemeEnabled","isSettingEnabled","enableSetting","disableSetting","toggleSetting","makeAddonAPI","folder","isEnabled","getAll","Plugins","contentWindowGetter","HTMLIFrameElement","contentWindow","writable","Function","oOpen","XMLHttpRequest","localStorageFix","v2Loader","loadingIcon","deprecateGlobal","globalKeys","Globals","CoreWrapper"],"mappings":"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","file":"index.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","module.exports = require(\"electron\");","module.exports = require(\"path\");","module.exports = require(\"fs\");","module.exports = require(\"crypto\");","module.exports = require(\"node-fetch\");","module.exports = require(\"events\");","module.exports = require(\"module\");","export const minimumDiscordVersion = \"0.0.307\";\r\nexport const currentDiscordVersion = (window.DiscordNative && window.DiscordNative.remoteApp && window.DiscordNative.remoteApp.getVersion && window.DiscordNative.remoteApp.getVersion()) || \"0.0.307\";\r\nexport const minSupportedVersion = \"0.3.0\";\r\nexport const bbdVersion = \"0.3.5\";\r\nexport const bbdChangelog = {\r\n    description: \"Big things are coming.\",\r\n    changes: [\r\n        {\r\n            title: \"Bug Fixes\",\r\n            type: \"fixed\",\r\n            items: [\r\n                \"Some fixes related to showing modals in the `BdApi`.\",\r\n                \"Fixed the open folder buttons for plugins and themes\"\r\n            ]\r\n        }\r\n    ]\r\n};\r\n\r\nexport const settings = {\r\n    \"Custom css live update\":     {id: \"bda-css-0\", info: \"\",                                                  implemented: true,  hidden: true,  cat: \"core\"},\r\n    \"Custom css auto udpate\":     {id: \"bda-css-1\", info: \"\",                                                  implemented: true,  hidden: true,  cat: \"core\"},\r\n    \"BetterDiscord Blue\":         {id: \"bda-gs-b\",  info: \"Replace Discord blue with BD Blue\",                 implemented: false,  hidden: false, cat: \"core\"},\r\n\r\n    /* Core */\r\n    /* ====== */\r\n    \"Public Servers\":             {id: \"bda-gs-1\",  info: \"Display public servers button\",                     implemented: true,  hidden: false, cat: \"core\", category: \"modules\"},\r\n    \"Minimal Mode\":               {id: \"bda-gs-2\",  info: \"Hide elements and reduce the size of elements.\",    implemented: true,  hidden: false, cat: \"core\", category: \"modules\"},\r\n    \"Voice Mode\":                 {id: \"bda-gs-4\",  info: \"Only show voice chat\",                              implemented: true,  hidden: false, cat: \"core\", category: \"modules\"},\r\n    \"Hide Channels\":              {id: \"bda-gs-3\",  info: \"Hide channels in minimal mode\",                     implemented: true,  hidden: false, cat: \"core\", category: \"modules\"},\r\n    \"Dark Mode\":                  {id: \"bda-gs-5\",  info: \"Make certain elements dark by default(wip)\",        implemented: true,  hidden: false, cat: \"core\", category: \"modules\"},\r\n    \"Voice Disconnect\":           {id: \"bda-dc-0\",  info: \"Disconnect from voice server when closing Discord\", implemented: true,  hidden: false, cat: \"core\", category: \"modules\"},\r\n    \"24 Hour Timestamps\":         {id: \"bda-gs-6\",  info: \"Replace 12hr timestamps with proper ones\",          implemented: true,  hidden: false, cat: \"core\", category: \"modules\"},\r\n    \"Colored Text\":               {id: \"bda-gs-7\",  info: \"Make text color the same as role color\",            implemented: true,  hidden: false, cat: \"core\", category: \"modules\"},\r\n    \"Normalize Classes\":          {id: \"fork-ps-4\", info: \"Adds stable classes to elements to help themes. (e.g. adds .da-channels to .channels-Ie2l6A)\", implemented: true,  hidden: false, cat: \"core\", category: \"modules\"},\r\n\r\n    /* Content */\r\n    \"Content Error Modal\":        {id: \"fork-ps-1\", info: \"Shows a modal with plugin/theme errors\", implemented: true, hidden: false, cat: \"core\", category: \"content manager\"},\r\n    \"Scan Plugins\":               {id: \"fork-ps-6\", info: \"Scan plugins for any threat that can be hidden inside.\", implemented: true, hidden: false, cat: \"core\", category: \"content manager\"},\r\n    \"Show Toasts\":                {id: \"fork-ps-2\", info: \"Shows a small notification for important information\", implemented: true, hidden: false, cat: \"core\", category: \"content manager\"},\r\n    \"Scroll To Settings\":         {id: \"fork-ps-3\", info: \"Auto-scrolls to a plugin's settings when the button is clicked (only if out of view)\", implemented: true, hidden: false, cat: \"core\", category: \"content manager\"},\r\n    \"Automatic Loading\":          {id: \"fork-ps-5\", info: \"Automatically loads, reloads, and unloads plugins and themes\", implemented: true, hidden: false, cat: \"core\", category: \"content manager\"},\r\n    \"Enable Edit Button\":         {id: \"fork-ps-7\", info: \"Enable an Edit Button on the plugin and theme panel.\", implemented: true, hidden: false, cat: \"core\", category: \"content manager\"},\r\n    \"Themes in Popout Window\":    {id: \"lightcord-9\", info: \"Enable themes in Popout Window. (For example, when detaching screenshare.)\", implemented: true, hidden: false, cat: \"core\", category: \"content manager\", experimental: true},\r\n\r\n    /* Developer */\r\n    \"Developer Mode\":         \t  {id: \"bda-gs-8\", info: \"Developer Mode Toggle\", implemented: true, hidden: false, cat: \"core\", category: \"developer settings\"},\r\n    \"Copy Selector\":\t\t\t  {id: \"fork-dm-1\", info: \"Adds a \\\"Copy Selector\\\" option to context menus when developer mode is active\", implemented: true, hidden: false, cat: \"core\", category: \"developer settings\"},\r\n\r\n    /** Lightcord */\r\n    \"Disable BetterDiscord\":      {id: \"bd-disable\",  info: \"Disable Betterdiscord (plugins, themes, etc) (Not implemented).\", implemented: false, hidden: false, cat: \"lightcord\", category: \"Lightcord\"},\r\n    \"Blur Personal Information\":  {id: \"lightcord-6\", info: \"Blur sensitive informations like email, payment infos and more.\", implemented: true, hidden: false, cat: \"lightcord\", category: \"Lightcord\"},\r\n    \"Calling Ring Beat\":          {id: \"lightcord-2\", info: \"Enable Discord's special calling beat.\", implemented: true, hidden: false, cat: \"lightcord\", category: \"Lightcord\"},\r\n    \"Developer Options\":          {id: \"lightcord-1\", info: \"Enable Discord's & Lightcord's Internal Developer Options. This allow the \\\"Experiments\\\" tab, the \\\"Developer Options\\\" tab and the \\\"Lightcord Api\\\" section.\", implemented: true, hidden: false, cat: \"lightcord\", category: \"Lightcord\"},\r\n    \"Ad Block\":                   {id: \"lightcord-4\", info: \"Block any BOT that dms you with an invite link. Even in an embed.\", implemented: true, hidden: false, cat: \"lightcord\", category: \"Lightcord\"},\r\n    \"Enable Lightcord Servers\":   {id: \"lightcord-5\", info: \"Enable Lightcord's servers. Disabling this will disable custom badges.\", implemented: true, hidden: false, cat: \"lightcord\", category: \"Lightcord\"},\r\n    \"Disable typing\":             {id: \"lightcord-7\", info: \"Don't let other see you're typing.\", implemented: true, hidden: false, cat: \"lightcord\", category: \"Lightcord\"},\r\n    \"Lightcord Tabs\":             {id: \"lightcord-8\", info: \"Allows you to launch multiple instances of Lightcord in the same window.\", implemented: true, hidden: false, cat: \"lightcord\", category: \"Lightcord\", experimental: true},\r\n    \"Use Notification Shim\":      {id: \"lightcord-10\", info: \"Basically don't use Windows's Notifications.\", implemented: true, hidden: process.platform !== \"win32\", cat: \"lightcord\", category: \"Lightcord\", experimental: false},\r\n\r\n    /** Lightcord Window */\r\n    \"Always-on-Top\":              {id: \"lightcord-3\", info: \"Enable the window's Always-on-Top mode, where Lightcord stays on top of other applications.\", implemented: true, hidden: false, cat: \"lightcord\", category: \"Window\"},\r\n    \"No Window Bounds\":           {id: \"no_window_bound\", info: \"Disable Window Bounds. Can be useful if you use a window manager.\", implemented: true, hidden: process.platform !== \"linux\", cat: \"lightcord\", category: \"Window\"},\r\n    \"Enable Glasstron\":           {id: \"enable_glasstron\", info: \"Enable Glasstron. If you're not using transparent themes, this can reduce lag.\", implemented: true, hidden: false, cat: \"lightcord\", category: \"Window\"},\r\n    \r\n    /** RichPresence */\r\n    \"Enable\":                     {id: \"lightcord-presence-1\", info: \"Enable RichPresence below.\", implemented: true, hidden: false, cat: \"status\"}\r\n};\r\n\r\nexport const defaultCookie = {\r\n    \"bda-gs-1\": true,\r\n    \"bda-gs-2\": false,\r\n    \"bda-gs-3\": false,\r\n    \"bda-gs-4\": false,\r\n    \"bda-gs-5\": true,\r\n    \"bda-gs-6\": false,\r\n    \"bda-gs-7\": false,\r\n    \"bda-gs-8\": false,\r\n    \"bda-es-0\": true,\r\n    \"bda-es-1\": true,\r\n    \"bda-es-2\": true,\r\n    \"bda-es-4\": false,\r\n    \"bda-es-6\": true,\r\n    \"bda-es-7\": true,\r\n    \"bda-gs-b\": false,\r\n    \"bda-es-8\": true,\r\n    \"bda-dc-0\": false,\r\n    \"bda-css-0\": false,\r\n    \"bda-css-1\": false,\r\n    \"bda-es-9\": true,\r\n    \"fork-dm-1\": false,\r\n    \"fork-ps-1\": true,\r\n    \"fork-ps-2\": true,\r\n    \"fork-ps-3\": true,\r\n    \"fork-ps-4\": true,\r\n    \"fork-ps-5\": true,\r\n    \"fork-ps-6\": true,\r\n    \"fork-ps-7\": false,\r\n    \"fork-es-2\": false,\r\n    \"fork-es-3\": true,\r\n    \"fork-wp-1\": false,\r\n    \"fork-wp-2\": false,\r\n    \"fork-beta\": true,\r\n    \"lightcord-1\": false,\r\n    \"lightcord-2\": true,\r\n    \"lightcord-presence-1\": false,\r\n    \"lightcord-3\": false,\r\n    \"lightcord-4\": false,\r\n    \"lightcord-5\": true,\r\n    \"lightcord-6\": true,\r\n    \"lightcord-7\": false,\r\n    \"lightcord-8\": false,\r\n    \"lightcord-9\": false,\r\n    \"lightcord-10\": false,\r\n    \"no_window_bound\": false,\r\n};\r\n\r\n\r\nexport const settingsCookie = {};\r\n\r\nexport const settingsRPC = {};\r\nexport const defaultRPC = {\r\n    \"name\": \"Lightcord\",\r\n    \"application_id\": \"711416957718757418\",\r\n    \"state\": \"Lightcord Client\",\r\n    \"details\": \"Browsing Discord\",\r\n    \"timestamps.start\": Date.now(),\r\n    \"assets.small\": null,\r\n    \"assets.large\": \"712323821037682791\"\r\n}\r\n\r\nexport const lightcordSettings = {};\r\nexport const defaultLightcordSettings = {};\r\n\r\nexport const bdpluginErrors = [];\r\nexport const bdthemeErrors = []; // define for backwards compatibility\r\n\r\nexport const bdConfig = Object.create(BetterDiscordConfig);\r\n\r\nexport const bdthemes = {};\r\nexport const bdplugins = {};\r\n\r\nexport const pluginCookie = {};\r\nexport const themeCookie = {};","const req = webpackJsonp.push([[], {__extra_id__: (module, exports, req) => module.exports = req}, [[\"__extra_id__\"]]]);\r\ndelete req.m.__extra_id__;\r\ndelete req.c.__extra_id__;\r\nconst find = (filter) => {\r\n    for (const i in req.c) {\r\n        if (req.c.hasOwnProperty(i)) {\r\n            const m = req.c[i].exports;\r\n            if (m && m.__esModule && m.default && filter(m.default)) return m.default;\r\n            if (m && filter(m))\treturn m;\r\n        }\r\n    }\r\n    // console.warn(\"Cannot find loaded module in cache\");\r\n    return null;\r\n};\r\n\r\nconst findAll = (filter) => {\r\n    const modules = [];\r\n    for (const i in req.c) {\r\n        if (req.c.hasOwnProperty(i)) {\r\n            const m = req.c[i].exports;\r\n            if (m && m.__esModule && m.default && filter(m.default)) modules.push(m.default);\r\n            else if (m && filter(m)) modules.push(m);\r\n        }\r\n    }\r\n    return modules;\r\n};\r\n\r\nconst findByProps = (...propNames) => find(module => propNames.every(prop => module[prop] !== undefined));\r\nconst findByPrototypes = (...protoNames) => find(module => module.prototype && protoNames.every(protoProp => module.prototype[protoProp] !== undefined));\r\nconst findByDisplayName = (displayName) => find(module => module.displayName === displayName);\r\n\r\nlet mod =  {find, findAll, findByProps, findByPrototypes, findByDisplayName};\r\nexport default mod\r\n\r\nwindow.Lightcord.BetterDiscord.WebpackModules = mod","const __non_webpack_require__ = window.require\r\n\r\nimport Utils from \"./utils\";\r\nimport ContentManager from \"./contentManager\";\r\n\r\nconst fs = require(\"fs\");\r\nconst path = require(\"path\");\r\nconst releaseChannel = DiscordNative.globals ? DiscordNative.globals.releaseChannel : DiscordNative.app ? DiscordNative.app.getReleaseChannel() : \"stable\";\r\n\r\nlet dataPath = \"\";\r\nif (process.platform === \"win32\") dataPath = process.env.APPDATA;\r\nelse if (process.platform === \"darwin\") dataPath = path.join(process.env.HOME, \"Library\", \"Preferences\");\r\nelse dataPath = process.env.XDG_CONFIG_HOME ? process.env.XDG_CONFIG_HOME : path.join(process.env.HOME, \".config\");\r\ndataPath = path.join(dataPath, \"BetterDiscord\");\r\n\r\nexport default new class DataStore {\r\n    constructor() {\r\n        this.data = {settings: {stable: {}, canary: {}, ptb: {}}};\r\n        this.pluginData = {};\r\n        window.Lightcord.BetterDiscord.DataStore = this\r\n    }\r\n\r\n    initialize() {\r\n        try {\r\n            if (!fs.existsSync(this.BDFile)) fs.writeFileSync(this.BDFile, JSON.stringify(this.data, null, 4), \"utf-8\");\r\n            const data = JSON.parse(fs.readFileSync(this.BDFile, \"utf-8\"))\r\n            if (data.hasOwnProperty(\"settings\")) this.data = data;\r\n            if (!fs.existsSync(this.settingsFile)) return;\r\n            let settings = __non_webpack_require__(this.settingsFile);\r\n            fs.unlinkSync(this.settingsFile);\r\n            if (settings.hasOwnProperty(\"settings\")) settings = Object.assign({stable: {}, canary: {}, ptb: {}}, {[releaseChannel]: settings});\r\n            else settings = Object.assign({stable: {}, canary: {}, ptb: {}}, settings);\r\n            this.setBDData(\"settings\", settings);\r\n        }\r\n        catch (err) {\r\n            console.error(err);\r\n            Utils.alert(\"Corrupt Storage\", \"The bd storage has somehow become corrupt. You may either try to salvage the file or delete it then reload.\");\r\n        }\r\n    }\r\n\r\n    get injectionPath() {\r\n        return this._injectionPath = null;\r\n        if (this._injectionPath) return this._injectionPath;\r\n        const electron = require(\"electron\").remote.app;\r\n        const base = electron.getAppPath();\r\n        const roamingBase = electron.getPath(\"userData\");\r\n        const roamingLocation = path.resolve(roamingBase, electron.getVersion(), \"modules\", \"discord_desktop_core\", \"injector\");\r\n        const location = path.resolve(base, \"..\", \"app\");\r\n        const realLocation = fs.existsSync(location) ? location : fs.existsSync(roamingLocation) ? roamingLocation : null;\r\n        if (!realLocation) return this._injectionPath = null;\r\n        return this._injectionPath = realLocation;\r\n    }\r\n\r\n    get configFile() {return this._configFile || (this._configFile = path.resolve(this.injectionPath, \"betterdiscord\", \"config.json\"));}\r\n    get BDFile() {return this._BDFile || (this._BDFile = path.resolve(dataPath, \"bdstorage.json\"));}\r\n    get settingsFile() {return this._settingsFile || (this._settingsFile = path.resolve(dataPath, \"bdsettings.json\"));}\r\n    getPluginFile(pluginName) {return path.resolve(ContentManager.pluginsFolder, pluginName + \".config.json\");}\r\n\r\n    getSettingGroup(key) {\r\n        return this.data.settings[releaseChannel][key] || null;\r\n    }\r\n\r\n    setSettingGroup(key, data) {\r\n        this.data.settings[releaseChannel][key] = data;\r\n        fs.writeFileSync(this.BDFile, JSON.stringify(this.data, null, 4), \"utf-8\");\r\n    }\r\n\r\n    getBDData(key) {\r\n        return this.data[key] || \"\";\r\n    }\r\n\r\n    setBDData(key, value) {\r\n        this.data[key] = value;\r\n        fs.writeFileSync(this.BDFile, JSON.stringify(this.data, null, 4), \"utf-8\");\r\n    }\r\n\r\n    getPluginData(pluginName, key) {\r\n        if (this.pluginData[pluginName] !== undefined) return this.pluginData[pluginName][key];\r\n        if (!fs.existsSync(this.getPluginFile(pluginName))) return undefined;\r\n        this.pluginData[pluginName] = JSON.parse(fs.readFileSync(this.getPluginFile(pluginName)));\r\n        return this.pluginData[pluginName][key];\r\n    }\r\n\r\n    setPluginData(pluginName, key, value) {\r\n        if (value === undefined) return;\r\n        if (this.pluginData[pluginName] === undefined) this.pluginData[pluginName] = {};\r\n        this.pluginData[pluginName][key] = value;\r\n        fs.writeFileSync(this.getPluginFile(pluginName), JSON.stringify(this.pluginData[pluginName], null, 4), \"utf-8\");\r\n    }\r\n\r\n    deletePluginData(pluginName, key) {\r\n        if (this.pluginData[pluginName] === undefined) this.pluginData[pluginName] = {};\r\n        delete this.pluginData[pluginName][key];\r\n        fs.writeFileSync(this.getPluginFile(pluginName), JSON.stringify(this.pluginData[pluginName], null, 4), \"utf-8\");\r\n    }\r\n};","/* BDEvents */\r\nconst EventEmitter = require(\"events\");\r\nexport default new class BDEvents extends EventEmitter {\r\n    constructor(){\r\n        super()\r\n        window.Lightcord.BetterDiscord.BDEvents = this\r\n    }\r\n    dispatch(eventName, ...args) {this.emit(eventName, ...args);}\r\n    off(eventName, eventAction) {this.removeListener(eventName, eventAction);}\r\n};","import {bdpluginErrors, pluginCookie, settingsCookie, bdplugins} from \"../0globals\";\nimport ContentManager from \"./contentManager\";\nimport DataStore from \"./dataStore\";\nimport BDEvents from \"./bdEvents\";\nimport Utils from \"./utils\";\n\nclass PluginModule {\n    constructor(){\n        window.Lightcord.BetterDiscord.PluginModule = this\n    }\n    get folder() {return ContentManager.pluginsFolder;}\n}\n\nPluginModule.prototype.loadPlugins = async function () {\n    this.loadPluginData();\n    bdpluginErrors.splice(0, 0, ...(await ContentManager.loadPlugins()));\n    const plugins = Object.keys(bdplugins);\n    for (let i = 0; i < plugins.length; i++) {\n        let plugin, name;\n\n        try {\n            plugin = bdplugins[plugins[i]].plugin;\n            name = plugin.getName();\n            if (plugin.load && typeof(plugin.load) == \"function\") plugin.load();\n        } catch (err) {\n            pluginCookie[name] = false;\n            Utils.err(\"Plugins\", name + \" could not be loaded.\", err);\n            bdpluginErrors.push({name: name, file: bdplugins[plugins[i]].filename, message: \"load() could not be fired.\", error: {message: err.message, stack: err.stack}});\n            continue;\n        }\n\n        if (!pluginCookie[name]) pluginCookie[name] = false;\n\n        if (pluginCookie[name]) {\n            try {\n                plugin.start();\n                if (settingsCookie[\"fork-ps-2\"]) Utils.showToast(`${plugin.getName()} v${plugin.getVersion()} has started.`);\n            } catch (err) {\n                pluginCookie[name] = false;\n                Utils.err(\"Plugins\", name + \" could not be started.\", err);\n                bdpluginErrors.push({name: name, file: bdplugins[plugins[i]].filename, message: \"start() could not be fired.\", error: {message: err.message, stack: err.stack}});\n            }\n        }\n\n        await new Promise((resolve) => setTimeout(resolve, 10))\n    }\n    this.savePluginData();\n\n    require(\"electron\").remote.getCurrentWebContents().on(\"did-navigate-in-page\", this.channelSwitch.bind(this));\n    // if (settingsCookie[\"fork-ps-5\"]) ContentManager.watchContent(\"plugin\");\n};\n\nPluginModule.prototype.startPlugin = function(plugin, reload = false) {\n    try {\n        bdplugins[plugin].plugin.start();\n        if (settingsCookie[\"fork-ps-2\"] && !reload) Utils.showToast(`${bdplugins[plugin].plugin.getName()} v${bdplugins[plugin].plugin.getVersion()} has started.`);\n    }\n    catch (err) {\n        if (settingsCookie[\"fork-ps-2\"] && !reload) Utils.showToast(`${bdplugins[plugin].plugin.getName()} v${bdplugins[plugin].plugin.getVersion()} could not be started.`, {type: \"error\"});\n        pluginCookie[plugin] = false;\n        this.savePluginData();\n        Utils.err(\"Plugins\", plugin + \" could not be started.\", err);\n    }\n};\n\nPluginModule.prototype.stopPlugin = function(plugin, reload = false) {\n    try {\n        bdplugins[plugin].plugin.stop();\n        if (settingsCookie[\"fork-ps-2\"] && !reload) Utils.showToast(`${bdplugins[plugin].plugin.getName()} v${bdplugins[plugin].plugin.getVersion()} has stopped.`);\n    }\n    catch (err) {\n        if (settingsCookie[\"fork-ps-2\"] && !reload) Utils.showToast(`${bdplugins[plugin].plugin.getName()} v${bdplugins[plugin].plugin.getVersion()} could not be stopped.`, {type: \"error\"});\n        Utils.err(\"Plugins\", bdplugins[plugin].plugin.getName() + \" could not be stopped.\", err);\n    }\n};\n\nPluginModule.prototype.enablePlugin = function (plugin, reload = false) {\n    if (pluginCookie[plugin]) return;\n    pluginCookie[plugin] = true;\n    this.savePluginData();\n    this.startPlugin(plugin, reload);\n};\n\nPluginModule.prototype.enable = function (plugin, reload = false) {\n    return this.enablePlugin(plugin, reload);\n};\n\nPluginModule.prototype.disablePlugin = function (plugin, reload = false) {\n    if (!pluginCookie[plugin]) return;\n    pluginCookie[plugin] = false;\n    this.savePluginData();\n    this.stopPlugin(plugin, reload);\n};\n\nPluginModule.prototype.disable = function (plugin, reload = false) {\n    return this.disablePlugin(plugin, reload);\n};\n\nPluginModule.prototype.togglePlugin = function (plugin) {\n    if (pluginCookie[plugin]) this.disablePlugin(plugin);\n    else this.enablePlugin(plugin);\n};\n\nPluginModule.prototype.toggle = function (plugin, reload = false) {\n    return this.togglePlugin(plugin, reload);\n};\n\nPluginModule.prototype.loadPlugin = async function(filename) {\n    const error = await ContentManager.loadContent(filename, \"plugin\");\n    if (error) {\n        if (settingsCookie[\"fork-ps-1\"]) Utils.showContentErrors({plugins: [error]});\n        if (settingsCookie[\"fork-ps-2\"]) Utils.showToast(`${filename} could not be loaded.`, {type: \"error\"});\n        return Utils.err(\"ContentManager\", `${filename} could not be loaded.`, error);\n    }\n    const plugin = Object.values(bdplugins).find(p => (console.log(p.filename, filename)) || p.filename == filename).plugin;\n    try { if (plugin.load && typeof(plugin.load) == \"function\") plugin.load();}\n    catch (err) {if (settingsCookie[\"fork-ps-1\"]) Utils.showContentErrors({plugins: [err]});}\n    Utils.log(\"ContentManager\", `${plugin.getName()} v${plugin.getVersion()} was loaded.`);\n    if (settingsCookie[\"fork-ps-2\"]) Utils.showToast(`${plugin.getName()} v${plugin.getVersion()} was loaded.`, {type: \"success\"});\n    BDEvents.dispatch(\"plugin-loaded\", plugin.getName());\n};\n\nPluginModule.prototype.unloadPlugin = function(filenameOrName) {\n    const bdplugin = Object.values(bdplugins).find(p => p.filename == filenameOrName) || bdplugins[filenameOrName];\n    if (!bdplugin) return;\n    const plugin = bdplugin.plugin.getName();\n    if (pluginCookie[plugin]) this.disablePlugin(plugin, true);\n    const error = ContentManager.unloadContent(bdplugins[plugin].filename, \"plugin\");\n    delete bdplugins[plugin];\n    if (error) {\n        if (settingsCookie[\"fork-ps-1\"]) Utils.showContentErrors({plugins: [error]});\n        if (settingsCookie[\"fork-ps-2\"]) Utils.showToast(`${plugin} could not be unloaded. It may have not been loaded yet.`, {type: \"error\"});\n        return Utils.err(\"ContentManager\", `${plugin} could not be unloaded. It may have not been loaded yet.`, error);\n    }\n    Utils.log(\"ContentManager\", `${plugin} was unloaded.`);\n    if (settingsCookie[\"fork-ps-2\"]) Utils.showToast(`${plugin} was unloaded.`, {type: \"success\"});\n    BDEvents.dispatch(\"plugin-unloaded\", plugin);\n};\n\nPluginModule.prototype.delete = function(filenameOrName) {\n    const bdplugin = Object.values(bdplugins).find(p => p.filename == filenameOrName) || bdplugins[filenameOrName];\n    if (!bdplugin) return;\n    this.unloadPlugin(bdplugin.filename);\n    const fullPath = require(\"path\").resolve(ContentManager.pluginsFolder, bdplugin.filename);\n    require(\"fs\").unlinkSync(fullPath);\n};\n\nPluginModule.prototype.reloadPlugin = async function(filenameOrName) {\n    const bdplugin = Object.values(bdplugins).find(p => p.filename == filenameOrName) || bdplugins[filenameOrName];\n    if (!bdplugin) return this.loadPlugin(filenameOrName);\n    const plugin = bdplugin.plugin.getName();\n    const enabled = pluginCookie[plugin];\n    if (enabled) this.stopPlugin(plugin, true);\n    const error = await ContentManager.reloadContent(bdplugins[plugin].filename, \"plugin\");\n    if (error) {\n        if (settingsCookie[\"fork-ps-1\"]) Utils.showContentErrors({plugins: [error]});\n        if (settingsCookie[\"fork-ps-2\"]) Utils.showToast(`${plugin} could not be reloaded.`, {type: \"error\"});\n        return Utils.err(\"ContentManager\", `${plugin} could not be reloaded.`, error);\n    }\n    if (bdplugins[plugin].plugin.load && typeof(bdplugins[plugin].plugin.load) == \"function\") bdplugins[plugin].plugin.load();\n    if (enabled) this.startPlugin(plugin, true);\n    Utils.log(\"ContentManager\", `${plugin} v${bdplugins[plugin].plugin.getVersion()} was reloaded.`);\n    if (settingsCookie[\"fork-ps-2\"]) Utils.showToast(`${plugin} v${bdplugins[plugin].plugin.getVersion()} was reloaded.`, {type: \"success\"});\n    BDEvents.dispatch(\"plugin-reloaded\", plugin);\n};\n\nPluginModule.prototype.reload = function(name) {\n    return this.reloadPlugin(name);\n};\n\nPluginModule.prototype.edit = function(filenameOrName) {\n    console.log(\"Edit \" + filenameOrName);\n    const bdplugin = Object.values(bdplugins).find(p => p.filename == filenameOrName) || bdplugins[filenameOrName];\n    if (!bdplugin) return;\n    const fullPath = require(\"path\").resolve(ContentManager.pluginsFolder, bdplugin.filename);\n    console.log(\"Edit \" + fullPath);\n    require(\"electron\").shell.openItem(`${fullPath}`);\n};\n\nPluginModule.prototype.updatePluginList = function() {\n    const results = ContentManager.loadNewContent(\"plugin\");\n    for (const filename of results.added) this.loadPlugin(filename);\n    for (const name of results.removed) this.unloadPlugin(name);\n};\n\nPluginModule.prototype.loadPluginData = function () {\n    const saved = DataStore.getSettingGroup(\"plugins\");\n    if (saved) {\n        Object.assign(pluginCookie, saved);\n    }\n};\n\nPluginModule.prototype.savePluginData = function () {\n    DataStore.setSettingGroup(\"plugins\", pluginCookie);\n};\n\nPluginModule.prototype.newMessage = function () {\n    const plugins = Object.keys(bdplugins);\n    for (let i = 0; i < plugins.length; i++) {\n        const plugin = bdplugins[plugins[i]].plugin;\n        if (!pluginCookie[plugin.getName()]) continue;\n        if (typeof plugin.onMessage === \"function\") {\n            try { plugin.onMessage(); }\n            catch (err) { Utils.err(\"Plugins\", \"Unable to fire onMessage for \" + plugin.getName() + \".\", err); }\n        }\n    }\n};\n\nPluginModule.prototype.channelSwitch = function () {\n    const plugins = Object.keys(bdplugins);\n    for (let i = 0; i < plugins.length; i++) {\n        const plugin = bdplugins[plugins[i]].plugin;\n        if (!pluginCookie[plugin.getName()]) continue;\n        if (typeof plugin.onSwitch === \"function\") {\n            try { plugin.onSwitch(); }\n            catch (err) { Utils.err(\"Plugins\", \"Unable to fire onSwitch for \" + plugin.getName() + \".\", err); }\n        }\n    }\n};\n\nPluginModule.prototype.rawObserver = function(e) {\n    const plugins = Object.keys(bdplugins);\n    for (let i = 0; i < plugins.length; i++) {\n        const plugin = bdplugins[plugins[i]].plugin;\n        if (!pluginCookie[plugin.getName()]) continue;\n        if (typeof plugin.observer === \"function\") {\n            try { plugin.observer(e); }\n            catch (err) { Utils.err(\"Plugins\", \"Unable to fire observer for \" + plugin.getName() + \".\", err); }\n        }\n    }\n};\n\nexport default new PluginModule();","/**\r\n * Tooltip that automatically show and hide themselves on mouseenter and mouseleave events.\r\n * Will also remove themselves if the node to watch is removed from DOM through\r\n * a MutationObserver.\r\n *\r\n * Note this is not using Discord's internals but normal DOM manipulation and emulates\r\n * Discord's own tooltips as closely as possible.\r\n *\r\n * @module EmulatedTooltip\r\n * @version 0.0.1\r\n */\r\n\r\nimport Utils from \"../modules/utils\";\r\nimport WebpackModules from \"../modules/webpackModules\";\r\nlet TooltipClasses\r\nfunction getTooltipClasses(){\r\n\tif(TooltipClasses)return TooltipClasses\r\n\treturn TooltipClasses = WebpackModules.findByProps(\"tooltip\", \"tooltipBlack\");\r\n}\r\nlet TooltipLayers\r\nfunction getTooltipLayers(){\r\n\tif(TooltipLayers)return TooltipLayers\r\n\treturn TooltipLayers = WebpackModules.findByProps(\"layer\", \"layerContainer\");\r\n}\r\n\r\nconst getClass = function(sideOrColor) {\r\n    const upperCase = sideOrColor[0].toUpperCase() + sideOrColor.slice(1);\r\n    const tooltipClass = getTooltipClasses()[`tooltip${upperCase}`];\r\n    if (tooltipClass) return tooltipClass;\r\n    return null;\r\n};\r\n\r\nconst classExists = function(sideOrColor) {\r\n    return getClass(sideOrColor) ? true : false;\r\n};\r\n\r\nconst toPx = function(value) {\r\n    return `${value}px`;\r\n};\r\n\r\nexport default class EmulatedTooltip {\r\n\t/**\r\n\t *\r\n\t * @constructor\r\n\t * @param {(HTMLElement|jQuery)} node - DOM node to monitor and show the tooltip on\r\n\t * @param {string} tip - string to show in the tooltip\r\n\t * @param {object} options - additional options for the tooltip\r\n\t * @param {string} [options.style=black] - correlates to the discord styling/colors (black, brand, green, grey, red, yellow)\r\n\t * @param {string} [options.side=top] - can be any of top, right, bottom, left\r\n\t * @param {boolean} [options.preventFlip=false] - prevents moving the tooltip to the opposite side if it is too big or goes offscreen\r\n     * @param {boolean} [options.disabled=false] - whether the tooltip should be disabled from showing on hover\r\n     * @param {boolean} [options.attachEvents=true] - whether the tooltip should listen to mouseenter and mouseleave events.\r\n\t */\r\n\tconstructor(node, text, options = {}) {\r\n\t\tconst {style = \"black\", side = \"top\", preventFlip = false, disabled = false, attachEvents = true} = options;\r\n\t\tthis.node = node instanceof jQuery ? node[0] : node;\r\n        this.label = text;\r\n        this.style = style.toLowerCase();\r\n\t\tthis.side = side.toLowerCase();\r\n        this.preventFlip = preventFlip;\r\n        this.disabled = disabled;\r\n\r\n        if (!classExists(this.side)) return Utils.err(\"EmulatedTooltip\", `Side ${this.side} does not exist.`);\r\n\t\tif (!classExists(this.style)) return Utils.err(\"EmulatedTooltip\", `Style ${this.style} does not exist.`);\r\n\t\t\r\n\t\tthis.element = document.createElement(\"div\");\r\n\t\tthis.element.className = getTooltipLayers().layer + \" \" + getTooltipLayers().disabledPointerEvents;\r\n\r\n\t\tthis.tooltipElement = document.createElement(\"div\");\r\n\t\tthis.tooltipElement.className = `${getTooltipClasses().tooltip} ${getClass(this.style)}`;\r\n\r\n\t\tthis.labelElement = document.createElement(\"div\");\r\n\t\tthis.labelElement.className = getTooltipClasses().tooltipContent\r\n\r\n\t\tconst pointerElement = document.createElement(\"div\");\r\n\t\tpointerElement.className = getTooltipClasses().tooltipPointer;\r\n\r\n\t\tthis.tooltipElement.append(pointerElement);\r\n\t\tthis.tooltipElement.append(this.labelElement);\r\n\t\tthis.element.append(this.tooltipElement);\r\n\r\n\t\tif(attachEvents){\r\n\t\t\tthis.node.addEventListener(\"mouseenter\", () => {\r\n\t\t\t\tif (this.disabled) return;\r\n\t\t\t\tthis.show();\r\n\t\r\n\t\t\t\tconst observer = new MutationObserver((mutations) => {\r\n\t\t\t\t\tmutations.forEach((mutation) => {\r\n\t\t\t\t\t\tconst nodes = Array.from(mutation.removedNodes);\r\n\t\t\t\t\t\tconst directMatch = nodes.indexOf(this.node) > -1;\r\n\t\t\t\t\t\tconst parentMatch = nodes.some(parent => parent.contains(this.node));\r\n\t\t\t\t\t\tif (directMatch || parentMatch) {\r\n\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t\tobserver.disconnect();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\r\n\t\t\t\tobserver.observe(document.body, {subtree: true, childList: true});\r\n\t\t\t});\r\n\t\r\n\t\t\tthis.node.addEventListener(\"mouseleave\", () => {\r\n\t\t\t\tthis.hide();\r\n\t\t\t});\r\n\t\t}\r\n    }\r\n\r\n    /** Container where the tooltip will be appended. */\r\n    get container() { \r\n\t\treturn document.querySelector(\".\"+Utils.removeDa(BDModules.get(e => e.popouts)[0].popouts)+\" ~ .\"+Utils.removeDa(BDModules.get(e => e.layerContainer)[0].layerContainer)); \r\n\t}\r\n    /** Boolean representing if the tooltip will fit on screen above the element */\r\n    get canShowAbove() { return this.node.getBoundingClientRect().top - this.element.offsetHeight >= 0; }\r\n    /** Boolean representing if the tooltip will fit on screen below the element */\r\n    get canShowBelow() { return this.node.getBoundingClientRect().top + this.node.offsetHeight + this.element.offsetHeight <= Utils.screenHeight; }\r\n    /** Boolean representing if the tooltip will fit on screen to the left of the element */\r\n    get canShowLeft() { return this.node.getBoundingClientRect().left - this.element.offsetWidth >= 0; }\r\n    /** Boolean representing if the tooltip will fit on screen to the right of the element */\r\n\tget canShowRight() { return this.node.getBoundingClientRect().left + this.node.offsetWidth + this.element.offsetWidth <= Utils.screenWidth; }\r\n\r\n    /** Hides the tooltip. Automatically called on mouseleave. */\r\n\thide() {\r\n        this.element.remove();\r\n        this.tooltipElement.className = this._className;\r\n\t}\r\n\r\n    /** Shows the tooltip. Automatically called on mouseenter. Will attempt to flip if position was wrong. */\r\n\tshow() {\r\n        this.tooltipElement.className = `${getTooltipClasses().tooltip} ${getClass(this.style)}`;\r\n\t\tthis.labelElement.textContent = this.label;\r\n\t\tthis.container.append(this.element);\r\n\r\n\t\tif (this.side == \"top\") {\r\n\t\t\tif (this.canShowAbove || (!this.canShowAbove && this.preventFlip)) this.showAbove();\r\n\t\t\telse this.showBelow();\r\n\t\t}\r\n\r\n\t\tif (this.side == \"bottom\") {\r\n\t\t\tif (this.canShowBelow || (!this.canShowBelow && this.preventFlip)) this.showBelow();\r\n\t\t\telse this.showAbove();\r\n\t\t}\r\n\r\n\t\tif (this.side == \"left\") {\r\n\t\t\tif (this.canShowLeft || (!this.canShowLeft && this.preventFlip)) this.showLeft();\r\n\t\t\telse this.showRight();\r\n\t\t}\r\n\r\n\t\tif (this.side == \"right\") {\r\n\t\t\tif (this.canShowRight || (!this.canShowRight && this.preventFlip)) this.showRight();\r\n\t\t\telse this.showLeft();\r\n\t\t}\r\n\t}\r\n\r\n    /** Force showing the tooltip above the node. */\r\n\tshowAbove() {\r\n\t\tthis.tooltipElement.classList.add(getClass(\"top\"));\r\n\t\tthis.element.style.setProperty(\"top\", toPx(this.node.getBoundingClientRect().top - this.element.offsetHeight - 10));\r\n\t\tthis.centerHorizontally();\r\n\t}\r\n\r\n    /** Force showing the tooltip below the node. */\r\n\tshowBelow() {\r\n\t\tthis.tooltipElement.classList.add(getClass(\"bottom\"));\r\n\t\tthis.element.style.setProperty(\"top\", toPx(this.node.getBoundingClientRect().top + this.node.offsetHeight + 10));\r\n\t\tthis.centerHorizontally();\r\n\t}\r\n\r\n    /** Force showing the tooltip to the left of the node. */\r\n\tshowLeft() {\r\n\t\tthis.tooltipElement.classList.add(getClass(\"left\"));\r\n\t\tthis.element.style.setProperty(\"left\", toPx(this.node.getBoundingClientRect().left - this.element.offsetWidth - 10));\r\n\t\tthis.centerVertically();\r\n\t}\r\n\r\n    /** Force showing the tooltip to the right of the node. */\r\n\tshowRight() {\r\n\t\tthis.tooltipElement.classList.add(getClass(\"right\"));\r\n\t\tthis.element.style.setProperty(\"left\", toPx(this.node.getBoundingClientRect().left + this.node.offsetWidth + 10));\r\n\t\tthis.centerVertically();\r\n\t}\r\n\r\n\tcenterHorizontally() {\r\n        const nodecenter = this.node.getBoundingClientRect().left + (this.node.offsetWidth / 2);\r\n        this.element.style.setProperty(\"left\", toPx(nodecenter - (this.element.offsetWidth / 2)));\r\n\t}\r\n\r\n\tcenterVertically() {\r\n\t\tconst nodecenter = this.node.getBoundingClientRect().top + (this.node.offsetHeight / 2);\r\n\t\tthis.element.style.setProperty(\"top\", toPx(nodecenter - (this.element.offsetHeight / 2)));\r\n\t}\r\n}","import BDV2 from \"../modules/v2\";\r\nimport Tooltip from \"./tooltip\";\r\n\r\nexport default class extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const {style = \"black\", side = \"top\", text = \"\"} = this.props;\r\n        this.node = BDV2.reactDom.findDOMNode(this);\r\n        this.tooltip = new Tooltip(this.node, text, {style, side});\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.tooltip.hide();\r\n        delete this.tooltip;\r\n    }\r\n\r\n    render() {\r\n        return this.props.children;\r\n    }\r\n}","import nodeFetch from \"node-fetch\"\r\nimport * as electron from \"electron\"\r\nimport * as crypto from \"crypto\"\r\nimport BDV2 from \"./v2\"\r\nimport tooltipWrap from \"../ui/tooltipWrap\"\r\nimport Utils from \"./utils\"\r\nimport { createReadStream, writeFileSync } from \"fs\"\r\nimport { basename, join } from \"path\"\r\nimport contentManager from \"./contentManager\"\r\nimport { addonCache } from \"./contentManager\"\r\n\r\nconst cache = {}\r\nconst cache2 = {}\r\n\r\nexport default new class PluginCertifier {\r\n    constructor(){\r\n        window.Lightcord.BetterDiscord.PluginCertifier = this\r\n    }\r\n\r\n    patch(attachment, id){\r\n        process.nextTick(() => {\r\n            processAttachment(attachment, id)\r\n        })\r\n    }\r\n\r\n    start(){\r\n\r\n    }\r\n\r\n    isTrusted(hash){\r\n        return cache[hash] && !cache[hash].suspect\r\n    }\r\n}\r\n\r\nconst tests = [\r\n    [/token/gi, 0],\r\n    [/email/gi, 0],\r\n    [/mfa/gi, 0],\r\n    [/2fa/gi, 0],\r\n    [/phone/gi, 0],\r\n    [/child_process/gi, 0],\r\n    [/localStorage/gi, 0],\r\n    [/getGlobal/gi, 0],\r\n    [/BrowserWindow/gi, 0],\r\n    [/\\.exe/gi, 0],\r\n    [/eval/gi, 0],\r\n    [/WebAssembly/gi, 0],\r\n    [/XMLHttpRequest(\\.|\\[[\"'`])prototype/gi, 0],\r\n    [/window\\.fetch( +)?=/gi, 0],\r\n    /** Obfuscation / hidden / workarounds */\r\n    [/([\"'`]\\+)[\"'`]\\w[\"'`]/gi, 1],\r\n    [/[\"'`]\\w[\"'`](\\+[\"'`])/gi, 1],\r\n    [/\\${[\"'`]\\w+[\"'`]}/gi, 1],\r\n    /** hexadecimal */\r\n    [/_0x\\w{4}\\('0x[\\dabcdef]+'\\)/g, 1],\r\n    [/_0x\\w{4}\\('0x[\\dabcdef]+'( +)?,( +)?'[^']{4}'\\)/g, 1], // _0x8db7('0x0', 'x1]f')\r\n    /** mangled */\r\n    [/\\w+\\('0x[\\dabcdef]+'\\)/g, 1], // b('0x0')\r\n    [/\\w+\\('0x[\\dabcdef]+'( +)?,( +)?'[^']{4}'\\)/g, 1], // b('0x0', 'x1]f')\r\n    /** string array at start */\r\n    [/^var [\\w\\d_$]+=\\[\"/gi, 1]\r\n]\r\n\r\nconst threats = [\r\n    \"Account Stealer/Virus\",\r\n    \"Obfuscation/Hidden code\"\r\n]\r\n\r\nexport function checkViruses(hash, data, resultCallback, removeCallback, filename){\r\n    data = data.toString(\"utf8\")\r\n    let isHarmful = false\r\n    /**\r\n     * @type {string}\r\n     */\r\n    const no_comments = data.replace(/\\/\\*[\\s\\S]*?\\*\\/|([^\\\\:]|^)\\/\\/.*$/gm, \"\").trim()// removing all comments from plugins (remove meta and other.)\r\n\r\n    for(const [test, type] of tests){\r\n        const scrpt = type === 1 ? no_comments : data\r\n        if(test.exec(scrpt)){\r\n            isHarmful = threats[type]\r\n            break\r\n        }\r\n    }\r\n\r\n    if(!isHarmful)return removeCallback(hash)\r\n    cache[hash] = {\r\n        suspect: true,\r\n        name: hashToUrl[hash].split(\"/\").pop(),\r\n        type: hashToUrl[hash].endsWith(\".js\") ? \"Plugin\" : \"Theme\",\r\n        harm: isHarmful,\r\n        hash: hash,\r\n        filename\r\n    }\r\n    \r\n    console.log(`Found potentially dangerous ${cache[hash].type.toLowerCase()}: ${cache[hash].name}`)\r\n\r\n    resultCallback(cache[hash])\r\n}\r\n\r\nconst hashToUrl = {}\r\n\r\nexport function checkHash(hash, data, filename, resultCallback, removeCallback){\r\n    console.log(`File: ${filename} hash: ${hash}`)\r\n    if(!cache[hash]){\r\n        nodeFetch(\"https://cdn.jsdelivr.net/gh/Lightcord/filehashes@master/hashes/\"+hash, { // Using node-fetch to bypass cors\r\n            headers: {\r\n                \"User-Agent\": electron.remote.getCurrentWebContents().userAgent // have to set user-agent\r\n            }\r\n        }).then(async res => {\r\n            if(res.status !== 200){\r\n                if(filename.endsWith(\".theme.css\"))return removeCallback(hash)\r\n                try{\r\n                    checkViruses(hash, data, resultCallback, removeCallback, filename)\r\n                }catch(e){\r\n                    console.error(e)\r\n                    removeCallback()\r\n                }\r\n                return\r\n            }\r\n            const result = await res.json()\r\n            result.hash = hash\r\n            result.filename = filename\r\n\r\n            cache[hash] = result\r\n\r\n            resultCallback(result)\r\n        }).catch((err) => {\r\n            console.error(`Could not read from github. ${err}`)\r\n            if(filename.endsWith(\".theme.css\"))return removeCallback(hash)\r\n            checkViruses(hash, data, resultCallback, removeCallback, filename)\r\n        })\r\n    }else{\r\n        const result = cache[hash]\r\n\r\n        resultCallback(result)\r\n    }\r\n}\r\n\r\nexport function processFile(__path, resultCallback, removeCallback = (hash) => {}, isFromLoader = false){    \r\n    const hash = crypto.createHash(\"sha256\")\r\n    let data = Buffer.alloc(0)\r\n\r\n    createReadStream(__path).on(\"data\", chunk => {\r\n        data = Buffer.concat([data, chunk])\r\n        hash.update(chunk)\r\n    }).on(\"end\", () => {\r\n        const hashResult = hash.digest(\"hex\")\r\n\r\n        hashToUrl[hashResult] = __path\r\n\r\n        if(isFromLoader && addonCache[hashResult]){\r\n            let value = addonCache[hashResult]\r\n            if(value.timestamp < (Date.now() - 6.048e+8)){\r\n                delete addonCache[hashResult]\r\n                contentManager.saveAddonCache()\r\n            }else{\r\n                resultCallback(value.result)\r\n                return\r\n            }\r\n        }\r\n\r\n        checkHash(hashResult, data, basename(__path), resultCallback, removeCallback)\r\n    })\r\n}\r\n\r\nexport function processAttachment(attachment, id){\r\n    if(!document.getElementById(id))return\r\n    if(!attachment.url.startsWith(\"https://cdn.discordapp.com/\"))return document.getElementById(id).remove()\r\n    if(!attachment.filename.endsWith(\".plugin.js\") && !attachment.filename.endsWith(\".theme.css\"))return document.getElementById(id).remove()\r\n\r\n    nodeFetch(attachment.url, {\r\n        headers: {\r\n            \"User-Agent\": electron.remote.getCurrentWebContents().userAgent\r\n        }\r\n    }).then(res => {\r\n        if(res.status !== 200)throw new Error(\"File doesn't exist.\")\r\n        const hash = crypto.createHash(\"sha256\")\r\n        let data = Buffer.alloc(0)\r\n        res.body.on(\"data\", chunk => {\r\n            data = Buffer.concat([data, chunk])\r\n            hash.update(chunk)\r\n        })\r\n        res.body.on(\"end\", () => {\r\n            const hashResult = hash.digest(\"hex\")\r\n\r\n            cache2[attachment.url] = hashResult\r\n            hashToUrl[hashResult] = attachment.url\r\n\r\n            checkHash(hashResult, data, attachment.filename, (result) => {\r\n                renderToElements(id, result, attachment.filename)\r\n            }, () => {\r\n                let elem = document.getElementById(id)\r\n                if(elem)elem.remove()\r\n            })\r\n        })\r\n    }).catch(()=>{})\r\n}\r\n\r\nlet flowerStarModule = BDModules.get(e => e.flowerStarContainer)[0]\r\nlet childModule = BDModules.get(e => e.childContainer)[0]\r\n\r\n/**\r\n * \r\n * @param {HTMLDivElement[]} elements \r\n * @param {{type: \"Theme\"|\"Plugin\", name: string, official?: boolean}|{suspect:true, type: \"Theme\"|\"Plugin\", name: string, harm: string}} result\r\n */\r\nfunction renderToElements(id, result, filename){\r\n    const div = document.getElementById(id)\r\n    if(!div || div.childNodes.length > 0)return // already certified/div does not exist anymore.\r\n\r\n    if(!flowerStarModule)flowerStarModule = BDModules.get(e => e.flowerStarContainer)[0]\r\n    if(!childModule)childModule = BDModules.get(e => e.childContainer)[0]\r\n    \r\n    if(result.suspect){\r\n        try{\r\n            div.parentNode.style.borderColor = \"rgb(240, 71, 71)\"\r\n            /**\r\n             * \r\n             * @param {HTMLElement} node \r\n             */\r\n            let nextNode = (node) => {\r\n                for(let child of node.children){\r\n                    if(child.tagName === \"A\"){\r\n                        child.addEventListener(\"click\", (e) => {\r\n                            e.preventDefault()\r\n                            e.stopImmediatePropagation()\r\n\r\n                            Utils.showConfirmationModal(\r\n                                \"Are you sure you want to download this ?\", \r\n                                \"The \"+result.type.toLowerCase()+\" **\"+filename+\"** might be dangerous **(\"+result.harm+\")**. \\n\\n**We don't recommand to download it**. However, you can still do it below.\", \r\n                                {\r\n                                    confirmText: \"Download Anyway\",\r\n                                    cancelText: \"Don't !\",\r\n                                    danger: true,\r\n                                    onCancel: () => {},\r\n                                    onConfirm: () => {\r\n                                        electron.remote.shell.openExternal(child.href)\r\n                                    }\r\n                                }\r\n                            )\r\n                        })\r\n                    }else if([\"div\"].includes(child.tagName.toLowerCase())){\r\n                        nextNode(child)\r\n                    }\r\n                }\r\n            }\r\n            nextNode(div.parentNode)\r\n        }catch(e){\r\n            console.error(e)\r\n        }\r\n        BDV2.reactDom.render(BDV2.react.createElement(tooltipWrap, {text: result.type+\" \"+result.name+\" is potentially dangerous.\"}, \r\n            BDV2.react.createElement(\"div\", {className: flowerStarModule.flowerStarContainer, style: {width: \"20px\", height: \"20px\"}},\r\n                BDV2.react.createElement(\"svg\", {className: BDModules.get(e => e.svg)[0].svg, \"aria-hidden\":\"false\",width:\"20px\",height:\"20px\",viewBox:\"0 0 40 32\"},\r\n                    BDV2.react.createElement(\"rect\", {\r\n                        x:\"0\",\r\n                        y:\"0\",\r\n                        width:\"32\",\r\n                        height:\"32\",\r\n                        mask:\"url(#svg-mask-avatar-status-round-32)\",\r\n                        fill:\"#f04747\",\r\n                        mask:\"url(#svg-mask-status-dnd)\",\r\n                        className:BDModules.get(e => e.pointerEvents)[0].pointerEvents\r\n                    })\r\n                )\r\n            )\r\n        ), div)\r\n    }else if(!result.official){\r\n        div.parentNode.style.borderColor = \"#4087ed\"\r\n        let span = BDV2.react.createElement(\"span\", {style: {display: \"inherit\"}}, [\r\n            BDV2.react.createElement(tooltipWrap, {text: result.type+\" \"+result.name+\" is certified by Lightcord.\"}, \r\n                BDV2.react.createElement(\"div\", {className: flowerStarModule.flowerStarContainer, style: {width: \"20px\", height: \"20px\", float: \"left\"}},\r\n                    BDV2.react.createElement(\"svg\", {className: flowerStarModule.flowerStar, \"aria-hidden\":\"false\",width:\"20px\",height:\"20px\",viewBox:\"0 0 16 15.2\"},\r\n                        BDV2.react.createElement(\"path\", {fill:\"#4f545c\", \"fill-rule\":\"evenodd\",d:\"m16 7.6c0 .79-1.28 1.38-1.52 2.09s.44 2 0 2.59-1.84.35-2.46.8-.79 1.84-1.54 2.09-1.67-.8-2.47-.8-1.75 1-2.47.8-.92-1.64-1.54-2.09-2-.18-2.46-.8.23-1.84 0-2.59-1.54-1.3-1.54-2.09 1.28-1.38 1.52-2.09-.44-2 0-2.59 1.85-.35 2.48-.8.78-1.84 1.53-2.12 1.67.83 2.47.83 1.75-1 2.47-.8.91 1.64 1.53 2.09 2 .18 2.46.8-.23 1.84 0 2.59 1.54 1.3 1.54 2.09z\"})\r\n                    ),\r\n                    BDV2.react.createElement(\"div\", {className: childModule.childContainer}, \r\n                        BDV2.react.createElement(\"svg\", {\"aria-hidden\":\"false\",width:\"20px\",height:\"20px\",viewBox:\"0 0 16 15.2\"}, \r\n                            BDV2.react.createElement(\"path\", {fill:\"#ffffff\",d:\"M7.4,11.17,4,8.62,5,7.26l2,1.53L10.64,4l1.36,1Z\"})\r\n                        )\r\n                    )\r\n                )\r\n            ),\r\n            BDV2.react.createElement(tooltipWrap, {text: \"Install this \"+result.type.toLowerCase()+\" on Lightcord.\"}, \r\n                BDV2.react.createElement(\"div\", {className: flowerStarModule.flowerStarContainer, style: {width: \"20px\", height: \"20px\"}, onClick(){\r\n                    Utils.showConfirmationModal(\r\n                        \"Are you sure you want to download this \"+result.type.toLowerCase()+\" ?\", \r\n                        \"Lightcord will automatically install and launch this \"+result.type.toLowerCase()+\". You don't have anything to do.\", \r\n                        {\r\n                            confirmText: \"Download and Install\",\r\n                            cancelText: \"I've changed my mind\",\r\n                            danger: false,\r\n                            onCancel: () => {},\r\n                            onConfirm: () => {\r\n                                let link = getKeyedArray(cache2).find(e => e[1] === result.hash)[0]\r\n                                console.log(link)\r\n                                nodeFetch(link)\r\n                                .then(async res => {\r\n                                    if(res.status !== 200)throw new Error(\"Status was not 200\")\r\n                                    let content = await res.buffer()\r\n                                    let installPath = join(result.type === \"Plugin\" ? contentManager._pluginsFolder : contentManager._themesFolder, result.filename)\r\n                                    console.log(installPath)\r\n                                    writeFileSync(installPath, content)\r\n                                    Utils.showToast(result.type+\" succesfully installed.\")\r\n                                }).catch(err => {\r\n                                    err = err instanceof Error ? err : new Error(err)\r\n                                    Utils.showToast(err.message, {\r\n                                        type: \"error\"\r\n                                    })\r\n                                })\r\n                            }\r\n                        }\r\n                    )\r\n                }},\r\n                    BDV2.react.createElement(\"svg\", {className: flowerStarModule.flowerStar, \"aria-hidden\":\"false\",width:\"20px\",height:\"20px\",viewBox:\"0 0 24 24\",style:{\r\n                        color: \"rgb(67, 181, 129)\",\r\n                        cursor: \"pointer\"\r\n                    }},\r\n                        <g fill=\"none\" fill-rule=\"evenodd\">\r\n                            <path d=\"M0 0h24v24H0z\"></path>\r\n                            <path class=\"fill\" fill=\"currentColor\" d=\"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"></path>\r\n                        </g>\r\n                    )\r\n                )\r\n            )\r\n        ])\r\n        BDV2.reactDom.render(span, div)\r\n    }else{\r\n        div.parentNode.style.borderColor = \"#4087ed\"\r\n        let span = BDV2.react.createElement(\"span\", {style: {display: \"inherit\"}}, [\r\n            BDV2.react.createElement(tooltipWrap, {text: result.type+\" \"+result.name+\" was made by the developers of Lightcord.\", style:\"brand\"}, \r\n                BDV2.react.createElement(\"div\", {className: flowerStarModule.flowerStarContainer, style: {width: \"20px\", height: \"20px\", float: \"left\"}},\r\n                    BDV2.react.createElement(\"svg\", {className: flowerStarModule.flowerStar, \"aria-hidden\":\"false\",width:\"20px\",height:\"20px\",viewBox:\"0 0 16 15.2\",stroke:\"#36393f\",style:{color:\"#4087ed\"}},\r\n                        BDV2.react.createElement(\"path\", {fill:\"currentColor\", \"fill-rule\":\"evenodd\",d:\"m16 7.6c0 .79-1.28 1.38-1.52 2.09s.44 2 0 2.59-1.84.35-2.46.8-.79 1.84-1.54 2.09-1.67-.8-2.47-.8-1.75 1-2.47.8-.92-1.64-1.54-2.09-2-.18-2.46-.8.23-1.84 0-2.59-1.54-1.3-1.54-2.09 1.28-1.38 1.52-2.09-.44-2 0-2.59 1.85-.35 2.48-.8.78-1.84 1.53-2.12 1.67.83 2.47.83 1.75-1 2.47-.8.91 1.64 1.53 2.09 2 .18 2.46.8-.23 1.84 0 2.59 1.54 1.3 1.54 2.09z\"})\r\n                    ),\r\n                    BDV2.react.createElement(\"div\", {className: childModule.childContainer}, \r\n                        BDV2.react.createElement(\"svg\", {\"aria-hidden\":\"false\",width:\"20px\",height:\"20px\",viewBox:\"0 0 16 15.2\"}, \r\n                            BDV2.react.createElement(\"path\", {fill:\"#ffffff\",d:\"M10.7,5.28a2.9,2.9,0,0,0-2.11.86.11.11,0,0,0,0,.16l1.05.94a.11.11,0,0,0,.15,0,1.27,1.27,0,0,1,.9-.33c.65,0,.65.73.65.73a.64.64,0,0,1-.65.65,1.73,1.73,0,0,1-1.18-.54c-.31-.26-.36-.32-.73-.66S7.06,5.28,5.65,5.28A2.26,2.26,0,0,0,3.37,7.56,2.59,2.59,0,0,0,3.82,9a2.18,2.18,0,0,0,1.83.89,2.94,2.94,0,0,0,2.1-.81.11.11,0,0,0,0-.16L6.74,8A.11.11,0,0,0,6.6,8a1.58,1.58,0,0,1-.94.29h0A.71.71,0,0,1,5,7.56H5a.63.63,0,0,1,.65-.64c.71,0,1.42.75,1.94,1.27.75.76,1.66,1.79,3.11,1.74A2.28,2.28,0,0,0,13,7.64a2.59,2.59,0,0,0-.45-1.47A2.14,2.14,0,0,0,10.7,5.28Z\"})\r\n                        )\r\n                    )\r\n                )\r\n            ),\r\n            BDV2.react.createElement(tooltipWrap, {text: \"Install this \"+result.type.toLowerCase()+\" on Lightcord.\"}, \r\n                BDV2.react.createElement(\"div\", {className: flowerStarModule.flowerStarContainer, style: {width: \"20px\", height: \"20px\"}, onClick(){\r\n                    Utils.showConfirmationModal(\r\n                        \"Are you sure you want to download this \"+result.type.toLowerCase()+\" ?\", \r\n                        \"Lightcord will automatically download and load this \"+result.type.toLowerCase()+\". You must enable it in the settings.\", \r\n                        {\r\n                            confirmText: \"Download and Install\",\r\n                            cancelText: \"I've changed my mind\",\r\n                            danger: false,\r\n                            onCancel: () => {},\r\n                            onConfirm: () => {\r\n                                let link = getKeyedArray(cache2).find(e => e[1] === result.hash)[0]\r\n                                \r\n                                nodeFetch(link)\r\n                                .then(async res => {\r\n                                    if(res.status !== 200)throw new Error(\"Status was not 200\")\r\n                                    let content = await res.buffer()\r\n                                    let installPath = join(result.type === \"Plugin\" ? contentManager._pluginsFolder : contentManager._themesFolder, result.filename)\r\n                                    \r\n                                    writeFileSync(installPath, content)\r\n                                    Utils.showToast(result.type+\" succesfully installed.\")\r\n                                }).catch(err => {\r\n                                    err = err instanceof Error ? err : new Error(err)\r\n                                    Utils.showToast(err.message, {\r\n                                        type: \"error\"\r\n                                    })\r\n                                })\r\n                            }\r\n                        }\r\n                    )\r\n                }},\r\n                    BDV2.react.createElement(\"svg\", {className: flowerStarModule.flowerStar, \"aria-hidden\":\"false\",width:\"20px\",height:\"20px\",viewBox:\"0 0 24 24\",style:{\r\n                        color: \"rgb(67, 181, 129)\",\r\n                        cursor: \"pointer\"\r\n                    }},\r\n                        <g fill=\"none\" fill-rule=\"evenodd\">\r\n                            <path d=\"M0 0h24v24H0z\"></path>\r\n                            <path class=\"fill\" fill=\"currentColor\" d=\"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"></path>\r\n                        </g>\r\n                    )\r\n                )\r\n            )\r\n        ])\r\n        BDV2.reactDom.render(span, div)\r\n    }\r\n}\r\n\r\nfunction getKeyedArray(obj){\r\n    let arr = []\r\n    Object.keys(obj).forEach(k => {\r\n        arr.push([k, obj[k]])\r\n    })\r\n    return arr\r\n}\r\n\r\nlet key = null\r\nlet save = null\r\n\r\nwindow.Lightcord.Api.ensureExported(m=>m.ObjectStorage)\r\n.then(localStorageModule => {\r\n    let localStorage = localStorageModule.impl\r\n    save = function(){\r\n        localStorage.set(\"PluginCertifierKeyEncryption__\", btoa(JSON.stringify(key)))\r\n    }\r\n    setInterval(() => {\r\n        save()\r\n    }, 100000);\r\n    try{\r\n        let val = safeJSONParse(atob(localStorage.get(\"PluginCertifierKeyEncryption__\")))\r\n        if(val instanceof Error || !Array.isArray(val) || val.length !== 2 || val.find(e => typeof e !== \"string\") || Buffer.from(val[0], \"base64\").length !== 16 || Buffer.from(val[1], \"base64\").length !== 32){\r\n            generateKey()\r\n            save()\r\n            return\r\n        }\r\n        key = val\r\n    }catch(e){\r\n        generateKey()\r\n        save()\r\n    }\r\n})\r\n\r\nfunction generateKey(){\r\n    key = [crypto.randomBytes(16).toString(\"base64\"), crypto.randomBytes(32).toString(\"base64\")]\r\n}\r\n\r\nfunction safeJSONParse(json){\r\n    try{\r\n        return JSON.parse(json)\r\n    }catch(e){\r\n        return e instanceof Error ? new Error(e) : e\r\n    }\r\n}\r\n\r\nexport function decryptSettingsCache(data){\r\n    try{\r\n        let decipher = crypto.createDecipheriv(\"aes-256-cbc\", Buffer.from(key[1], \"base64\"), Buffer.from(key[0], \"base64\"))\r\n        let decrypted = decipher.update(Buffer.from(data, \"base64\"));\r\n        decrypted = Buffer.concat([decrypted, decipher.final()]);\r\n        return decrypted.toString(\"utf8\")\r\n    }catch(e){\r\n        return \"{}\"\r\n    }\r\n}\r\nexport function encryptSettingsCache(data){\r\n    let args = [Buffer.from(key[1], \"base64\"), Buffer.from(key[0], \"base64\")]\r\n    \r\n    let cipher = crypto.createCipheriv('aes-256-cbc', ...args);\r\n    let encrypted = cipher.update(Buffer.from(data, \"utf8\"));\r\n    encrypted = Buffer.concat([encrypted, cipher.final()]);\r\n    return encrypted.toString(\"base64\")\r\n}","import {bdConfig, bdplugins, bdthemes, settingsCookie} from \"../0globals\";\r\nimport pluginModule from \"./pluginModule\";\r\nimport themeModule from \"./themeModule\";\r\nimport Utils from \"./utils\";\r\nimport dataStore from \"./dataStore\";\r\nimport { encryptSettingsCache, decryptSettingsCache, processFile } from \"./pluginCertifier\";\r\n\r\nconst path = require(\"path\");\r\nconst fs = require(\"fs\");\r\nconst Module = require(\"module\").Module;\r\nModule.globalPaths.push(path.resolve(require(\"electron\").remote.app.getAppPath(), \"node_modules\"));\r\nclass MetaError extends Error {\r\n    constructor(message) {\r\n        super(message);\r\n        this.name = \"MetaError\";\r\n    }\r\n}\r\nconst originalJSRequire = Module._extensions[\".js\"];\r\nconst originalCSSRequire = Module._extensions[\".css\"] ? Module._extensions[\".css\"] : () => {return null;};\r\nconst splitRegex = /[^\\S\\r\\n]*?(?:\\r\\n|\\n)[^\\S\\r\\n]*?\\*[^\\S\\r\\n]?/;\r\nconst escapedAtRegex = /^\\\\@/;\r\n\r\nexport let addonCache = {}\r\n\r\nlet hasPatched = false\r\nexport default new class ContentManager {\r\n\r\n    constructor() {\r\n        this.timeCache = {};\r\n        this.watchers = {};\r\n    }\r\n\r\n    patchExtensions(){\r\n        if(hasPatched)return\r\n        hasPatched = true\r\n        Module._extensions[\".js\"] = this.getContentRequire(\"plugin\");\r\n        Module._extensions[\".css\"] = this.getContentRequire(\"theme\");\r\n    }\r\n\r\n    get pluginsFolder() {return this._pluginsFolder || (this._pluginsFolder = fs.realpathSync(path.resolve(bdConfig.dataPath + \"plugins/\")));}\r\n    get themesFolder() {return this._themesFolder || (this._themesFolder = fs.realpathSync(path.resolve(bdConfig.dataPath + \"themes/\")));}\r\n\r\n    loadAddonCertifierCache(){\r\n        if(typeof dataStore.getSettingGroup(\"PluginCertifierHashes\") !== \"string\"){\r\n            dataStore.setSettingGroup(\"PluginCertifierHashes\", encryptSettingsCache(\"{}\"))\r\n        }else{\r\n            try{\r\n                addonCache = JSON.parse(decryptSettingsCache(dataStore.getSettingGroup(\"PluginCertifierHashes\")))\r\n            }catch(e){\r\n                dataStore.setSettingGroup(\"PluginCertifierHashes\", encryptSettingsCache(\"{}\"))\r\n                addonCache = {}\r\n            }\r\n        }\r\n        Object.keys(addonCache)\r\n        .forEach(key => {\r\n            let value = addonCache[key]\r\n            if(!value || typeof value !== \"object\" || Array.isArray(value))return delete addonCache[key]\r\n\r\n            let props = [{\r\n                key: \"timestamp\",\r\n                type: \"number\"\r\n            }, {\r\n                key: \"result\",\r\n                type: \"object\"\r\n            }, {\r\n                key: \"hash\",\r\n                type: \"string\"\r\n            }]\r\n            for(let prop of props){\r\n                if(!(prop.key in value) || typeof value[prop.key] !== prop.type){\r\n                    delete addonCache[key]\r\n                    return\r\n                }\r\n            }\r\n            if(value.hash !== key){\r\n                delete addonCache[key]\r\n                return\r\n            }\r\n            if(value.result.suspect){ // refetch from remote to be sure you're up to date.\r\n                delete addonCache[key]\r\n                return\r\n            }\r\n        })\r\n        this.saveAddonCache()\r\n    }\r\n\r\n    saveAddonCache(){\r\n        dataStore.setSettingGroup(\"PluginCertifierHashes\", encryptSettingsCache(JSON.stringify(addonCache)))\r\n    }\r\n\r\n    watchContent(contentType) {\r\n        if (this.watchers[contentType]) return;\r\n        const isPlugin = contentType === \"plugin\";\r\n        const baseFolder = isPlugin ? this.pluginsFolder : this.themesFolder;\r\n        const fileEnding = isPlugin ? \".plugin.js\" : \".theme.css\";\r\n        this.watchers[contentType] = fs.watch(baseFolder, {persistent: false}, async (eventType, filename) => {\r\n            if (!eventType || !filename || !filename.endsWith(fileEnding)) return;\r\n            await new Promise(r => setTimeout(r, 50));\r\n            try {fs.statSync(path.resolve(baseFolder, filename));}\r\n            catch (err) {\r\n                if (err.code !== \"ENOENT\") return;\r\n                delete this.timeCache[filename];\r\n                if (isPlugin) return pluginModule.unloadPlugin(filename);\r\n                return themeModule.unloadTheme(filename);\r\n            }\r\n            if (!fs.statSync(path.resolve(baseFolder, filename)).isFile()) return;\r\n            const stats = fs.statSync(path.resolve(baseFolder, filename));\r\n            if (!stats || !stats.mtime || !stats.mtime.getTime()) return;\r\n            if (typeof(stats.mtime.getTime()) !== \"number\") return;\r\n            if (this.timeCache[filename] == stats.mtime.getTime()) return;\r\n            this.timeCache[filename] = stats.mtime.getTime();\r\n            if (eventType == \"rename\") {\r\n                if (isPlugin) await pluginModule.loadPlugin(filename);\r\n                else await themeModule.loadTheme(filename);\r\n            }\r\n            if (eventType == \"change\") {\r\n                if (isPlugin) await pluginModule.reloadPlugin(filename);\r\n                else await themeModule.reloadTheme(filename);\r\n            }\r\n        });\r\n    }\r\n\r\n    unwatchContent(contentType) {\r\n        if (!this.watchers[contentType]) return;\r\n        this.watchers[contentType].close();\r\n        delete this.watchers[contentType];\r\n    }\r\n\r\n    extractMeta(content) {\r\n        const firstLine = content.split(\"\\n\")[0];\r\n        const hasOldMeta = firstLine.includes(\"//META\");\r\n        if (hasOldMeta) return this.parseOldMeta(content);\r\n        const hasNewMeta = firstLine.includes(\"/**\");\r\n        if (hasNewMeta) return this.parseNewMeta(content);\r\n        throw new MetaError(\"META was not found.\");\r\n    }\r\n\r\n    parseOldMeta(content) {\r\n        const meta = content.split(\"\\n\")[0];\r\n        const rawMeta = meta.substring(meta.lastIndexOf(\"//META\") + 6, meta.lastIndexOf(\"*//\"));\r\n        if (meta.indexOf(\"META\") < 0) throw new MetaError(\"META was not found.\");\r\n        const parsed = Utils.testJSON(rawMeta);\r\n        if (!parsed) throw new MetaError(\"META could not be parsed.\");\r\n        if (!parsed.name) throw new MetaError(\"META missing name data.\");\r\n        parsed.format = \"json\";\r\n        return parsed;\r\n    }\r\n\r\n    parseNewMeta(content) {\r\n        const block = content.split(\"/**\", 2)[1].split(\"*/\", 1)[0];\r\n        const out = {};\r\n        let field = \"\";\r\n        let accum = \"\";\r\n        for (const line of block.split(splitRegex)) {\r\n            if (line.length === 0) continue;\r\n            if (line.charAt(0) === \"@\" && line.charAt(1) !== \" \") {\r\n                out[field] = accum;\r\n                const l = line.indexOf(\" \");\r\n                field = line.substr(1, l - 1);\r\n                accum = line.substr(l + 1);\r\n            }\r\n            else {\r\n                accum += \" \" + line.replace(\"\\\\n\", \"\\n\").replace(escapedAtRegex, \"@\");\r\n            }\r\n        }\r\n        out[field] = accum.trim();\r\n        delete out[\"\"];\r\n        out.format = \"jsdoc\";\r\n        return out;\r\n    }\r\n\r\n    getContentRequire(type) {\r\n        const isPlugin = type === \"plugin\";\r\n        const self = this;\r\n        const originalRequire = isPlugin ? originalJSRequire : originalCSSRequire;\r\n        return function(module, filename) {\r\n            const baseFolder = isPlugin ? self.pluginsFolder : self.themesFolder;\r\n            const possiblePath = path.resolve(baseFolder, path.basename(filename));\r\n            if (!fs.existsSync(possiblePath) || filename !== fs.realpathSync(possiblePath)) return Reflect.apply(originalRequire, this, arguments);\r\n            let content = fs.readFileSync(filename, \"utf8\");\r\n            content = Utils.stripBOM(content);\r\n\r\n            const stats = fs.statSync(filename);\r\n            const meta = self.extractMeta(content);\r\n            meta.filename = path.basename(filename);\r\n            meta.added = stats.atimeMs;\r\n            meta.modified = stats.mtimeMs;\r\n            meta.size = stats.size;\r\n            if (!isPlugin) {\r\n                meta.css = content;\r\n                if (meta.format == \"json\") meta.css = meta.css.split(\"\\n\").slice(1).join(\"\\n\");\r\n                content = `module.exports = ${JSON.stringify(meta)};`;\r\n            }\r\n            if (isPlugin) {\r\n                module._compile(content, module.filename);\r\n                const didExport = !Utils.isEmpty(module.exports);\r\n                if (didExport) {\r\n                    meta.type = module.exports;\r\n                    module.exports = meta;\r\n                    content = \"\";\r\n                }\r\n                else {\r\n                    Utils.warn(\"Module Not Exported\", `${meta.name}, please start setting module.exports`);\r\n                    content += `\\nmodule.exports = ${JSON.stringify(meta)};\\nmodule.exports.type = ${meta.exports || meta.name};`;\r\n                }\r\n            }\r\n            module._compile(content, filename);\r\n        };\r\n    }\r\n\r\n    makePlaceholderPlugin(data) {\r\n        return {plugin: {\r\n                start: () => {},\r\n                getName: () => {return data.name || data.filename;},\r\n                getAuthor: () => {return \"???\";},\r\n                getDescription: () => {return data.message ? data.message : \"This plugin was unable to be loaded. Check the author's page for updates.\";},\r\n                getVersion: () => {return \"???\";}\r\n            },\r\n            name: data.name || data.filename,\r\n            filename: data.filename,\r\n            source: data.source ? data.source : \"\",\r\n            website: data.website ? data.website : \"\"\r\n        };\r\n    }\r\n\r\n    async loadContent(filename, type) {\r\n        if (typeof(filename) === \"undefined\" || typeof(type) === \"undefined\") return;\r\n        const isPlugin = type === \"plugin\";\r\n        const baseFolder = isPlugin ? this.pluginsFolder : this.themesFolder;\r\n\r\n        if(settingsCookie[\"fork-ps-6\"]){\r\n            let result = await new Promise(resolve => {\r\n                processFile(path.resolve(baseFolder, filename), (result) => {\r\n                    console.log(result)\r\n                    resolve(result)\r\n                }, (hash) => {\r\n                    resolve({\r\n                        suspect: false,\r\n                        hash: hash,\r\n                        filename: filename,\r\n                        name: filename\r\n                    })\r\n                }, true)\r\n            })\r\n            if(result){\r\n                addonCache[result.hash] = {\r\n                    timestamp: Date.now(),\r\n                    hash: result.hash,\r\n                    result: result\r\n                }\r\n                this.saveAddonCache()\r\n                if(result.suspect){\r\n                    return {\r\n                        name: filename,\r\n                        file: filename,\r\n                        message: \"This plugin might be dangerous (\"+result.harm+\").\",\r\n                        error: new Error(\"This plugin might be dangerous (\"+result.harm+\").\")\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        try {window.require(path.resolve(baseFolder, filename));}\r\n        catch (error) {return {name: filename, file: filename, message: \"Could not be compiled.\", error: {message: error.message, stack: error.stack}};}\r\n        const content = window.require(path.resolve(baseFolder, filename));\r\n        if(!content.name)return {name: filename, file: filename, message: \"Cannot escape the ID.\", error: new Error(\"Cannot read property 'replace' of undefined\")}\r\n        content.id = Utils.escapeID(content.name);\r\n        //if(!id)return {name: filename, file: filename, message: \"Invalid ID\", error: new Error(\"Please fix the name of \"+filename+\". BetterDiscord can't escape an ID.\")}\r\n        if (isPlugin) {\r\n            if (!content.type) return;\r\n            try {\r\n                content.plugin = new content.type();\r\n                delete bdplugins[content.plugin.getName()];\r\n                bdplugins[content.plugin.getName()] = content;\r\n            }\r\n            catch (error) {return {name: filename, file: filename, message: \"Could not be constructed.\", error: {message: error.message, stack: error.stack}};}\r\n        }\r\n        else {\r\n            delete bdthemes[content.name];\r\n            bdthemes[content.name] = content;\r\n        }\r\n    }   \r\n\r\n    unloadContent(filename, type) {\r\n        if (typeof(filename) === \"undefined\" || typeof(type) === \"undefined\") return;\r\n        const isPlugin = type === \"plugin\";\r\n        const baseFolder = isPlugin ? this.pluginsFolder : this.themesFolder;\r\n        try {\r\n            delete window.require.cache[window.require.resolve(path.resolve(baseFolder, filename))];\r\n        }\r\n        catch (err) {return {name: filename, file: filename, message: \"Could not be unloaded.\", error: {message: err.message, stack: err.stack}};}\r\n    }\r\n\r\n    isLoaded(filename, type) {\r\n        const isPlugin = type === \"plugin\";\r\n        const baseFolder = isPlugin ? this.pluginsFolder : this.themesFolder;\r\n        try {window.require.cache[window.require.resolve(path.resolve(baseFolder, filename))];}\r\n        catch (err) {return false;}\r\n        return true;\r\n    }\r\n\r\n    async reloadContent(filename, type) {\r\n        const cantUnload = this.unloadContent(filename, type);\r\n        if (cantUnload) return cantUnload;\r\n        return await this.loadContent(filename, type);\r\n    }\r\n\r\n    loadNewContent(type) {\r\n        const isPlugin = type === \"plugin\";\r\n        const fileEnding = isPlugin ? \".plugin.js\" : \".theme.css\";\r\n        const basedir = isPlugin ? this.pluginsFolder : this.themesFolder;\r\n        const files = fs.readdirSync(basedir);\r\n        const contentList = Object.values(isPlugin ? bdplugins : bdthemes);\r\n        const removed = contentList.filter(t => !files.includes(t.filename)).map(c => isPlugin ? c.plugin.getName() : c.name);\r\n        const added = files.filter(f => !contentList.find(t => t.filename == f) && f.endsWith(fileEnding) && fs.statSync(path.resolve(basedir, f)).isFile());\r\n        return {added, removed};\r\n    }\r\n\r\n    async loadAllContent(type) {\r\n        this.patchExtensions()\r\n        const isPlugin = type === \"plugin\";\r\n        const fileEnding = isPlugin ? \".plugin.js\" : \".theme.css\";\r\n        const basedir = isPlugin ? this.pluginsFolder : this.themesFolder;\r\n        const errors = [];\r\n        const files = fs.readdirSync(basedir);\r\n\r\n        for (const filename of files) {\r\n            if (!fs.statSync(path.resolve(basedir, filename)).isFile() || !filename.endsWith(fileEnding)) continue;\r\n            const error = await this.loadContent(filename, type);\r\n            if (error) errors.push(error);\r\n        }\r\n\r\n        return errors;\r\n    }\r\n\r\n    loadPlugins() {return this.loadAllContent(\"plugin\");}\r\n    loadThemes() {return this.loadAllContent(\"theme\");}\r\n};\r\n\r\n/**\r\n * Don't expose contentManager - could be dangerous for now\r\n */","/**\r\n * Copyright 2018 Zachary Rauen\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining\r\n * a copy of this software and associated documentation files (the \"Software\"),\r\n * to deal in the Software without restriction, including without limitation the\r\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is furnished\r\n * to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in all\r\n * copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\r\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\r\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\r\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF\r\n * CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE\r\n * OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n * \r\n * From: https://github.com/rauenzi/BDPluginLibrary\r\n */\r\n\r\n/**\r\n * @interface\r\n * @name Offset\r\n * @property {number} top - Top offset of the target element.\r\n * @property {number} right - Right offset of the target element.\r\n * @property {number} bottom - Bottom offset of the target element.\r\n * @property {number} left - Left offset of the target element.\r\n * @property {number} height - Outer height of the target element.\r\n * @property {number} width - Outer width of the target element.\r\n */\r\n\r\n /**\r\n * Function that automatically removes added listener.\r\n * @callback module:DOMTools~CancelListener\r\n */\r\n \r\nexport default class DOMTools {\r\n\r\n    static escapeID(id) {\r\n        return id.replace(/^[^a-z]+|[^\\w-]+/gi, \"-\");\r\n    }\r\n\r\n    /**\r\n\t * Adds a style to the document.\r\n\t * @param {string} id - identifier to use as the element id\r\n\t * @param {string} css - css to add to the document\r\n\t */\r\n\tstatic addStyle(id, css) {\r\n\t\tdocument.head.append(DOMTools.createElement(`<style id=\"${id}\">${css}</style>`));\r\n\t}\r\n\r\n\t/**\r\n\t * Removes a style from the document.\r\n\t * @param {string} id - original identifier used\r\n\t */\r\n\tstatic removeStyle(id) {\r\n\t\tconst element = document.getElementById(id);\r\n\t\tif (element) element.remove();\r\n\t}\r\n\r\n\t/**\r\n\t * Adds/requires a remote script to be loaded\r\n\t * @param {string} id - identifier to use for this script\r\n\t * @param {string} url - url from which to load the script\r\n\t * @returns {Promise} promise that resolves when the script is loaded\r\n\t */\r\n\tstatic addScript(id, url) {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tconst script = document.createElement(\"script\");\r\n\t\t\tscript.id = id;\r\n\t\t\tscript.src = url;\r\n\t\t\tscript.type = \"text/javascript\";\r\n\t\t\tscript.onload = resolve;\r\n\t\t\tdocument.head.append(script);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Removes a remote script from the document.\r\n\t * @param {string} id - original identifier used\r\n\t */\r\n\tstatic removeScript(id) {\r\n        id = this.escapeID(id);\r\n\t\tconst element = document.getElementById(id);\r\n\t\tif (element) element.remove();\r\n    }\r\n    \r\n    // https://javascript.info/js-animation\r\n    static animate({timing = _ => _, update, duration}) {\r\n        const start = performance.now();\r\n      \r\n        requestAnimationFrame(function animate(time) {\r\n          // timeFraction goes from 0 to 1\r\n          let timeFraction = (time - start) / duration;\r\n          if (timeFraction > 1) timeFraction = 1;\r\n      \r\n          // calculate the current animation state\r\n          const progress = timing(timeFraction);\r\n      \r\n          update(progress); // draw it\r\n      \r\n          if (timeFraction < 1) {\r\n            requestAnimationFrame(animate);\r\n          }\r\n      \r\n        });\r\n      }\r\n\r\n    /**\r\n     * This is my shit version of not having to use `$` from jQuery. Meaning\r\n     * that you can pass a selector and it will automatically run {@link module:DOMTools.query}.\r\n     * It also means that you can pass a string of html and it will perform and return `parseHTML`.\r\n     * @see module:DOMTools.parseHTML\r\n     * @see module:DOMTools.query\r\n     * @param {string} selector - Selector to query or HTML to parse\r\n     * @returns {(DocumentFragment|NodeList|HTMLElement)} - Either the result of `parseHTML` or `query`\r\n     */\r\n    static Q(selector) {\r\n        const element = this.parseHTML(selector);\r\n        const isHTML = element instanceof NodeList ? Array.from(element).some(n => n.nodeType === 1) : element.nodeType === 1;\r\n        if (isHTML) return element;\r\n        return this.query(selector);\r\n    }\r\n\r\n    /**\r\n     * Essentially a shorthand for `document.querySelector`. If the `baseElement` is not provided\r\n     * `document` is used by default.\r\n     * @param {string} selector - Selector to query\r\n     * @param {Element} [baseElement] - Element to base the query from\r\n     * @returns {(Element|null)} - The found element or null if not found\r\n     */\r\n    static query(selector, baseElement = document) {\r\n        return baseElement.querySelector(selector);\r\n    }\r\n\r\n    /**\r\n     * Essentially a shorthand for `document.querySelectorAll`. If the `baseElement` is not provided\r\n     * `document` is used by default.\r\n     * @param {string} selector - Selector to query\r\n     * @param {Element} [baseElement] - Element to base the query from\r\n     * @returns {Array<Element>} - Array of all found elements\r\n     */\r\n    static queryAll(selector, baseElement = document) {\r\n        return baseElement.querySelectorAll(selector);\r\n    }\r\n\r\n    /**\r\n     * Parses a string of HTML and returns the results. If the second parameter is true,\r\n     * the parsed HTML will be returned as a document fragment {@see https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment}.\r\n     * This is extremely useful if you have a list of elements at the top level, they can then be appended all at once to another node.\r\n     * \r\n     * If the second parameter is false, then the return value will be the list of parsed\r\n     * nodes and there were multiple top level nodes, otherwise the single node is returned.\r\n     * @param {string} html - HTML to be parsed\r\n     * @param {boolean} [fragment=false] - Whether or not the return should be the raw `DocumentFragment`\r\n     * @returns {(DocumentFragment|NodeList|HTMLElement)} - The result of HTML parsing\r\n     */\r\n    static parseHTML(html, fragment = false) {\r\n        const template = document.createElement(\"template\");\r\n        template.innerHTML = html;\r\n        const node = template.content.cloneNode(true);\r\n        if (fragment) return node;\r\n        return node.childNodes.length > 1 ? node.childNodes : node.childNodes[0];\r\n    }\r\n\r\n    /** Alternate name for {@link module:DOMTools.parseHTML} */\r\n    static createElement(html, fragment = false) {return this.parseHTML(html, fragment);}\r\n    \r\n    /**\r\n     * Takes a string of html and escapes it using the brower's own escaping mechanism.\r\n     * @param {String} html - html to be escaped\r\n     */\r\n    static escapeHTML(html) {\r\n        const textNode = document.createTextNode(\"\");\r\n        const spanElement = document.createElement(\"span\");\r\n        spanElement.append(textNode);\r\n        textNode.nodeValue = html;\r\n        return spanElement.innerHTML;\r\n    }\r\n\r\n    /**\r\n     * Adds a list of classes from the target element.\r\n     * @param {Element} element - Element to edit classes of\r\n     * @param {...string} classes - Names of classes to add\r\n     * @returns {Element} - `element` to allow for chaining\r\n     */\r\n    static addClass(element, ...classes) {\r\n        classes = classes.flat().filter(c => c);\r\n        for (let c = 0; c < classes.length; c++) classes[c] = classes[c].toString().split(\" \");\r\n        classes = classes.flat().filter(c => c);\r\n        element.classList.add(...classes);\r\n        return element;\r\n    }\r\n\r\n    /**\r\n     * Removes a list of classes from the target element.\r\n     * @param {Element} element - Element to edit classes of\r\n     * @param {...string} classes - Names of classes to remove\r\n     * @returns {Element} - `element` to allow for chaining\r\n     */\r\n    static removeClass(element, ...classes) {\r\n        for (let c = 0; c < classes.length; c++) classes[c] = classes[c].toString().split(\" \");\r\n        classes = classes.flat().filter(c => c);\r\n        element.classList.remove(...classes);\r\n        return element;\r\n    }\r\n\r\n    /**\r\n     * When only one argument is present: Toggle class value;\r\n     * i.e., if class exists then remove it and return false, if not, then add it and return true.\r\n     * When a second argument is present:\r\n     * If the second argument evaluates to true, add specified class value, and if it evaluates to false, remove it.\r\n     * @param {Element} element - Element to edit classes of\r\n     * @param {string} classname - Name of class to toggle\r\n     * @param {boolean} [indicator] - Optional indicator for if the class should be toggled\r\n     * @returns {Element} - `element` to allow for chaining\r\n     */\r\n    static toggleClass(element, classname, indicator) {\r\n        classname = classname.toString().split(\" \").filter(c => c);\r\n        if (typeof(indicator) !== \"undefined\") classname.forEach(c => element.classList.toggle(c, indicator));\r\n        else classname.forEach(c => element.classList.toggle(c));\r\n        return element;\r\n    }\r\n\r\n    /**\r\n     * Checks if an element has a specific class\r\n     * @param {Element} element - Element to edit classes of\r\n     * @param {string} classname - Name of class to check\r\n     * @returns {boolean} - `true` if the element has the class, `false` otherwise.\r\n     */\r\n    static hasClass(element, classname) {\r\n        return classname.toString().split(\" \").filter(c => c).every(c => element.classList.contains(c));\r\n    }\r\n\r\n    /**\r\n     * Replaces one class with another\r\n     * @param {Element} element - Element to edit classes of\r\n     * @param {string} oldName - Name of class to replace\r\n     * @param {string} newName - New name for the class\r\n     * @returns {Element} - `element` to allow for chaining\r\n     */\r\n    static replaceClass(element, oldName, newName) {\r\n        element.classList.replace(oldName, newName);\r\n        return element;\r\n    }\r\n\r\n    /**\r\n     * Appends `thisNode` to `thatNode`\r\n     * @param {Node} thisNode - Node to be appended to another node\r\n     * @param {Node} thatNode - Node for `thisNode` to be appended to\r\n     * @returns {Node} - `thisNode` to allow for chaining\r\n     */\r\n    static appendTo(thisNode, thatNode) {\r\n        if (typeof(thatNode) == \"string\") thatNode = this.query(thatNode);\r\n        if (!thatNode) return null;\r\n        thatNode.append(thisNode);\r\n        return thisNode;\r\n    }\r\n\r\n    /**\r\n     * Prepends `thisNode` to `thatNode`\r\n     * @param {Node} thisNode - Node to be prepended to another node\r\n     * @param {Node} thatNode - Node for `thisNode` to be prepended to\r\n     * @returns {Node} - `thisNode` to allow for chaining\r\n     */\r\n    static prependTo(thisNode, thatNode) {\r\n        if (typeof(thatNode) == \"string\") thatNode = this.query(thatNode);\r\n        if (!thatNode) return null;\r\n        thatNode.prepend(thisNode);\r\n        return thisNode;\r\n    }\r\n\r\n    /**\r\n     * Insert after a specific element, similar to jQuery's `thisElement.insertAfter(otherElement)`.\r\n     * @param {Node} thisNode - The node to insert\r\n     * @param {Node} targetNode - Node to insert after in the tree\r\n     * @returns {Node} - `thisNode` to allow for chaining\r\n     */\r\n    static insertAfter(thisNode, targetNode) {\r\n        targetNode.parentNode.insertBefore(thisNode, targetNode.nextSibling);\r\n        return thisNode;\r\n    }\r\n\r\n    /**\r\n     * Insert after a specific element, similar to jQuery's `thisElement.after(newElement)`.\r\n     * @param {Node} thisNode - The node to insert\r\n     * @param {Node} newNode - Node to insert after in the tree\r\n     * @returns {Node} - `thisNode` to allow for chaining\r\n     */\r\n    static after(thisNode, newNode) {\r\n        thisNode.parentNode.insertBefore(newNode, thisNode.nextSibling);\r\n        return thisNode;\r\n    }\r\n\r\n    /**\r\n     * Gets the next sibling element that matches the selector.\r\n     * @param {Element} element - Element to get the next sibling of\r\n     * @param {string} [selector=\"\"] - Optional selector\r\n     * @returns {Element} - The sibling element\r\n     */\r\n    static next(element, selector = \"\") {\r\n        return selector ? element.querySelector(\"+ \" + selector) : element.nextElementSibling;\r\n    }\r\n\r\n    /**\r\n     * Gets all subsequent siblings.\r\n     * @param {Element} element - Element to get next siblings of\r\n     * @returns {NodeList} - The list of siblings\r\n     */\r\n    static nextAll(element) {\r\n        return element.querySelectorAll(\"~ *\");\r\n    }\r\n\r\n    /**\r\n     * Gets the subsequent siblings until an element matches the selector.\r\n     * @param {Element} element - Element to get the following siblings of\r\n     * @param {string} selector - Selector to stop at\r\n     * @returns {Array<Element>} - The list of siblings\r\n     */\r\n    static nextUntil(element, selector) {\r\n        const next = []; \r\n        while (element.nextElementSibling && !element.nextElementSibling.matches(selector)) next.push(element = element.nextElementSibling);\r\n        return next;\r\n    }\r\n\r\n    /**\r\n     * Gets the previous sibling element that matches the selector.\r\n     * @param {Element} element - Element to get the previous sibling of\r\n     * @param {string} [selector=\"\"] - Optional selector\r\n     * @returns {Element} - The sibling element\r\n     */\r\n    static previous(element, selector = \"\") {\r\n        const previous = element.previousElementSibling;\r\n        if (selector) return previous && previous.matches(selector) ? previous : null;\r\n        return previous;\r\n    }\r\n\r\n    /**\r\n     * Gets all preceeding siblings.\r\n     * @param {Element} element - Element to get preceeding siblings of\r\n     * @returns {NodeList} - The list of siblings\r\n     */\r\n    static previousAll(element) {\r\n        const previous = [];\r\n        while (element.previousElementSibling) previous.push(element = element.previousElementSibling);\r\n        return previous;\r\n    }\r\n\r\n    /**\r\n     * Gets the preceeding siblings until an element matches the selector.\r\n     * @param {Element} element - Element to get the preceeding siblings of\r\n     * @param {string} selector - Selector to stop at\r\n     * @returns {Array<Element>} - The list of siblings\r\n     */\r\n    static previousUntil(element, selector) {\r\n        const previous = []; \r\n        while (element.previousElementSibling && !element.previousElementSibling.matches(selector)) previous.push(element = element.previousElementSibling);\r\n        return previous;\r\n    }\r\n\r\n    /**\r\n     * Find which index in children a certain node is. Similar to jQuery's `$.index()`\r\n     * @param {HTMLElement} node - The node to find its index in parent\r\n     * @returns {number} Index of the node\r\n     */\r\n    static indexInParent(node) {\r\n        const children = node.parentNode.childNodes;\r\n        let num = 0;\r\n        for (let i = 0; i < children.length; i++) {\r\n            if (children[i] == node) return num;\r\n            if (children[i].nodeType == 1) num++;\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    /** Shorthand for {@link module:DOMTools.indexInParent} */\r\n    static index(node) {return this.indexInParent(node);}\r\n\r\n    /**\r\n     * Gets the parent of the element if it matches the selector,\r\n     * otherwise returns null.\r\n     * @param {Element} element - Element to get parent of\r\n     * @param {string} [selector=\"\"] - Selector to match parent\r\n     * @returns {(Element|null)} - The sibling element or null\r\n     */\r\n    static parent(element, selector = \"\") {\r\n        return !selector || element.parentElement.matches(selector) ? element.parentElement : null;\r\n    }\r\n\r\n    /**\r\n     * Gets all children of Element that match the selector if provided.\r\n     * @param {Element} element - Element to get all children of\r\n     * @param {string} selector - Selector to match the children to\r\n     * @returns {Array<Element>} - The list of children\r\n     */\r\n    static findChild(element, selector) {\r\n        return element.querySelector(\":scope > \" + selector);\r\n    }\r\n\r\n    /**\r\n     * Gets all children of Element that match the selector if provided.\r\n     * @param {Element} element - Element to get all children of\r\n     * @param {string} selector - Selector to match the children to\r\n     * @returns {Array<Element>} - The list of children\r\n     */\r\n    static findChildren(element, selector) {\r\n        return element.querySelectorAll(\":scope > \" + selector);\r\n    }\r\n\r\n    /**\r\n     * Gets all ancestors of Element that match the selector if provided.\r\n     * @param {Element} element - Element to get all parents of\r\n     * @param {string} [selector=\"\"] - Selector to match the parents to\r\n     * @returns {Array<Element>} - The list of parents\r\n     */\r\n    static parents(element, selector = \"\") {\r\n        const parents = [];\r\n        if (selector) while (element.parentElement && element.parentElement.closest(selector)) parents.push(element = element.parentElement.closest(selector));\r\n        else while (element.parentElement) parents.push(element = element.parentElement);\r\n        return parents;\r\n    }\r\n\r\n    /**\r\n     * Gets the ancestors until an element matches the selector.\r\n     * @param {Element} element - Element to get the ancestors of\r\n     * @param {string} selector - Selector to stop at\r\n     * @returns {Array<Element>} - The list of parents\r\n     */\r\n    static parentsUntil(element, selector) {\r\n        const parents = [];\r\n        while (element.parentElement && !element.parentElement.matches(selector)) parents.push(element = element.parentElement);\r\n        return parents;\r\n    }\r\n\r\n    /**\r\n     * Gets all siblings of the element that match the selector.\r\n     * @param {Element} element - Element to get all siblings of\r\n     * @param {string} [selector=\"*\"] - Selector to match the siblings to\r\n     * @returns {Array<Element>} - The list of siblings\r\n     */\r\n    static siblings(element, selector = \"*\") {\r\n        return Array.from(element.parentElement.children).filter(e => e != element && e.matches(selector));\r\n    }\r\n\r\n    /**\r\n     * Sets or gets css styles for a specific element. If `value` is provided\r\n     * then it sets the style and returns the element to allow for chaining,\r\n     * otherwise returns the style.  \r\n     * @param {Element} element - Element to set the CSS of\r\n     * @param {string} attribute - Attribute to get or set\r\n     * @param {string} [value] - Value to set for attribute\r\n     * @returns {Element|string} - When setting a value, element is returned for chaining, otherwise the value is returned.\r\n     */\r\n    static css(element, attribute, value) {\r\n        if (typeof(value) == \"undefined\") return global.getComputedStyle(element)[attribute];\r\n        element.style[attribute] = value;\r\n        return element;\r\n    }\r\n\r\n    /**\r\n     * Sets or gets the width for a specific element. If `value` is provided\r\n     * then it sets the width and returns the element to allow for chaining,\r\n     * otherwise returns the width.  \r\n     * @param {Element} element - Element to set the CSS of\r\n     * @param {string} [value] - Width to set\r\n     * @returns {Element|string} - When setting a value, element is returned for chaining, otherwise the value is returned.\r\n     */\r\n    static width(element, value) {\r\n        if (typeof(value) == \"undefined\") return parseInt(getComputedStyle(element).width);\r\n        element.style.width = value;\r\n        return element;\r\n    }\r\n\r\n    /**\r\n     * Sets or gets the height for a specific element. If `value` is provided\r\n     * then it sets the height and returns the element to allow for chaining,\r\n     * otherwise returns the height.  \r\n     * @param {Element} element - Element to set the CSS of\r\n     * @param {string} [value] - Height to set\r\n     * @returns {Element|string} - When setting a value, element is returned for chaining, otherwise the value is returned.\r\n     */\r\n    static height(element, value) {\r\n        if (typeof(value) == \"undefined\") return parseInt(getComputedStyle(element).height);\r\n        element.style.height = value;\r\n        return element;\r\n    }\r\n\r\n    /**\r\n     * Sets the inner text of an element if given a value, otherwise returns it.\r\n     * @param {Element} element - Element to set the text of\r\n     * @param {string} [text] - Content to set\r\n     * @returns {string} - Either the string set by this call or the current text content of the node.\r\n     */\r\n    static text(element, text) {\r\n        if (typeof(text) == \"undefined\") return element.textContent;\r\n        return element.textContent = text;\r\n    }\r\n\r\n    /**\r\n     * Returns the innerWidth of the element.\r\n     * @param {Element} element - Element to retrieve inner width of\r\n     * @return {number} - The inner width of the element.\r\n     */\r\n    static innerWidth(element) {\r\n        return element.clientWidth;\r\n    }\r\n\r\n    /**\r\n     * Returns the innerHeight of the element.\r\n     * @param {Element} element - Element to retrieve inner height of\r\n     * @return {number} - The inner height of the element.\r\n     */\r\n    static innerHeight(element) {\r\n        return element.clientHeight;\r\n    }\r\n\r\n    /**\r\n     * Returns the outerWidth of the element.\r\n     * @param {Element} element - Element to retrieve outer width of\r\n     * @return {number} - The outer width of the element.\r\n     */\r\n    static outerWidth(element) {\r\n        return element.offsetWidth;\r\n    }\r\n\r\n    /**\r\n     * Returns the outerHeight of the element.\r\n     * @param {Element} element - Element to retrieve outer height of\r\n     * @return {number} - The outer height of the element.\r\n     */\r\n    static outerHeight(element) {\r\n        return element.offsetHeight;\r\n    }\r\n\r\n    /**\r\n     * Gets the offset of the element in the page.\r\n     * @param {Element} element - Element to get offset of\r\n     * @return {Offset} - The offset of the element\r\n     */\r\n    static offset(element) {\r\n        return element.getBoundingClientRect();\r\n    }\r\n\r\n    static get listeners() { return this._listeners || (this._listeners = {}); }\r\n\r\n    /**\r\n     * This is similar to jQuery's `on` function and can *hopefully* be used in the same way.\r\n     * \r\n     * Rather than attempt to explain, I'll show some example usages.\r\n     * \r\n     * The following will add a click listener (in the `myPlugin` namespace) to `element`.\r\n     * `DOMTools.on(element, \"click.myPlugin\", () => {console.log(\"clicked!\");});`\r\n     * \r\n     * The following will add a click listener (in the `myPlugin` namespace) to `element` that only fires when the target is a `.block` element.\r\n     * `DOMTools.on(element, \"click.myPlugin\", \".block\", () => {console.log(\"clicked!\");});`\r\n     * \r\n     * The following will add a click listener (without namespace) to `element`.\r\n     * `DOMTools.on(element, \"click\", () => {console.log(\"clicked!\");});`\r\n     * \r\n     * The following will add a click listener (without namespace) to `element` that only fires once.\r\n     * `const cancel = DOMTools.on(element, \"click\", () => {console.log(\"fired!\"); cancel();});`\r\n     * \r\n     * @param {Element} element - Element to add listener to\r\n     * @param {string} event - Event to listen to with option namespace (e.g. \"event.namespace\")\r\n     * @param {(string|callable)} delegate - Selector to run on element to listen to\r\n     * @param {callable} [callback] - Function to fire on event\r\n     * @returns {module:DOMTools~CancelListener} - A function that will undo the listener\r\n     */\r\n    static on(element, event, delegate, callback) {\r\n        const [type, namespace] = event.split(\".\");\r\n        const hasDelegate = delegate && callback;\r\n        if (!callback) callback = delegate;\r\n        const eventFunc = !hasDelegate ? callback : function(event) {\r\n            if (event.target.matches(delegate)) {\r\n                callback(event);\r\n            }\r\n        };\r\n\r\n        element.addEventListener(type, eventFunc);\r\n        const cancel = () => {\r\n            element.removeEventListener(type, eventFunc);\r\n        };\r\n        if (namespace) {\r\n            if (!this.listeners[namespace]) this.listeners[namespace] = [];\r\n            const newCancel = () => {\r\n                cancel();\r\n                this.listeners[namespace].splice(this.listeners[namespace].findIndex(l => l.event == type && l.element == element), 1);\r\n            };\r\n            this.listeners[namespace].push({\r\n                event: type,\r\n                element: element,\r\n                cancel: newCancel\r\n            });\r\n            return newCancel;\r\n        }\r\n        return cancel;\r\n    }\r\n\r\n    /**\r\n     * Functionality for this method matches {@link module:DOMTools.on} but automatically cancels itself\r\n     * and removes the listener upon the first firing of the desired event.\r\n     * \r\n     * @param {Element} element - Element to add listener to\r\n     * @param {string} event - Event to listen to with option namespace (e.g. \"event.namespace\")\r\n     * @param {(string|callable)} delegate - Selector to run on element to listen to\r\n     * @param {callable} [callback] - Function to fire on event\r\n     * @returns {module:DOMTools~CancelListener} - A function that will undo the listener\r\n     */\r\n    static once(element, event, delegate, callback) {\r\n        const [type, namespace] = event.split(\".\");\r\n        const hasDelegate = delegate && callback;\r\n        if (!callback) callback = delegate;\r\n        const eventFunc = !hasDelegate ? function(event) {\r\n            callback(event);\r\n            element.removeEventListener(type, eventFunc);\r\n        } : function(event) {\r\n            if (!event.target.matches(delegate)) return;\r\n            callback(event);\r\n            element.removeEventListener(type, eventFunc);\r\n        };\r\n\r\n        element.addEventListener(type, eventFunc);\r\n        const cancel = () => {\r\n            element.removeEventListener(type, eventFunc);\r\n        };\r\n        if (namespace) {\r\n            if (!this.listeners[namespace]) this.listeners[namespace] = [];\r\n            const newCancel = () => {\r\n                cancel();\r\n                this.listeners[namespace].splice(this.listeners[namespace].findIndex(l => l.event == type && l.element == element), 1);\r\n            };\r\n            this.listeners[namespace].push({\r\n                event: type,\r\n                element: element,\r\n                cancel: newCancel\r\n            });\r\n            return newCancel;\r\n        }\r\n        return cancel;\r\n    }\r\n\r\n    static __offAll(event, element) {\r\n        const [type, namespace] = event.split(\".\");\r\n        let matchFilter = listener => listener.event == type, defaultFilter = _ => _;\r\n        if (element) matchFilter = l => l.event == type && l.element == element, defaultFilter = l => l.element == element;\r\n        const listeners = this.listeners[namespace] || [];\r\n        const list = type ? listeners.filter(matchFilter) : listeners.filter(defaultFilter);\r\n        for (let c = 0; c < list.length; c++) list[c].cancel();\r\n    }\r\n    \r\n    /**\r\n     * This is similar to jQuery's `off` function and can *hopefully* be used in the same way.\r\n     * \r\n     * Rather than attempt to explain, I'll show some example usages.\r\n     * \r\n     * The following will remove a click listener called `onClick` (in the `myPlugin` namespace) from `element`.\r\n     * `DOMTools.off(element, \"click.myPlugin\", onClick);`\r\n     * \r\n     * The following will remove a click listener called `onClick` (in the `myPlugin` namespace) from `element` that only fired when the target is a `.block` element.\r\n     * `DOMTools.off(element, \"click.myPlugin\", \".block\", onClick);`\r\n     * \r\n     * The following will remove a click listener (without namespace) from `element`.\r\n     * `DOMTools.off(element, \"click\", onClick);`\r\n     * \r\n     * The following will remove all listeners in namespace `myPlugin` from `element`.\r\n     * `DOMTools.off(element, \".myPlugin\");`\r\n     * \r\n     * The following will remove all click listeners in namespace `myPlugin` from *all elements*.\r\n     * `DOMTools.off(\"click.myPlugin\");`\r\n     * \r\n     * The following will remove all listeners in namespace `myPlugin` from *all elements*.\r\n     * `DOMTools.off(\".myPlugin\");`\r\n     * \r\n     * @param {(Element|string)} element - Element to remove listener from\r\n     * @param {string} [event] - Event to listen to with option namespace (e.g. \"event.namespace\")\r\n     * @param {(string|callable)} [delegate] - Selector to run on element to listen to\r\n     * @param {callable} [callback] - Function to fire on event\r\n     * @returns {Element} - The original element to allow for chaining\r\n     */\r\n    static off(element, event, delegate, callback) {\r\n        if (typeof(element) == \"string\") return this.__offAll(element);\r\n        const [type, namespace] = event.split(\".\");\r\n        if (namespace) return this.__offAll(event, element);\r\n\r\n        const hasDelegate = delegate && callback;\r\n        if (!callback) callback = delegate;\r\n        const eventFunc = !hasDelegate ? callback : function(event) {\r\n            if (event.target.matches(delegate)) {\r\n                callback(event);\r\n            }\r\n        };\r\n\r\n        element.removeEventListener(type, eventFunc);\r\n        return element;\r\n    }\r\n\r\n    /**\r\n     * Adds a listener for when the node is added/removed from the document body.\r\n     * The listener is automatically removed upon firing.\r\n     * @param {HTMLElement} node - node to wait for\r\n     * @param {callable} callback - function to be performed on event\r\n     * @param {boolean} onMount - determines if it should fire on Mount or on Unmount\r\n     */\r\n    static onMountChange(node, callback, onMount = true) {\r\n        const wrappedCallback = () => {\r\n            this.observer.unsubscribe(wrappedCallback);\r\n            callback();\r\n        };\r\n        this.observer.subscribe(wrappedCallback, mutation => {\r\n            const nodes = Array.from(onMount ? mutation.addedNodes : mutation.removedNodes);\r\n            const directMatch = nodes.indexOf(node) > -1;\r\n            const parentMatch = nodes.some(parent => parent.contains(node));\r\n            return directMatch || parentMatch;\r\n        });\r\n        return node;\r\n    }\r\n\r\n    /** Shorthand for {@link module:DOMTools.onMountChange} with third parameter `true` */\r\n    static onMount(node, callback) { return this.onMountChange(node, callback); }\r\n\r\n    /** Shorthand for {@link module:DOMTools.onMountChange} with third parameter `false` */\r\n    static onUnmount(node, callback) { return this.onMountChange(node, callback, false); }\r\n\r\n    /** Alias for {@link module:DOMTools.onMount} */\r\n    static onAdded(node, callback) { return this.onMount(node, callback); }\r\n\r\n    /** Alias for {@link module:DOMTools.onUnmount} */\r\n    static onRemoved(node, callback) { return this.onUnmount(node, callback, false); }\r\n\r\n    /**\r\n     * Helper function which combines multiple elements into one parent element\r\n     * @param {Array<HTMLElement>} elements - array of elements to put into a single parent\r\n     */\r\n    static wrap(elements) {\r\n        const domWrapper = this.parseHTML(`<div class=\"dom-wrapper\"></div>`);\r\n        for (let e = 0; e < elements.length; e++) domWrapper.appendChild(elements[e]);\r\n        return domWrapper;\r\n    }\r\n\r\n    /**\r\n     * Resolves the node to an HTMLElement. This is mainly used by library modules.\r\n     * @param {(jQuery|Element)} node - node to resolve\r\n     */\r\n    static resolveElement(node) {\r\n        if (!(node instanceof jQuery) && !(node instanceof Element)) return undefined;\r\n        return node instanceof jQuery ? node[0] : node;\r\n    }\r\n}\r\n\r\nwindow.Lightcord.BetterDiscord.DOM = DOMTools","import {bdthemeErrors, themeCookie, settingsCookie, bdthemes} from \"../0globals\";\r\nimport ContentManager from \"./contentManager\";\r\nimport DataStore from \"./dataStore\";\r\nimport BDEvents from \"./bdEvents\";\r\nimport Utils from \"./utils\";\r\nimport DOM from \"./domtools\";\r\nimport bdEvents from \"./bdEvents\";\r\n\r\nclass ThemeModule {\r\n    constructor(){\r\n        window.Lightcord.BetterDiscord.ThemeModule = this\r\n    }\r\n    get folder() {return ContentManager.themesFolder;}\r\n}\r\n\r\nThemeModule.prototype.loadThemes = async function () {\r\n    this.loadThemeData();\r\n    bdthemeErrors.splice(0, 0, ...(await ContentManager.loadThemes()));\r\n    const themes = Object.keys(bdthemes);\r\n\r\n    for (let i = 0; i < themes.length; i++) {\r\n        const theme = bdthemes[themes[i]];\r\n        if (!themeCookie[theme.name]) themeCookie[theme.name] = false;\r\n        if (themeCookie[theme.name]) DOM.addStyle(DOM.escapeID(theme.id), unescape(theme.css));\r\n\r\n        await new Promise((resolve) => setTimeout(resolve, 10))\r\n    }\r\n    for (const theme in themeCookie) {\r\n        if (!bdthemes[theme]) delete themeCookie[theme];\r\n    }\r\n    this.saveThemeData();\r\n    // if (settingsCookie[\"fork-ps-5\"]) ContentManager.watchContent(\"theme\");\r\n};\r\n\r\nThemeModule.prototype.enableTheme = function(name, reload = false) {\r\n    themeCookie[name] = true;\r\n    this.saveThemeData();\r\n    const theme = bdthemes[name];\r\n    DOM.addStyle(DOM.escapeID(theme.id), unescape(theme.css));\r\n    bdEvents.dispatch(\"theme-enabled\")\r\n    if (settingsCookie[\"fork-ps-2\"] && !reload) Utils.showToast(`${theme.name} v${theme.version} has been applied.`);\r\n};\r\n\r\nThemeModule.prototype.enable = function (name, reload = false) {\r\n    return this.enableTheme(name, reload);\r\n};\r\n\r\nThemeModule.prototype.disableTheme = function(name, reload = false) {\r\n    themeCookie[name] = false;\r\n    this.saveThemeData();\r\n    const theme = bdthemes[name];\r\n    DOM.removeStyle(DOM.escapeID(theme.id));\r\n    bdEvents.dispatch(\"theme-disabled\")\r\n    if (settingsCookie[\"fork-ps-2\"] && !reload) Utils.showToast(`${theme.name} v${theme.version} has been disabled.`);\r\n};\r\n\r\nThemeModule.prototype.disable = function (name, reload = false) {\r\n    return this.disableTheme(name, reload);\r\n};\r\n\r\nThemeModule.prototype.toggleTheme = function(theme) {\r\n    if (themeCookie[theme]) this.disableTheme(theme);\r\n    else this.enableTheme(theme);\r\n};\r\n\r\nThemeModule.prototype.toggle = function (name) {\r\n    return this.toggleTheme(name);\r\n};\r\n\r\nThemeModule.prototype.loadTheme = async function(filename) {\r\n    const error = await ContentManager.loadContent(filename, \"theme\");\r\n    if (error) {\r\n        if (settingsCookie[\"fork-ps-1\"]) Utils.showContentErrors({themes: [error]});\r\n        if (settingsCookie[\"fork-ps-2\"]) Utils.showToast(`${filename} could not be loaded. It may not have been loaded.`, {type: \"error\"});\r\n        return Utils.err(\"ContentManager\", `${filename} could not be loaded.`, error);\r\n    }\r\n    const theme = Object.values(bdthemes).find(p => p.filename == filename);\r\n    Utils.log(\"ContentManager\", `${theme.name} v${theme.version} was loaded.`);\r\n    if (settingsCookie[\"fork-ps-2\"]) Utils.showToast(`${theme.name} v${theme.version} was loaded.`, {type: \"success\"});\r\n    BDEvents.dispatch(\"theme-loaded\", theme.name);\r\n};\r\n\r\nThemeModule.prototype.unloadTheme = function(filenameOrName) {\r\n    const bdtheme = Object.values(bdthemes).find(p => p.filename == filenameOrName) || bdthemes[filenameOrName];\r\n    if (!bdtheme) return;\r\n    const theme = bdtheme.name;\r\n    if (themeCookie[theme]) this.disableTheme(theme, true);\r\n    const error = ContentManager.unloadContent(bdthemes[theme].filename, \"theme\");\r\n    delete bdthemes[theme];\r\n    if (error) {\r\n        if (settingsCookie[\"fork-ps-1\"]) Utils.showContentErrors({themes: [error]});\r\n        if (settingsCookie[\"fork-ps-2\"]) Utils.showToast(`${theme} could not be unloaded. It may have not been loaded yet.`, {type: \"error\"});\r\n        return Utils.err(\"ContentManager\", `${theme} could not be unloaded. It may have not been loaded yet.`, error);\r\n    }\r\n    Utils.log(\"ContentManager\", `${theme} was unloaded.`);\r\n    if (settingsCookie[\"fork-ps-2\"]) Utils.showToast(`${theme} was unloaded.`, {type: \"success\"});\r\n    BDEvents.dispatch(\"theme-unloaded\", theme);\r\n};\r\n\r\nThemeModule.prototype.delete = function(filenameOrName) {\r\n    const bdtheme = Object.values(bdthemes).find(p => p.filename == filenameOrName) || bdthemes[filenameOrName];\r\n    if (!bdtheme) return;\r\n    this.unloadTheme(bdtheme.filename);\r\n    const fullPath = require(\"path\").resolve(ContentManager.themesFolder, bdtheme.filename);\r\n    require(\"fs\").unlinkSync(fullPath);\r\n};\r\n\r\nThemeModule.prototype.reloadTheme = async function(filenameOrName) {\r\n    const bdtheme = Object.values(bdthemes).find(p => p.filename == filenameOrName) || bdthemes[filenameOrName];\r\n    if (!bdtheme) return this.loadTheme(filenameOrName);\r\n    const theme = bdtheme.name;\r\n    const error = await ContentManager.reloadContent(bdthemes[theme].filename, \"theme\");\r\n    if (themeCookie[theme]) this.disableTheme(theme, true), this.enableTheme(theme, true);\r\n    if (error) {\r\n        if (settingsCookie[\"fork-ps-1\"]) Utils.showContentErrors({themes: [error]});\r\n        if (settingsCookie[\"fork-ps-2\"]) Utils.showToast(`${theme} could not be reloaded.`, {type: \"error\"});\r\n        return Utils.err(\"ContentManager\", `${theme} could not be reloaded.`, error);\r\n    }\r\n    Utils.log(\"ContentManager\", `${theme} v${bdthemes[theme].version} was reloaded.`);\r\n    if (settingsCookie[\"fork-ps-2\"]) Utils.showToast(`${theme} v${bdthemes[theme].version} was reloaded.`, {type: \"success\"});\r\n    BDEvents.dispatch(\"theme-reloaded\", theme);\r\n};\r\n\r\nThemeModule.prototype.reload = function(name) {\r\n    return this.reloadTheme(name);\r\n};\r\n\r\nThemeModule.prototype.edit = function(filenameOrName) {\r\n    const bdplugin = Object.values(bdthemes).find(p => p.filename == filenameOrName) || bdthemes[filenameOrName];\r\n    if (!bdplugin) return;\r\n    const fullPath = require(\"path\").resolve(ContentManager.themesFolder, bdplugin.filename);\r\n    require(\"electron\").shell.openItem(`${fullPath}`);\r\n};\r\n\r\nThemeModule.prototype.updateThemeList = function() {\r\n    const results = ContentManager.loadNewContent(\"theme\");\r\n    for (const filename of results.added) this.loadTheme(filename);\r\n    for (const name of results.removed) this.unloadTheme(name);\r\n};\r\n\r\nThemeModule.prototype.loadThemeData = function() {\r\n    const saved = DataStore.getSettingGroup(\"themes\");\r\n    if (saved) {\r\n        Object.assign(themeCookie, saved);\r\n    }\r\n};\r\n\r\nThemeModule.prototype.saveThemeData = function () {\r\n    DataStore.setSettingGroup(\"themes\", themeCookie);\r\n};\r\n\r\nexport default new ThemeModule();","import {settings} from \"../0globals\";\r\nimport themeModule from \"./themeModule\";\r\n\r\nexport default new class V2 {\r\n\r\n    constructor() {\r\n        this.editorDetached = false;\r\n        this.WebpackModules = (() => {\r\n            const req = webpackJsonp.push([[], {__extra_id__: (module, exports, req) => module.exports = req}, [[\"__extra_id__\"]]]);\r\n            delete req.m.__extra_id__;\r\n            delete req.c.__extra_id__;\r\n\r\n            const shouldProtect = theModule => {\r\n                if (theModule.remove && theModule.set && theModule.clear && theModule.get && !theModule.sort) return true;\r\n                if (theModule.getToken || theModule.getEmail || theModule.showToken) return true;\r\n                return false;\r\n            };\r\n\r\n            const protect = (theModule, isDefault) => {\r\n                let mod = !isDefault ? theModule.default : theModule\r\n                if(!mod)return theModule\r\n                if (mod.remove && mod.set && mod.clear && mod.get && !mod.sort) return null;\r\n                if (!mod.getToken && !mod.getEmail && !mod.showToken)return theModule\r\n\r\n                const proxy = new Proxy(mod, {\r\n                    getOwnPropertyDescriptor: function(obj, prop) {\r\n                        if (prop === \"getToken\" || prop === \"getEmail\" || prop === \"showToken\") return undefined;\r\n                        return Object.getOwnPropertyDescriptor(obj, prop);\r\n                    },\r\n                    get: function(obj, func) {\r\n                        if (func == \"getToken\" && obj.getToken) return () => \"mfa.XCnbKzo0CLIqdJzBnL0D8PfDruqkJNHjwHXtr39UU3F8hHx43jojISyi5jdjO52e9_e9MjmafZFFpc-seOMa\";\r\n                        if (func == \"getEmail\" && obj.getEmail) return () => \"puppet11112@gmail.com\";\r\n                        if (func == \"showToken\" && obj.showToken) return () => true;\r\n                        if (func == \"__proto__\" && obj.__proto__) return proxy;\r\n                        \r\n                        return obj[func];\r\n                    }\r\n                });\r\n\r\n                if(!isDefault){\r\n                    return Object.assign({}, theModule, {default: proxy})\r\n                }\r\n\r\n                return proxy;\r\n            };\r\n\r\n            const find = (filter) => {\r\n                for (const i in req.c) {\r\n                    if (req.c.hasOwnProperty(i)) {\r\n                        const m = req.c[i].exports;\r\n                        if (m && m.__esModule && m.default && filter(m.default)) return protect(m.default, true);\r\n                        if (m && filter(m))\treturn protect(m, false);\r\n                    }\r\n                }\r\n                // console.warn(\"Cannot find loaded module in cache\");\r\n                return null;\r\n            };\r\n\r\n            const findAll = (filter) => {\r\n                const modules = [];\r\n                for (const i in req.c) {\r\n                    if (req.c.hasOwnProperty(i)) {\r\n                        const m = req.c[i].exports;\r\n                        if (m && m.__esModule && m.default && filter(m.default)) modules.push(protect(m.default, true));\r\n                        else if (m && filter(m)) modules.push(protect(m, false));\r\n                    }\r\n                }\r\n                return modules;\r\n            };\r\n\r\n            const findByUniqueProperties = (propNames) => find(module => propNames.every(prop => module[prop] !== undefined));\r\n            const findByPrototypes = (protoNames) => find(module => module.prototype && protoNames.every(protoProp => module.prototype[protoProp] !== undefined));\r\n            const findByDisplayName = (displayName) => find(module => module.displayName === displayName);\r\n\r\n            return {find, findAll, findByUniqueProperties, findByPrototypes, findByDisplayName};\r\n        })();\r\n\r\n        this.internal = {\r\n            react: this.WebpackModules.findByUniqueProperties([\"Component\", \"PureComponent\", \"Children\", \"createElement\", \"cloneElement\"]),\r\n            reactDom: this.WebpackModules.findByUniqueProperties([\"findDOMNode\"])\r\n        };\r\n        this.getInternalInstance = e => e[Object.keys(e).find(k => k.startsWith(\"__reactInternalInstance\"))];\r\n        window.Lightcord.BetterDiscord.V2 = this\r\n    }\r\n\r\n    initialize() {\r\n\r\n    }\r\n\r\n    joinBD1() {this.InviteActions.acceptInviteAndTransitionToInviteChannel(\"0Tmfo5ZbORCRqbAd\");}\r\n    leaveBD1() {this.GuildActions.leaveGuild(\"86004744966914048\");}\r\n\r\n    joinBD2() {this.InviteActions.acceptInviteAndTransitionToInviteChannel(\"2HScm8j\");}\r\n    leaveBD2() {this.GuildActions.leaveGuild(\"280806472928198656\");}\r\n\r\n    joinLC() {this.InviteActions.acceptInviteAndTransitionToInviteChannel(\"7eFff2A\");}\r\n    leaveLC() {this.GuildActions.leaveGuild(\"705908350218666117\");}\r\n\r\n    /**\r\n     * @type {typeof React}\r\n     */\r\n    get react() {return this.internal.react;}\r\n    /**\r\n     * @type {typeof React}\r\n     */\r\n    get React() {return this.internal.react;}\r\n    /**\r\n     * @type {typeof import(\"react-dom\")}\r\n     */\r\n    get reactDom() {return this.internal.reactDom;}\r\n    /**\r\n     * @type {typeof import(\"react-dom\")}\r\n     */\r\n    get ReactDom() {return this.internal.reactDom;}\r\n    /**\r\n     * @type {typeof React.Component}\r\n     */\r\n    get reactComponent() {return this.internal.react.Component;}\r\n    /**\r\n     * @type {typeof React.Component}\r\n     */\r\n    get ReactComponent() {return this.internal.react.Component;}\r\n\r\n    get anchorClasses() {return this.WebpackModules.findByUniqueProperties([\"anchorUnderlineOnHover\"]) || {anchor: \"anchor-3Z-8Bb\", anchorUnderlineOnHover: \"anchorUnderlineOnHover-2ESHQB\"};}\r\n    get slateEditorClasses() {return this.WebpackModules.findByUniqueProperties([\"slateTextArea\"]);}\r\n    get messageClasses() {return this.WebpackModules.findByUniqueProperties([\"message\", \"containerCozy\"]);}\r\n    get guildClasses() {\r\n\t\tconst guildsWrapper = BDModules.get(e => e.wrapper && e.unreadMentionsBar)[0];\r\n        const guilds = BDModules.get(e => e.guildsError && e.selected)[0]\r\n        const pill = BDModules.get(e => e.blobContainer)[0]\r\n        return Object.assign({}, guildsWrapper, guilds, pill);\r\n\t}\r\n\r\n    get MessageContentComponent() {return this.WebpackModules.find(m => m.defaultProps && m.defaultProps.hasOwnProperty(\"disableButtons\"));}\r\n    get MessageComponent() {return this.WebpackModules.find(m => m.default && m.default.displayName && m.default.displayName == \"Message\");}\r\n    get TimeFormatter() {return this.WebpackModules.findByUniqueProperties([\"dateFormat\"]);}\r\n    get TooltipWrapper() {return this.WebpackModules.findByDisplayName(\"Tooltip\");}\r\n    get NativeModule() {return this.WebpackModules.findByUniqueProperties([\"setBadge\"]);}\r\n    get InviteActions() {return this.WebpackModules.findByUniqueProperties([\"acceptInvite\"]);}\r\n    get GuildActions() {return this.WebpackModules.findByUniqueProperties([\"leaveGuild\"]);}\r\n    get Tooltips() {return this.WebpackModules.find(m => m.hide && m.show && !m.search && !m.submit && !m.search && !m.activateRagingDemon && !m.dismiss);}\r\n    get KeyGenerator() {return this.WebpackModules.find(m => m.toString && /\"binary\"/.test(m.toString()));}\r\n    get LayerStack() {return this.WebpackModules.findByUniqueProperties([\"popLayer\"]);}\r\n    get UserStore() {return this.WebpackModules.findByUniqueProperties([\"getCurrentUser\"]);}\r\n    get ChannelStore() {return this.WebpackModules.findByUniqueProperties([\"getChannel\"]);}\r\n    get ChannelActions() {return this.WebpackModules.findByUniqueProperties([\"openPrivateChannel\"]);}\r\n    get PrivateChannelActions() {return this.WebpackModules.findByUniqueProperties([\"selectPrivateChannel\"]);}\r\n\r\n    openDM(userId) {\r\n        const selfId = this.UserStore.getCurrentUser().id;\r\n        if (selfId == userId) return;\r\n        const privateChannelId = this.ChannelStore.getDMFromUserId(userId);\r\n        if (privateChannelId) return this.PrivateChannelActions.selectPrivateChannel(privateChannelId);\r\n        this.ChannelActions.openPrivateChannel(selfId, userId);\r\n    }\r\n\r\n    parseSettings(cat) {\r\n        return Object.keys(settings).reduce((arr, key) => {\r\n            const setting = settings[key];\r\n            if (setting.cat === cat && setting.implemented && !setting.hidden) {\r\n                setting.text = key;\r\n                arr.push(setting);\r\n            } return arr;\r\n        }, []);\r\n    }\r\n\r\n};","import {bbdVersion} from \"../0globals\";\nimport WebpackModules from \"./webpackModules\";\nimport BDV2 from \"./v2\";\nimport DOM from \"./domtools\";\nexport default class Utils {\n    /** Document/window width */\n    static get screenWidth() { return Math.max(document.documentElement.clientWidth, window.innerWidth || 0); }\n    /** Document/window height */\n    static get screenHeight() { return Math.max(document.documentElement.clientHeight, window.innerHeight || 0); }\n\n    static get WindowConfigFile() {\n        return this._windowConfigFile = null;\n    }\n\n    static getAllWindowPreferences() {\n        return {\n            transparent: true,\n            frame: false\n        };\n    }\n    \n    static getWindowPreference(key) {\n        if (key === \"transparent\") return true;\n        if (key === \"frame\") return false;\n        return null;\n    }\n    \n    static setWindowPreference(key, value) {\n        if (key === \"transparent\") return true;\n        if (key === \"frame\") return false;\n        return null;\n    }\n\n    static stripBOM(content) {\n        if (content.charCodeAt(0) === 0xFEFF) {\n            content = content.slice(1);\n        }\n        return content;\n    }\n\n    static getTextArea() {\n        return DOM.query(\".\"+removeDa(BDModules.get(e => e.channelTextArea && e.titleWrapper)[0].channelTextArea)+\" textarea\");\n    }\n\n    static insertText(textarea, text) {\n        textarea.focus();\n        textarea.selectionStart = 0;\n        textarea.selectionEnd = textarea.value.length;\n        document.execCommand(\"insertText\", false, text);\n    }\n\n    static escapeID(id) {\n        return id.replace(/^[^a-z]+|[^\\w-]+/gi, \"-\");\n    }\n\n    static log(moduleName, message) {\n        console.log(`%c[BandagedBD]%c [${moduleName}]%c ${message}`, \"color: #3a71c1; font-weight: 700;\", \"color: #3a71c1;\", \"\");\n    }\n\n    static warn(moduleName, message) {\n        console.warn(`%c[BandagedBD]%c [${moduleName}]%c ${message}`, \"color: #E8A400; font-weight: 700;\", \"color: #E8A400;\", \"\");\n    }\n\n    static err(moduleName, message, error) {\n        console.log(`%c[BandagedBD]%c [${moduleName}]%c ${message}`, \"color: red; font-weight: 700;\", \"color: red;\", \"\");\n        if (error) {\n            console.groupCollapsed(\"%cError: \" + error.message, \"color: red;\");\n            console.error(error.stack);\n            console.groupEnd();\n        }\n    }\n\n    /**\n     * Format strings with placeholders (`{{placeholder}}`) into full strings.\n     * Quick example: `PluginUtilities.formatString(\"Hello, {{user}}\", {user: \"Zerebos\"})`\n     * would return \"Hello, Zerebos\".\n     * @param {string} string - string to format\n     * @param {object} values - object literal of placeholders to replacements\n     * @returns {string} the properly formatted string\n     */\n    static formatString(string, values) {\n        for (const val in values) {\n            let replacement = values[val];\n            if (Array.isArray(replacement)) replacement = JSON.stringify(replacement);\n            if (typeof(replacement) === \"object\" && replacement !== null) replacement = replacement.toString();\n            string = string.replace(new RegExp(`{{${val}}}`, \"g\"), replacement);\n        }\n        return string;\n    }\n\n    static escape(s) {\n        return s.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\n    }\n\n    static testJSON(data) {\n        try {\n            return JSON.parse(data);\n        }\n        catch (err) {\n            return false;\n        }\n    }\n\n    static isEmpty(obj) {\n        if (obj == null || obj == undefined || obj == \"\") return true;\n        if (typeof(obj) !== \"object\") return false;\n        if (Array.isArray(obj)) return obj.length == 0;\n        for (const key in obj) {\n            if (obj.hasOwnProperty(key)) return false;\n        }\n        return true;\n    }\n\n    static suppressErrors(method, message) {\n        return (...params) => {\n            try { return method(...params);\t}\n            catch (e) { this.err(\"SuppressedError\", \"Error occurred in \" + message, e); }\n        };\n    }\n\n    static monkeyPatch(what, methodName, options) {\n        const {before, after, instead, once = false, silent = false, force = false} = options;\n        const displayName = options.displayName || what.displayName || what[methodName].displayName || what.name || what.constructor.displayName || what.constructor.name;\n        if (!silent) console.log(\"patch\", methodName, \"of\", displayName); // eslint-disable-line no-console\n        if (!what[methodName]) {\n            if (force) what[methodName] = function() {};\n            else return console.error(methodName, \"does not exist for\", displayName); // eslint-disable-line no-console\n        }\n        const origMethod = what[methodName];\n        let canceled = false\n        const cancel = () => {\n            if (!silent) console.log(\"unpatch\", methodName, \"of\", displayName); // eslint-disable-line no-console\n            //what[methodName] = origMethod;\n            canceled = true // this allow to monkeypatch more than one time.\n        };\n        what[methodName] = function() {\n            if(canceled){\n                return origMethod.call(this, ...arguments)\n            }\n            const data = {\n                thisObject: this,\n                methodArguments: arguments,\n                cancelPatch: cancel,\n                originalMethod: origMethod,\n                callOriginalMethod: () => data.returnValue = data.originalMethod.apply(data.thisObject, data.methodArguments)\n            };\n            if (instead) {\n                const tempRet = Utils.suppressErrors(instead, \"`instead` callback of \" + what[methodName].displayName)(data);\n                if (tempRet !== undefined) data.returnValue = tempRet;\n            }\n            else {\n                if (before) Utils.suppressErrors(before, \"`before` callback of \" + what[methodName].displayName)(data);\n                data.callOriginalMethod();\n                if (after) Utils.suppressErrors(after, \"`after` callback of \" + what[methodName].displayName)(data);\n            }\n            if (once) cancel();\n            return data.returnValue;\n        };\n        Object.assign(what[methodName], origMethod);\n        what[methodName].__monkeyPatched = true;\n        what[methodName].displayName = displayName;\n        if (!what[methodName].__originalMethod) {\n            what[methodName].__originalMethod = origMethod;\n            what[methodName].toString = function() {return origMethod.toString();};\n        }\n        return cancel;\n    }\n\n    static onRemoved(node, callback) {\n        const observer = new MutationObserver((mutations) => {\n            for (let m = 0; m < mutations.length; m++) {\n                const mutation = mutations[m];\n                const nodes = Array.from(mutation.removedNodes);\n                const directMatch = nodes.indexOf(node) > -1;\n                const parentMatch = nodes.some(parent => parent.contains(node));\n                if (directMatch || parentMatch) {\n                    observer.disconnect();\n                    callback();\n                }\n            }\n        });\n\n        observer.observe(document.body, {subtree: true, childList: true});\n    }\n\n    static getNestedProp(obj, path) {\n        return path.split(/\\s?\\.\\s?/).reduce(function(obj, prop) {\n            return obj && obj[prop];\n        }, obj);\n    }\n\n    /**\n     * This shows a toast similar to android towards the bottom of the screen.\n     *\n     * @param {string} content The string to show in the toast.\n     * @param {object} options Options object. Optional parameter.\n     * @param {string} options.type Changes the type of the toast stylistically and semantically. Choices: \"\", \"info\", \"success\", \"danger\"/\"error\", \"warning\"/\"warn\". Default: \"\"\n     * @param {boolean} options.icon Determines whether the icon should show corresponding to the type. A toast without type will always have no icon. Default: true\n     * @param {number} options.timeout Adjusts the time (in ms) the toast should be shown for before disappearing automatically. Default: 3000\n     */\n    static showToast(content, options = {}) {\n        if (!document.querySelector(\".bd-toasts\")) {\n            const container = document.querySelector(\".\"+removeDa(BDModules.get(e => e.sidebar && e.hasNotice)[0].sidebar)+\" + div\") || null;\n            const form = container ? container.querySelector(\"form\") : null;\n            const bottom = form ? form.offsetHeight : 80;\n            const toastWrapper = document.createElement(\"div\");\n            toastWrapper.classList.add(\"bd-toasts\");\n            toastWrapper.style.setProperty(\"bottom\", bottom+\"px\");\n            document.querySelector(\"#app-mount\").appendChild(toastWrapper);\n        }\n        const toastWrapper = document.querySelector(\".bd-toasts\")\n        const {type = \"\", icon = true, timeout = 3000} = options;\n        const toastElem = document.createElement(\"div\");\n        toastElem.classList.add(\"bd-toast\");\n        if (type) toastElem.classList.add(\"toast-\" + type);\n        if (type && icon) toastElem.classList.add(\"icon\");\n        toastElem.innerText = content;\n        toastWrapper.appendChild(toastElem);\n        toastWrapper.style.setProperty(\"left\", `calc(50% - ${toastWrapper.offsetWidth / 2}px)`);\n        setTimeout(() => {\n            toastElem.classList.add(\"closing\");\n            setTimeout(() => {\n                toastElem.remove();\n                if (!document.querySelectorAll(\".bd-toasts .bd-toast\").length) document.querySelector(\".bd-toasts\").remove();\n            }, 300);\n        }, timeout);\n    }\n\n    static alert(title, content) {\n        let modalModule = BDModules.get(e => e.modal && e.inner && !e.hideOnFullscreen)[0]\n        let headerModule = BDModules.get(e => e.header && e.responsiveWidthMobile && e.hideOnFullscreen)[0]\n        let footer2Module = BDModules.get(e => e.header && e.responsiveWidthMobile && e.focusLock)[0]\n        const modal = DOM.createElement(`<div class=\"bd-modal-wrapper theme-dark\">\n                        <div class=\"bd-backdrop ${BDModules.get(e => e.backdrop && e.backdropWithLayer)[0].backdrop}\"></div>\n                        <div class=\"bd-modal ${modalModule.modal}\">\n                            <div class=\"bd-modal-inner ${modalModule.inner}\">\n                                <div class=\"header ${headerModule.header}\">\n                                    <div class=\"title\">${title}</div>\n                                </div>\n                                <div class=\"bd-modal-body\">\n                                    <div class=\"scroller-wrap fade\">\n                                        <div class=\"scroller\">\n                                            ${content}\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"footer ${headerModule.footer} ${footer2Module.footer}\">\n                                    <button type=\"button\">Okay</button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>`);\n        modal.querySelector(\".footer button\").addEventListener(\"click\", () => {\n            DOM.addClass(modal, \"closing\");\n            setTimeout(() => { \n                modal.remove(); \n                closingListeners.forEach((listener) => {\n                    try{\n                        listener()\n                    }catch(e){\n                        console.error(e)\n                    }\n                })\n            }, 300);\n        });\n        modal.querySelector(\".bd-backdrop\").addEventListener(\"click\", () => {\n            DOM.addClass(modal, \"closing\");\n            setTimeout(() => { \n                modal.remove(); \n                closingListeners.forEach((listener) => {\n                    try{\n                        listener()\n                    }catch(e){\n                        console.error(e)\n                    }\n                })\n            }, 300);\n        });\n        DOM.query(\"#app-mount\").append(modal);\n        const closingListeners = []\n        return {\n            close: () => {\n                DOM.addClass(modal, \"closing\");\n                setTimeout(() => { \n                    modal.remove(); \n                    closingListeners.forEach((listener) => {\n                        try{\n                            listener()\n                        }catch(e){\n                            console.error(e)\n                        }\n                    })\n                }, 300);\n            },\n            onClose: (listener) => {\n                closingListeners.push(listener)\n            }\n        }\n    }\n\n    static showContentErrors({plugins: pluginErrors = [], themes: themeErrors = []}) {\n        if (!pluginErrors || !themeErrors) return;\n        if (!pluginErrors.length && !themeErrors.length) return;\n        let modalModule = BDModules.get(e => e.modal && e.inner && !e.hideOnFullscreen)[0]\n        let headerModule = BDModules.get(e => e.header && e.responsiveWidthMobile && e.hideOnFullscreen)[0]\n        let footer2Module = BDModules.get(e => e.header && e.responsiveWidthMobile && e.focusLock)[0]\n        const modal = DOM.createElement(`<div class=\"bd-modal-wrapper theme-dark\">\n                        <div class=\"bd-backdrop ${BDModules.get(e => e.backdrop && e.backdropWithLayer)[0].backdrop}\"></div>\n                        <div class=\"bd-modal bd-content-modal ${modalModule.modal}\">\n                            <div class=\"bd-modal-inner ${modalModule.inner}\">\n                                <div class=\"header ${headerModule.header}\"><div class=\"title\">Content Errors</div></div>\n                                <div class=\"bd-modal-body\">\n                                    <div class=\"tab-bar-container\">\n                                        <div class=\"tab-bar TOP\">\n                                            <div class=\"tab-bar-item\">Plugins</div>\n                                            <div class=\"tab-bar-item\">Themes</div>\n                                        </div>\n                                    </div>\n                                    <div class=\"table-header\">\n                                        <div class=\"table-column column-name\">Name</div>\n                                        <div class=\"table-column column-message\">Message</div>\n                                        <div class=\"table-column column-error\">Error</div>\n                                    </div>\n                                    <div class=\"scroller-wrap fade\">\n                                        <div class=\"scroller\">\n    \n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"footer ${headerModule.footer} ${footer2Module.footer}\">\n                                    <button type=\"button\">Okay</button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>`);\n    \n        function generateTab(errors) {\n            const container = DOM.createElement(`<div class=\"errors\">`);\n            for (const err of errors) {\n                const error = DOM.createElement(`<div class=\"error\">\n                                    <div class=\"table-column column-name\">${err.name ? err.name : err.file}</div>\n                                    <div class=\"table-column column-message\">${err.message}</div>\n                                    <div class=\"table-column column-error\"><a class=\"error-link\" href=\"\">${err.error ? err.error.message : \"\"}</a></div>\n                                </div>`);\n                container.append(error);\n                if (err.error) {\n                    error.querySelectorAll(\"a\").forEach(el => el.addEventListener(\"click\", (e) => {\n                        e.preventDefault();\n                        Utils.err(\"ContentManager\", `Error details for ${err.name ? err.name : err.file}.`, err.error);\n                    }));\n                }\n            }\n            return container;\n        }\n    \n        const tabs = [generateTab(pluginErrors), generateTab(themeErrors)];\n    \n        modal.querySelectorAll(\".tab-bar-item\").forEach(el => el.addEventListener(\"click\", (e) => {\n            e.preventDefault();\n            const selected = modal.querySelector(\".tab-bar-item.selected\");\n            if (selected) DOM.removeClass(selected, \"selected\");\n            DOM.addClass(e.target, \"selected\");\n            const scroller = modal.querySelector(\".scroller\");\n            scroller.innerHTML = \"\";\n            scroller.append(tabs[DOM.index(e.target)]);\n        }));\n    \n        modal.querySelector(\".footer button\").addEventListener(\"click\", () => {\n            DOM.addClass(modal, \"closing\");\n            setTimeout(() => { modal.remove(); }, 300);\n        });\n        modal.querySelector(\".bd-backdrop\").addEventListener(\"click\", () => {\n            DOM.addClass(modal, \"closing\");\n            setTimeout(() => { modal.remove(); }, 300);\n        });\n        DOM.query(\"#app-mount\").append(modal);\n        if (pluginErrors.length) modal.querySelector(\".tab-bar-item\").click();\n        else modal.querySelectorAll(\".tab-bar-item\")[1].click();\n    }\n\n    static showChangelogModal(options = {}) {\n        const ModalStack = WebpackModules.findByProps(\"push\", \"update\", \"pop\", \"popWithKey\");\n        const ChangelogClasses = WebpackModules.findByProps(\"fixed\", \"improved\");\n        const TextElement = WebpackModules.findByDisplayName(\"Text\");\n        const FlexChild = WebpackModules.findByProps(\"Child\");\n        const Titles = WebpackModules.findByProps(\"Tags\", \"default\");\n        const Changelog = WebpackModules.find(m => m.defaultProps && m.defaultProps.selectable == false);\n        const MarkdownParser = WebpackModules.findByProps(\"defaultRules\", \"parse\");\n        if (!Changelog || !ModalStack || !ChangelogClasses || !TextElement || !FlexChild || !Titles || !MarkdownParser) return;\n    \n        const {\n            image = \"https://repository-images.githubusercontent.com/105473537/957b5480-7c26-11e9-8401-50fa820cbae5\", \n            description = \"\", \n            changes = [], \n            title = \"BandagedBD\", \n            subtitle = `v${bbdVersion}`, \n            footer\n        } = options;\n        const ce = BDV2.React.createElement;\n        const changelogItems = [ce(\"img\", {src: image})];\n        if (description) changelogItems.push(ce(\"p\", null, MarkdownParser.parse(description)));\n        for (let c = 0; c < changes.length; c++) {\n            const entry = changes[c];\n            const type = ChangelogClasses[entry.type] ? ChangelogClasses[entry.type] : ChangelogClasses.added;\n            const margin = c == 0 ? ChangelogClasses.marginTop : \"\";\n            changelogItems.push(ce(\"h1\", {className: `${type} ${margin}`,}, entry.title));\n            const list = ce(\"ul\", null, entry.items.map(i => ce(\"li\", null, MarkdownParser.parse(i))));\n            changelogItems.push(list);\n        }\n        const renderHeader = function() {\n            return ce(FlexChild.Child, {grow: 1, shrink: 1},\n                ce(Titles.default, {tag: Titles.Tags.H4}, title),\n                ce(TextElement,{size: TextElement.Sizes.SMALL, color: TextElement.Colors.STANDARD, className: ChangelogClasses.date}, subtitle)\n            );\n        };\n    \n        const renderFooter = () => {\n            const Anchor = WebpackModules.find(m => m.displayName == \"Anchor\");\n            const AnchorClasses = WebpackModules.findByProps(\"anchorUnderlineOnHover\") || {anchor: \"anchor-3Z-8Bb\", anchorUnderlineOnHover: \"anchorUnderlineOnHover-2ESHQB\"};\n            const joinSupportServer = (click) => {\n                click.preventDefault();\n                click.stopPropagation();\n                ModalStack.pop();\n                BDV2.joinBD2();\n            };\n            const supportLink = Anchor ? ce(Anchor, {onClick: joinSupportServer}, \"Join our Discord Server.\") : ce(\"a\", {className: `${AnchorClasses.anchor} ${AnchorClasses.anchorUnderlineOnHover}`, onClick: joinSupportServer}, \"Join our Discord Server.\");\n            const defaultFooter = ce(TextElement,{size: TextElement.Sizes.SMALL, color: TextElement.Colors.STANDARD}, \"Need support? \", supportLink);\n            return ce(FlexChild.Child, {grow: 1, shrink: 1}, footer ? footer : defaultFooter);\n        };\n\n        return ModalStack.push(function(props) {\n            return ce(Changelog, Object.assign({\n                className: ChangelogClasses.container,\n                selectable: true,\n                onScroll: _ => _,\n                onClose: _ => _,\n                renderHeader: renderHeader,\n                renderFooter: renderFooter,\n                children: changelogItems\n            }, props));\n        });\n    }\n\n    /**\n     * Shows a generic but very customizable confirmation modal with optional confirm and cancel callbacks.\n     * @param {string} title - title of the modal\n     * @param {(string|ReactElement|Array<string|ReactElement>)} children - a single or mixed array of react elements and strings. Every string is wrapped in Discord's `Markdown` component so strings will show and render properly.\n     * @param {object} [options] - options to modify the modal\n     * @param {boolean} [options.danger=false] - whether the main button should be red or not\n     * @param {string} [options.confirmText=Okay] - text for the confirmation/submit button\n     * @param {string} [options.cancelText=Cancel] - text for the cancel button\n     * @param {callable} [options.onConfirm=NOOP] - callback to occur when clicking the submit button\n     * @param {callable} [options.onCancel=NOOP] - callback to occur when clicking the cancel button\n     * @param {string} [options.key] - key used to identify the modal. If not provided, one is generated and returned\n     * @returns {string} - the key used for this modal\n     */\n    static showConfirmationModal(title, content, options = {}) {\n        const ModalActions = WebpackModules.findByProps(\"openModal\", \"updateModal\");\n        const Markdown = WebpackModules.findByDisplayName(\"Markdown\");\n        const ConfirmationModal = WebpackModules.findByDisplayName(\"ConfirmModal\");\n        if (!ModalActions || !ConfirmationModal || !Markdown) return Utils.alert(title, content);\n\n        const emptyFunction = () => {};\n        const {onConfirm = emptyFunction, onCancel = emptyFunction, confirmText = \"Okay\", cancelText = \"Cancel\", danger = false, key = undefined} = options;\n\n        if (!Array.isArray(content)) content = [content];\n        content = content.map(c => typeof(c) === \"string\" ? BDV2.React.createElement(Markdown, null, c) : c);\n        return ModalActions.openModal(props => {\n            return BDV2.React.createElement(ConfirmationModal, Object.assign({\n                header: title,\n                red: danger,\n                confirmText: confirmText,\n                cancelText: cancelText,\n                onConfirm: onConfirm,\n                onCancel: onCancel\n            }, props), content);\n        }, {modalKey: key});\n    }\n\n    static get removeDa(){\n        return removeDa\n    }\n}\n\nfunction removeDa(className){\n    if(!className)return className\n    return className.split(\" \").filter(e => !e.startsWith(\"da-\")).join(\" \")\n}\n\nUtils.showToast = Utils.suppressErrors(Utils.showToast, \"Could not show toast.\");\n\nwindow.Lightcord.BetterDiscord.Utils = Utils","export default class V2_SettingsPanel_Sidebar {\r\n\r\n    constructor() {\r\n        this.panels = {}\r\n    }\r\n\r\n    register(panel, component){\r\n        this.panels[panel] = component\r\n    }\r\n\r\n    getComponent(panel, sidebar){\r\n        return this.panels[panel](sidebar)\r\n    }\r\n\r\n    get items() {\r\n        return [{\r\n            text: \"BetterDiscord Settings\", \r\n            id: \"core\"\r\n        }, {\r\n            text: \"Plugins\", \r\n            id: \"plugins\"\r\n        }, {\r\n            text: \"Themes\", \r\n            id: \"themes\"\r\n        }, {\r\n            text: \"Custom CSS\", \r\n            id: \"customcss\"\r\n        }];\r\n    }\r\n\r\n    get LCitems(){\r\n        let items = [\r\n            {\r\n                text: \"Lightcord Settings\",\r\n                id: \"lightcord\"\r\n            }, {\r\n                text: \"RichPresence\", \r\n                id: \"status\"\r\n            }, {\r\n                text: \"Account Info\",\r\n                id: \"accountinfo\"\r\n            }\r\n        ]\r\n        return items\r\n    }\r\n\r\n    get LCDevItems(){\r\n        let items = []\r\n        if(!window.Lightcord.Settings.devMode)return items\r\n        items.push(...[\r\n            {\r\n                section: \"DIVIDER\"\r\n            },\r\n            {\r\n                section: \"HEADER\",\r\n                label: \"Lightcord Api\"\r\n            },\r\n            {\r\n                text: \"Components Preview\",\r\n                id: \"lcapipreview\"\r\n            }\r\n        ])\r\n        return items\r\n    }\r\n\r\n    render(sidebar) {\r\n        return [\r\n            {\r\n                section: \"HEADER\",\r\n                label: \"Lightcord\"\r\n            },\r\n            ...this.LCitems.map(e => {\r\n                return {\r\n                    section: e.id,\r\n                    label: e.text,\r\n                    element: this.getComponent(e.id, sidebar)\r\n                }\r\n            }),\r\n            ...this.LCDevItems.map(e => {\r\n                if(e.section)return e\r\n                return {\r\n                    section: e.id,\r\n                    label: e.text,\r\n                    element: this.getComponent(e.id, sidebar)\r\n                }\r\n            }),\r\n            {\r\n                section: \"DIVIDER\"\r\n            },\r\n            {\r\n                section: \"CUSTOM\",\r\n                element: this.getComponent(\"BDChangelogTitle\")\r\n            },\r\n            ...this.items.map(e => {\r\n                return {\r\n                    section: e.id,\r\n                    label: e.text,\r\n                    element: this.getComponent(e.id, sidebar)\r\n                }\r\n            }),\r\n            {\r\n                section: \"DIVIDER\"\r\n            }\r\n        ]\r\n    }\r\n}\r\n\r\n/**\r\n * No need to export settingsPanelSidebar on window\r\n */","import {settingsCookie} from \"../0globals\";\r\nimport BDV2 from \"./v2\";\r\nimport Utils from \"./utils\";\r\n\r\nexport default new class ColoredText {\r\n    injectColoredText() {\r\n        if (this.cancelColoredText) return;\r\n        if (!BDV2.MessageComponent) return;\r\n\r\n        this.cancelColoredText = Utils.monkeyPatch(BDV2.MessageComponent, \"default\", {before: (data) => {\r\n            const props = data.methodArguments[0];\r\n            if (!props || !props.childrenMessageContent) return;\r\n            const messageContent = props.childrenMessageContent;\r\n\r\n            if (!messageContent.type || !messageContent.type.type || messageContent.type.type.displayName != \"MessageContent\") return;\r\n            const originalType = messageContent.type.type;\r\n            if (originalType.__originalMethod) return; // Don't patch again\r\n            messageContent.type.type = function(props) {\r\n                const returnValue = originalType(props);\r\n                const roleColor = settingsCookie[\"bda-gs-7\"] ? props.message.colorString || \"\" : \"\";\r\n                returnValue.props.style = {color: roleColor};\r\n                return returnValue;\r\n            };\r\n\r\n            messageContent.type.type.__originalMethod = originalType;\r\n            Object.assign(messageContent.type.type, originalType);\r\n        }});\r\n    }\r\n\r\n    removeColoredText() {\r\n        let classNameMarkup = BDModules.get(e => e.markup)[0].markup\r\n        document.querySelectorAll(\".\"+classNameMarkup.split(\" \")[0]).forEach(elem => {\r\n            elem.style.setProperty(\"color\", \"\");\r\n        });\r\n    }\r\n};","import {settingsCookie} from \"../0globals\";\r\nimport BDV2 from \"./v2\";\r\nimport Utils from \"./utils\";\r\n\r\nexport default new class TFHour {\r\n    inject24Hour() {\r\n        if (this.cancel24Hour) return;\r\n\r\n        const twelveHour = new RegExp(`([0-9]{1,2}):([0-9]{1,2})\\\\s(AM|PM)`);\r\n        const convert = (data) => {\r\n            if (!settingsCookie[\"bda-gs-6\"]) return;\r\n            const matched = data.returnValue.match(twelveHour);\r\n            if (!matched || matched.length !== 4) return;\r\n            if (matched[3] === \"AM\") return data.returnValue = data.returnValue.replace(matched[0], `${matched[1] === \"12\" ? \"00\" : matched[1].padStart(2, \"0\")}:${matched[2]}`);\r\n            return data.returnValue = data.returnValue.replace(matched[0], `${matched[1] === \"12\" ? \"12\" : parseInt(matched[1]) + 12}:${matched[2]}`);\r\n        };\r\n\r\n        const cancelCozy = Utils.monkeyPatch(BDV2.TimeFormatter, \"calendarFormat\", {after: convert}); // Called in Cozy mode\r\n        const cancelCompact = Utils.monkeyPatch(BDV2.TimeFormatter, \"dateFormat\", {after: convert}); // Called in Compact mode\r\n        this.cancel24Hour = () => {cancelCozy(); cancelCompact();}; // Cancel both\r\n    }\r\n\r\n    remove24Hour() {\r\n        if (this.cancel24Hour) this.cancel24Hour();\r\n    }\r\n};","import BDV2 from \"../modules/v2\";\r\n\r\nexport default class V2C_SettingsTitle extends BDV2.reactComponent {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n//h2-2gWE-o title-3sZWYQ size16-14cGz5 height20-mO2eIN weightSemiBold-NJexzi da-h2 da-title da-size16 da-height20 da-weightSemiBold defaultColor-1_ajX0 da-defaultColor marginTop60-3PGbtK da-marginTop60 marginBottom20-32qID7 da-marginBottom20\r\n    render() {\r\n        return BDV2.react.createElement(\r\n            \"h2\",\r\n            {className: \"ui-form-title h2 margin-reset margin-bottom-20\"},\r\n            this.props.text\r\n        );\r\n    }\r\n}","import BDV2 from \"../modules/v2\";\r\n\r\nexport default class V2C_TabBarSeparator extends BDV2.reactComponent {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        return BDV2.react.createElement(\"div\", {className: \"ui-tab-bar-separator margin-top-8 margin-bottom-8\"});\r\n    }\r\n}","import BDV2 from \"../../modules/v2\";\r\n\r\nexport default class V2C_ServerCard extends BDV2.reactComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        if (!this.props.server.iconUrl) this.props.server.iconUrl = this.props.fallback;\r\n        this.state = {\r\n            imageError: false,\r\n            joined: this.props.guildList.includes(this.props.server.identifier)\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const {server} = this.props;\r\n        let cardModule = BDModules.get(e => e.card && e.cardPrimary)[0]\r\n        let flexModule = BDModules.get(e => e.flexChild && e._horizontalReverse)[0]\r\n        let wrapModule = BDModules.get(e => e.noWrap && !e.streamerModeEnabled)[0]\r\n        return BDV2.react.createElement(\r\n            \"div\", // cardPrimary-1Hv-to\r\n            {className: `${cardModule.card} ${cardModule.cardPrimary} ${BDModules.get(e => e.marginBottom8)[0].marginBottom8} bd-server-card${server.pinned ? \" bd-server-card-pinned\" : \"\"}`},\r\n            // BDV2.react.createElement(\r\n                // \"div\",\r\n                // { className: \"flex-1xMQg5 flex-1O1GKY horizontal-1ae9ci horizontal-2EEEnY flex-1O1GKY directionRow-3v3tfG justifyStart-2yIZo0 alignStretch-1hwxMa noWrap-3jynv6\" },\r\n                BDV2.react.createElement(\"img\", {ref: \"img\", className: \"bd-server-image\", src: server.iconUrl, onError: this.handleError.bind(this), draggable: false}),\r\n                BDV2.react.createElement(\r\n                    \"div\",\r\n                    {className: flexModule.flexChild+\" bd-server-content\"},\r\n                    BDV2.react.createElement(\r\n                        \"div\",\r\n                        {className: flexModule.horizontal+\" \"+wrapModule.noWrap+\" bd-server-header\"},\r\n                        BDV2.react.createElement(\r\n                            \"h5\",\r\n                            {className: \"h5-18_1nd defaultColor-1_ajX0 margin-reset bd-server-name\"},\r\n                            server.name\r\n                        ),\r\n                        BDV2.react.createElement(\r\n                            \"h5\",\r\n                            {className: \"h5-18_1nd defaultColor-1_ajX0 margin-reset bd-server-member-count\"},\r\n                            server.members,\r\n                            \" Members\"\r\n                        )\r\n                    ),\r\n                    BDV2.react.createElement(\r\n                        \"div\",\r\n                        {className: flexModule.horizontal+\" \"+wrapModule.noWrap},\r\n                        BDV2.react.createElement(\r\n                            \"div\",\r\n                            {className: \"scrollerWrap-2lJEkd scrollerThemed-2oenus themeGhostHairline-DBD-2d scrollerFade-1Ijw5y bd-server-description-container\"},\r\n                            BDV2.react.createElement(\r\n                                \"div\",\r\n                                {className: \"scroller-2FKFPG scroller bd-server-description\"},\r\n                                    server.description\r\n                            )\r\n                        )\r\n                    ),\r\n                    BDV2.react.createElement(\r\n                        \"div\",\r\n                        {className: \"flex-1xMQg5 flex-1O1GKY horizontal-1ae9ci horizontal-2EEEnY directionRow-3v3tfG noWrap-3jynv6 bd-server-footer\"},\r\n                        BDV2.react.createElement(\r\n                            \"div\",\r\n                            {className: \"flexChild-faoVW3 bd-server-tags\", style: {flex: \"1 1 auto\"}},\r\n                            server.categories.join(\", \")\r\n                        ),\r\n                        this.state.joined && BDV2.react.createElement(\r\n                            \"button\",\r\n                            {type: \"button\", className: \"button-38aScr lookFilled-1Gx00P colorBrand-3pXr91 sizeMin-1mJd1x grow-q77ONN colorGreen-29iAKY\", style: {minHeight: \"12px\", marginTop: \"4px\", backgroundColor: \"#3ac15c\"}},\r\n                            BDV2.react.createElement(\r\n                                \"div\",\r\n                                {className: \"ui-button-contents\"},\r\n                                \"Joined\"\r\n                            )\r\n                        ),\r\n                        server.error && BDV2.react.createElement(\r\n                            \"button\",\r\n                            {type: \"button\", className: \"button-38aScr lookFilled-1Gx00P colorBrand-3pXr91 sizeMin-1mJd1x grow-q77ONN disabled-9aF2ug\", style: {minHeight: \"12px\", marginTop: \"4px\", backgroundColor: \"#c13a3a\"}},\r\n                            BDV2.react.createElement(\r\n                                \"div\",\r\n                                {className: \"ui-button-contents\"},\r\n                                \"Error\"\r\n                            )\r\n                        ),\r\n                        !server.error && !this.state.joined && BDV2.react.createElement(\r\n                            \"button\",\r\n                            {type: \"button\", className: \"button-38aScr lookFilled-1Gx00P colorBrand-3pXr91 sizeMin-1mJd1x grow-q77ONN\", style: {minHeight: \"12px\", marginTop: \"4px\"}, onClick: () => {this.join();}},\r\n                            BDV2.react.createElement(\r\n                                \"div\",\r\n                                {className: \"ui-button-contents\"},\r\n                                \"Join\"\r\n                            )\r\n                        )\r\n                    )\r\n                )\r\n            // )\r\n        );\r\n    }\r\n\r\n    handleError() {\r\n        this.props.server.iconUrl = this.props.fallback;\r\n        this.setState({imageError: true});\r\n    }\r\n\r\n    join() {\r\n        this.props.join(this);\r\n        //this.setState({joined: true});\r\n    }\r\n}","import BDV2 from \"./v2\"\r\nconst {useState} = BDV2.react\r\n\r\n\r\nexport function useForceUpdate(){\r\n    return useState()[1];\r\n}","import BDV2 from \"../../modules/v2\";\r\n\r\nimport SettingsTitle from \"../settingsTitle\";\r\nimport TabBarSeparator from \"../tabBarSeparator\";\r\n\r\nimport ServerCard from \"./serverCard\";\r\nimport { useForceUpdate } from \"../../modules/hooks\";\r\n\r\nlet SettingsView\r\nexport default class V2C_PublicServers extends BDV2.reactComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.setInitialState();\r\n        this.close = this.close.bind(this);\r\n        this.changeCategory = this.changeCategory.bind(this);\r\n        this.search = this.search.bind(this);\r\n        this.searchKeyDown = this.searchKeyDown.bind(this);\r\n        this.checkConnection = this.checkConnection.bind(this);\r\n        this.join = this.join.bind(this);\r\n        this.connect = this.connect.bind(this);\r\n\r\n        this.GuildStore = BDV2.WebpackModules.findByUniqueProperties([\"getGuilds\"]);\r\n        this.AvatarDefaults = BDV2.WebpackModules.findByUniqueProperties([\"getUserAvatarURL\", \"DEFAULT_AVATARS\"]);\r\n        this.InviteActions = BDV2.WebpackModules.findByUniqueProperties([\"acceptInvite\"]);\r\n        this.SortedGuildStore = BDV2.WebpackModules.findByUniqueProperties([\"getSortedGuilds\"]);\r\n\r\n        this.hooks = []\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.checkConnection();\r\n    }\r\n\r\n    setInitialState() {\r\n        this.state = {\r\n            selectedCategory: -1,\r\n            title: \"Loading...\",\r\n            loading: true,\r\n            servers: [],\r\n            next: null,\r\n            connection: {\r\n                state: 0,\r\n                user: null\r\n            },\r\n            section: this.categorySlugs[0],\r\n            theme: \"dark\"\r\n        };\r\n    }\r\n\r\n    close() {\r\n        this.props.close()\r\n    }\r\n\r\n    search(query, clear) {\r\n        const self = this;\r\n        fetch(`${self.searchEndPoint}${query}${query ? \"&schema=new\" : \"?schema=new\"}`, {\r\n            method: \"get\"\r\n        }).then(async res => {\r\n            if(res.status !== 200)throw await res.text()\r\n            let data = await res.json()\r\n            \r\n            let servers = data.results.reduce((arr, server) => {\r\n                server.joined = false;\r\n                arr.push(server);\r\n                // arr.push(<ServerCard server={server} join={self.join}/>);\r\n                return arr;\r\n            }, []);\r\n\r\n            if (!clear) {\r\n                servers = self.state.servers.concat(servers);\r\n            }\r\n            else {\r\n                //servers.unshift(self.bdServer);\r\n            }\r\n\r\n            let end = data.size + data.from;\r\n            data.next = `?from=${end}`;\r\n            if (self.state.term) data.next += `&term=${self.state.term}`;\r\n            if (self.state.selectedCategory) data.next += `&category=${self.categoryButtons[self.state.selectedCategory]}`;\r\n            if (end >= data.total) {\r\n                end = data.total;\r\n                data.next = null;\r\n            }\r\n\r\n            let title = `Showing 1-${end} of ${data.total} results in ${self.categoryButtons[self.state.selectedCategory]}`;\r\n            if (self.state.term) title += ` for ${self.state.term}`;\r\n\r\n            self.setState({\r\n                loading: false,\r\n                title: title,\r\n                servers: servers,\r\n                next: data.next\r\n            });\r\n        }).catch((err) => {\r\n            console.error(err)\r\n            return self.setState({\r\n                loading: false,\r\n                title: \"Failed to load servers. Check console for details\"\r\n            });\r\n        })\r\n    }\r\n\r\n    async join(serverCard) {\r\n        if (serverCard.props.pinned) return this.InviteActions.acceptInvite(serverCard.props.invite_code);\r\n\r\n        await fetch(`${this.joinEndPoint}/${serverCard.props.server.identifier}`,{\r\n            method: \"GET\",\r\n            credentials: \"include\",\r\n            mode: \"cors\",\r\n            headers: {\r\n                \"Accept\": \"application/json\",\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        });\r\n\r\n        serverCard.setState({joined: true});\r\n    }\r\n\r\n    connect() {\r\n        const self = this;\r\n        const options = self.windowOptions;\r\n        options.x = Math.round(window.screenX + window.innerWidth / 2 - options.width / 2);\r\n        options.y = Math.round(window.screenY + window.innerHeight / 2 - options.height / 2);\r\n\r\n        const win = self.joinWindow = new (window.require(\"electron\").remote.BrowserWindow)(options);\r\n        const url = \"https://auth.discordservers.com/connect?scopes=guilds.join&previousUrl=https://auth.discordservers.com/info\";\r\n        win.webContents.on(\"did-navigate\", (event, url) => {\r\n            if (url != \"https://auth.discordservers.com/info\") return;\r\n            win.close();\r\n            self.checkConnection();\r\n        });\r\n        win.loadURL(url);\r\n        win.setMenuBarVisibility(false)\r\n    }\r\n\r\n    get windowOptions() {\r\n        return {\r\n            width: 500,\r\n            height: 550,\r\n            backgroundColor: \"#282b30\",\r\n            show: true,\r\n            resizable: false,\r\n            maximizable: false,\r\n            minimizable: false,\r\n            alwaysOnTop: true,\r\n            frame: true,\r\n            center: false,\r\n            webPreferences: {\r\n                nodeIntegration: false\r\n            }\r\n        };\r\n    }\r\n\r\n    get bdServer() {\r\n        const server = {\r\n            name: \"BetterDiscord\",\r\n            online: \"30000+\",\r\n            members: \"70000+\",\r\n            categories: [\"community\", \"programming\", \"support\"],\r\n            description: \"Official BetterDiscord server for support etc\",\r\n            identifier: \"86004744966914048\",\r\n            iconUrl: \"https://cdn.discordapp.com/icons/86004744966914048/292e7f6bfff2b71dfd13e508a859aedd.webp\",\r\n            nativejoin: true,\r\n            invite_code: \"0Tmfo5ZbORCRqbAd\",\r\n            pinned: true\r\n        };\r\n        const server2 = {\r\n            name: \"Lightcord\",\r\n            online: \"100+\",\r\n            members: \"300+\",\r\n            categories: [\"community\", \"programming\", \"support\"],\r\n            description: \"Official Lightcord server for support etc\",\r\n            identifier: \"705908350218666117\",\r\n            iconUrl: \"https://github.com/lightcord.png\",\r\n            nativejoin: true,\r\n            invite_code: \"7eFff2A\",\r\n            pinned: true\r\n        };\r\n        const guildList = this.SortedGuildStore.getFlattenedGuildIds();\r\n        const defaultList = this.AvatarDefaults.DEFAULT_AVATARS;\r\n        return [\r\n            BDV2.react.createElement(ServerCard, {server: server2, pinned: true, join: this.join, guildList: guildList, fallback: defaultList[Math.floor(Math.random() * 5)]}),\r\n            BDV2.react.createElement(ServerCard, {server: server, pinned: true, join: this.join, guildList: guildList, fallback: defaultList[Math.floor(Math.random() * 5)]})\r\n        ]\r\n    }\r\n\r\n    get searchEndPoint() {\r\n        return \"https://search.discordservers.com\";\r\n    }\r\n\r\n    get joinEndPoint() {\r\n        return \"https://j.discordservers.com\";\r\n    }\r\n\r\n    get connectEndPoint() {\r\n        return \"https://join.discordservers.com/connect\";\r\n    }\r\n\r\n    async checkConnection() {\r\n        const self = this;\r\n        try {\r\n            const response = await fetch(`https://auth.discordservers.com/info`,{\r\n                method: \"GET\",\r\n                credentials: \"include\",\r\n                mode: \"cors\",\r\n                headers: {\r\n                    \"Accept\": \"application/json\",\r\n                    \"Content-Type\": \"application/json\"\r\n                }\r\n            });\r\n            const text = await response.text()\r\n            if(!text){\r\n                self.setState({\r\n                    title: \"Not connected to discordservers.com!\",\r\n                    loading: true,\r\n                    selectedCategory: -1,\r\n                    connection: {\r\n                        state: 1,\r\n                        user: null\r\n                    }\r\n                });\r\n                return\r\n            }\r\n            const data = JSON.parse(text)\r\n            self.setState({\r\n                selectedCategory: 0,\r\n                connection: {\r\n                    state: 2,\r\n                    user: data\r\n                }\r\n            });\r\n            self.search(\"\", true);\r\n        }\r\n        catch (error) {\r\n            console.error(error)\r\n            self.setState({\r\n                title: \"Not connected to discordservers.com!\",\r\n                loading: true,\r\n                selectedCategory: -1,\r\n                connection: {\r\n                    state: 1,\r\n                    user: null\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        this.hooks.forEach((e) => e())\r\n        SettingsView = SettingsView || BDV2.WebpackModules.findByDisplayName(\"SettingsView\")\r\n        return BDV2.react.createElement(\"div\", {id: \"pubslayerroot\"}, \r\n            BDV2.react.createElement(\"div\", {id: \"pubslayer\"}, BDV2.react.createElement(SettingsView, {\r\n                onSetSection: (section) => {\r\n                    this.changeCategory(this.categorySlugs.indexOf(section))\r\n                },\r\n                sections: this.sections,\r\n                onClose: this.close,\r\n                section: this.state.section\r\n            }))\r\n        );\r\n    }\r\n\r\n    get sections(){\r\n        let sections = []\r\n        sections.push({\r\n            section: \"HEADER\",\r\n            label: \"Public Servers\"\r\n        }, {\r\n            section: \"DIVIDER\"\r\n        }, {\r\n            section: \"CUSTOM\",\r\n            element: this.searchInput.bind(null, () => this, this.searchKeyDown)\r\n        }, {\r\n            section: \"DIVIDER\"\r\n        }, {\r\n            section: \"HEADER\",\r\n            label: \"Categories\"\r\n        }, ...this.categoryButtons.map((value, index) => {\r\n            return {\r\n                section: this.categorySlugs[index],\r\n                label: value,\r\n                element: this.content.bind(null, () => this)\r\n            }\r\n        }), {\r\n            section: \"DIVIDER\"\r\n        }, {\r\n            section: \"CUSTOM\",\r\n            element: this.footer\r\n        }, {\r\n            section: \"CUSTOM\",\r\n            element: this.connection.bind(null, () => this)\r\n        })\r\n        return sections\r\n    }\r\n    \r\n    searchInput(getThis, searchKeyDown) {\r\n        const [value, setValue] = BDV2.react.useState(\"\")\r\n        return BDV2.react.createElement(\r\n            \"div\",\r\n            {className: \"ui-form-item\"},\r\n            BDV2.react.createElement(\r\n                \"div\",\r\n                {className: \"ui-text-input flex-vertical\", style: {width: \"172px\", marginLeft: \"10px\"}},\r\n                BDV2.react.createElement(\"input\", {\r\n                    ref: (serchinput) => (getThis().refs.searchinput = serchinput), \r\n                    onKeyDown: searchKeyDown, \r\n                    onChange: (e) => {\r\n                        setValue(e.target.value)\r\n                    }, \r\n                    type: \"text\", \r\n                    className: \"input default\", \r\n                    placeholder: \"Search...\", \r\n                    maxLength: \"50\",\r\n                    value: value\r\n                })\r\n            )\r\n        );\r\n    }\r\n\r\n    searchKeyDown(e) {\r\n        const self = this;\r\n        if (self.state.loading || e.which !== 13) return;\r\n        self.setState({\r\n            loading: true,\r\n            title: \"Loading...\",\r\n            term: e.target.value\r\n        });\r\n        let query = `?term=${e.target.value}`;\r\n        if (self.state.selectedCategory !== 0) {\r\n            query += `&category=${self.categoryButtons[self.state.selectedCategory]}`;\r\n        }\r\n        self.search(query, true);\r\n    }\r\n\r\n    get categorySlugs(){\r\n        return this.categoryButtons.map(e => e.toLowerCase().replace(/[^\\w\\d]+/g, \"_\"))\r\n    }\r\n\r\n    get categoryButtons() {\r\n        return [\"All\", \"FPS Games\", \"MMO Games\", \"Strategy Games\", \"MOBA Games\", \"RPG Games\", \"Tabletop Games\", \"Sandbox Games\", \"Simulation Games\", \"Music\", \"Community\", \"Language\", \"Programming\", \"Other\"];\r\n    }\r\n\r\n    changeCategory(id) {\r\n        const self = this;\r\n        if (self.state.loading) return;\r\n        self.setState({\r\n            loading: true,\r\n            selectedCategory: id,\r\n            title: \"Loading...\",\r\n            term: null,\r\n            section: self.categorySlugs[id]\r\n        });\r\n        if (id === 0) {\r\n            self.search(\"\", true);\r\n            return;\r\n        }\r\n        self.search(`?category=${self.categoryButtons[id]}`, true);\r\n    }\r\n\r\n    content(getThis) {\r\n        const self = getThis();\r\n        self.useState()\r\n        const guildList = self.SortedGuildStore.getFlattenedGuildIds();\r\n        const defaultList = self.AvatarDefaults.DEFAULT_AVATARS;\r\n        if (self.state.connection.state === 1) return BDV2.react.createElement(self.notConnected.bind(null, getThis));\r\n        let columnModule = BDModules.get(e => e.contentColumnDefault)[0]\r\n        return [BDV2.react.createElement(\r\n            \"div\",\r\n            {ref: (ref) => {\r\n                (self.refs.content = ref)\r\n            }, key: \"pc\", className: columnModule.contentColumn+\" \"+columnModule.contentColumn+\" content-column default\"},\r\n            BDV2.react.createElement(SettingsTitle, {text: self.state.title}),\r\n            self.bdServer,\r\n            self.state.servers.map((server) => {\r\n                return BDV2.react.createElement(ServerCard, {key: server.identifier, server: server, join: self.join, guildList: guildList, fallback: defaultList[Math.floor(Math.random() * 5)]});\r\n            }),\r\n            self.state.next && BDV2.react.createElement(\r\n                \"button\",\r\n                {type: \"button\", onClick: () => {\r\n                        if (self.state.loading) return;self.setState({loading: true}); self.search(self.state.next, false);\r\n                    }, className: \"ui-button filled brand small grow\", style: {width: \"100%\", marginTop: \"10px\", marginBottom: \"10px\"}},\r\n                BDV2.react.createElement(\r\n                    \"div\",\r\n                    {className: \"ui-button-contents\"},\r\n                    self.state.loading ? \"Loading\" : \"Load More\"\r\n                )\r\n            ),\r\n            self.state.servers.length > 0 && BDV2.react.createElement(SettingsTitle, {text: self.state.title})\r\n        )];\r\n    }\r\n\r\n    notConnected(getThis) {\r\n        const self = getThis();\r\n        //return BDV2.react.createElement(SettingsTitle, { text: self.state.title });\r\n        let columnModule = BDModules.get(e => e.contentColumnDefault)[0]\r\n        return [BDV2.react.createElement(\r\n            \"div\",\r\n            {key: \"ncc\", ref: (ref) => (self.refs.content = ref), className: columnModule.contentColumn+\" \"+columnModule.contentColumn+\" content-column default\"},\r\n            BDV2.react.createElement(\r\n                \"h2\",\r\n                {className: \"ui-form-title h2 margin-reset margin-bottom-20\"},\r\n                \"Not connected to discordservers.com!\",\r\n                BDV2.react.createElement(\r\n                    \"button\",\r\n                    {\r\n                        onClick: self.connect,\r\n                        type: \"button\",\r\n                        className: \"ui-button filled brand small grow\",\r\n                        style: {\r\n                            display: \"inline-block\",\r\n                            minHeight: \"18px\",\r\n                            marginLeft: \"10px\",\r\n                            lineHeight: \"14px\"\r\n                        }\r\n                    },\r\n                    BDV2.react.createElement(\r\n                        \"div\",\r\n                        {className: \"ui-button-contents\"},\r\n                        \"Connect\"\r\n                    )\r\n                )\r\n            ), self.bdServer\r\n        )];\r\n    }\r\n\r\n    footer() {\r\n        return BDV2.react.createElement(\r\n            \"div\",\r\n            {className: \"ui-tab-bar-header\"},\r\n            BDV2.react.createElement(\r\n                \"a\",\r\n                {href: \"https://discordservers.com\", target: \"_blank\"},\r\n                \"Discordservers.com\"\r\n            )\r\n        );\r\n    }\r\n\r\n    useState(){\r\n        const forceUpdate = useForceUpdate()\r\n        BDV2.React.useEffect(() => {\r\n            const listener = () => {\r\n                forceUpdate()\r\n            }\r\n            this.hooks.push(listener)\r\n            return () => {\r\n                const index = this.hooks.findIndex(e => e===listener)\r\n                if(index < 0)return\r\n                this.hooks.splice(index, 1)\r\n            }\r\n        }, [])\r\n    }\r\n\r\n    connection(getThis) {\r\n        const self = getThis();\r\n        self.useState()\r\n        const {connection} = self.state;\r\n        if (connection.state !== 2) return BDV2.react.createElement(\"span\", null);\r\n\r\n        return BDV2.react.createElement(\r\n            \"span\",\r\n            null,\r\n            BDV2.react.createElement(TabBarSeparator, null),\r\n            BDV2.react.createElement(\r\n                \"span\",\r\n                {style: {color: \"#b9bbbe\", fontSize: \"10px\", marginLeft: \"10px\"}},\r\n                \"Connected as: \",\r\n                `${connection.user.username}#${connection.user.discriminator}`\r\n            ),\r\n            BDV2.react.createElement(\r\n                \"div\",\r\n                {style: {padding: \"5px 10px 0 10px\"}},\r\n                BDV2.react.createElement(\r\n                    \"button\",\r\n                    {style: {width: \"100%\", minHeight: \"20px\"}, type: \"button\", className: \"ui-button filled brand small grow\"},\r\n                    BDV2.react.createElement(\r\n                        \"div\",\r\n                        {className: \"ui-button-contents\", onClick: self.connect},\r\n                        \"Reconnect\"\r\n                    )\r\n                )\r\n            )\r\n        );\r\n    }\r\n}","export default class BugHunterBadge extends React.Component {\r\n    render(){\r\n        const props = this.props\r\n\r\n        return (\r\n            <svg viewBox=\"0 0 31.3 29.5\" {...props.svg} height=\"100%\">\r\n                <path d=\"M22.8 1s12 8.2 7.4 19.7S16.6 29 20 25.6s-4-5.6-8.7-10L22.8 1\" fill=\"rgba(227,6,19,.6)\" />\r\n                <path d=\"M22.1 12.3c-2.5 3.2-6.1 4.8-8.9 4.3L3.6 28.8c-.7.9-1.9 1-2.8.3-.9-.7-1-1.9-.4-2.8L10 14.1c-1.3-2.5-.6-6.4 2-9.7 3.2-4 8-5.5 10.8-3.4s2.4 7.2-.7 11.3z\" fill=\"#e30613\" />\r\n            </svg>\r\n        )\r\n    } \r\n}","export default class Circus extends React.Component {\r\n    render(){\r\n        return (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 36 36\"  {...this.props.svg} height=\"100%\">\r\n                <path\r\n                    fill=\"#DD2E44\"\r\n                    d=\"M33 33a2 2 0 01-2 2H5a2 2 0 01-2-2l1-12h28l1 12z\"\r\n                ></path>\r\n                <path\r\n                    fill=\"#EA596E\"\r\n                    d=\"M13 35c-.792-1.875-1.75-3.291-3.417-4.666 1.75-1.459 4.542-5.5 5.25-8.292s2.75 8.125 2.042 10.625S13 35 13 35zm10.303 0c.791-1.875 1.75-3.291 3.416-4.666-1.75-1.459-4.541-5.5-5.25-8.292-.707-2.792-2.75 8.125-2.04 10.625.708 2.5 3.874 2.333 3.874 2.333z\"\r\n                ></path>\r\n                <path\r\n                    fill=\"#BE1931\"\r\n                    d=\"M3.728 24.263A2.5 2.5 0 008 22.5c0-.565-.195-1.081-.511-1.5H4l-.272 3.263zm28.544 0L32 21h-3.489A2.482 2.482 0 0028 22.5a2.5 2.5 0 004.272 1.763z\"\r\n                ></path>\r\n                <circle cx=\"14\" cy=\"23\" r=\"2\" fill=\"#BE1931\"></circle>\r\n                <circle cx=\"22\" cy=\"23\" r=\"2\" fill=\"#BE1931\"></circle>\r\n                <circle cx=\"10\" cy=\"23\" r=\"2\" fill=\"#BE1931\"></circle>\r\n                <circle cx=\"26\" cy=\"23\" r=\"2\" fill=\"#BE1931\"></circle>\r\n                <path d=\"M23 35H13s2-6 2-13h6c0 7 2 13 2 13zM17 2h2v7h-2z\"></path>\r\n                <path\r\n                    fill=\"#55ACEE\"\r\n                    d=\"M18.838.206C17.667.042 17 .318 17 1.418v1c0 1.1.865 1.753 1.923 1.451l5.154-.901c1.715-.343 1.548-1.593.085-1.884L18.838.206z\"\r\n                ></path>\r\n                <path\r\n                    fill=\"#CCD6DD\"\r\n                    d=\"M18 6l-.081.123C10.938 16.981 3 15.015 3 19v2.5a2.5 2.5 0 004.95.5H12a2 2 0 004 0h4a2 2 0 004 0h4.05a2.5 2.5 0 004.95-.5V19c0-4-8-2-15-13z\"\r\n                ></path>\r\n                <g fill=\"#F5F8FA\">\r\n                    <path d=\"M17.948 6.078l-.03.045C17.132 11.619 10.811 16.126 8 18v4a2 2 0 004 0v-4c.982-.982 5.813-6.787 5.984-11.732-.01-.064-.027-.126-.036-.19zm.08.398C18.324 11.374 23.031 17.031 24 18v4a2 2 0 004 0v-4c-2.75-1.833-8.953-6.19-9.972-11.524z\"></path>\r\n                    <path d=\"M17.984 6.27C17.922 8.346 17.606 16.394 16 18v4a2 2 0 004 0v-4c-1.564-1.564-1.905-9.241-1.979-11.559-.011-.057-.027-.113-.037-.171z\"></path>\r\n                </g>\r\n            </svg>\r\n        )\r\n    } \r\n}","import BugHunterBadge from \"../svg/bug_hunter\"\r\nimport nodeFetch from \"node-fetch\"\r\nimport { settingsCookie } from \"../0globals\";\r\nimport Circus from \"../svg/circus\";\r\n\r\nexport function uuidv4() { // Generate UUID (No crypto rng)\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n        return v.toString(16);\r\n    });\r\n}  \r\n\r\nconst awaitingBadgesPromises = {}\r\nlet badgesToFetch = []\r\n\r\nexport default new class DistantServer {\r\n    constructor(){\r\n        this._cache = {\r\n            badges: {\r\n\r\n            }\r\n        }\r\n        window.Lightcord.BetterDiscord.DistantServer = this\r\n    }\r\n\r\n    get cache(){\r\n        return this._cache\r\n    }\r\n\r\n    set cache(data){\r\n        if(typeof data !== \"object\" || typeof this._cache !== \"object\")return this._cache = data\r\n        return this._cache = Object.assign(this._cache, data)\r\n    }\r\n\r\n    /**\r\n     * Get custom badges from the user ID.\r\n     * @param {string} user The user ID \r\n     * @returns {Promise<Constants[\"badges\"]>}\r\n     */\r\n    async getBadges(user){\r\n        if(this.cache.badges[user])return this.cache.badges[user]\r\n        if(awaitingBadgesPromises[user])return awaitingBadgesPromises[user]\r\n\r\n        let resolve\r\n        const newPromise = new Promise((res) => (resolve = res))\r\n        awaitingBadgesPromises[user] = newPromise\r\n\r\n        const badges = []\r\n        for(let badge of Constants.badges){\r\n            if(badge.defaultUsers.includes(user))badges.push(badge)\r\n        }\r\n        const fetchedBadges = await new Promise((resolve) => {\r\n            if(!settingsCookie[\"lightcord-5\"])return resolve([])\r\n            badgesToFetch.push([user, resolve])\r\n            setTimeout(() => {\r\n                let users = badgesToFetch\r\n                if(users.length === 0)return\r\n                badgesToFetch = []\r\n                handleRequest(Routes.badges, \"POST\", JSON.stringify(users.map(e => e[0])))\r\n                .then(async res => {\r\n                    if(res.status !== 200){// Couldn't fetch badges: server error\r\n                        users.forEach(data => {\r\n                            data[1]([])// resolve no badge fetched\r\n                        })\r\n                    }\r\n                    const responseBody = await res.json()\r\n                    \r\n                    for(let user of responseBody){\r\n                        let promise = users.find(promise => promise[0] === user.user_id)\r\n                        promise[1](user.badges)\r\n                    }\r\n                }).catch((err) => {// Couldn't fetch badges: error\r\n                    if(!(err instanceof LightcordError))console.error(err)\r\n                    users.forEach(data => {\r\n                        data[1]([])// resolve no badge fetched\r\n                    })\r\n                })\r\n            }, 0)\r\n        })\r\n        for(let badge of fetchedBadges){\r\n            if(!Constants.badges.find(e => e.id === badge))continue // We do not have the Component, skip it.\r\n            if(badges.find(e => e.id === badge))continue // Already inserted.\r\n            badges.push(Constants.badges.find(e => e.id === badge))\r\n        }\r\n        this.cache = {\r\n            badges: Object.assign(this.cache.badges, {[user]: badges})\r\n        }\r\n        setTimeout(() => {\r\n            delete this.cache.badges[user]\r\n        }, 600000);\r\n\r\n        resolve(badges)\r\n        delete awaitingBadgesPromises[user]\r\n        return badges\r\n    }\r\n}\r\n\r\nconst handleRequest = function(route, method, data){\r\n    if(!settingsCookie[\"lightcord-5\"]){\r\n        return Promise.reject(new LightcordError(\"The current settings blocked the request.\"))\r\n    }\r\n    return nodeFetch(`${Constants.SERVER_URL}/api/v1${route}`, {\r\n        method,\r\n        headers: {\r\n            \"CLIENT\": \"Lightcord\",\r\n            \"Authorization\": window.Lightcord.Api.Authorization || \"None::Anonymous\"\r\n        },\r\n        ...(data ? {\r\n            body: data\r\n        } : {})\r\n    })\r\n}\r\n\r\nclass LightcordError extends Error {\r\n    constructor(){\r\n        super(...arguments)\r\n        this.name = \"LightcordError\"\r\n    }\r\n}\r\n\r\nexport const Constants = {\r\n    SERVER_URL: \"https://lightcord.deroku.xyz\",\r\n    badges: [ // TODO: Add more badges + server side svg\r\n        {\r\n            name: \"Lightcord Bug Hunter\",\r\n            id: \"f04698f5-816b-41e3-bd01-92291193d7a5\",\r\n            defaultUsers: [\r\n                \"696481194443014174\",\r\n                \"696003456611385396\"\r\n            ],\r\n            scopes: [],\r\n            component: BugHunterBadge,\r\n            href: \"https://github.com/lightcord/lightcord/wiki/badges#bug_hunter\"\r\n        }, {\r\n            name: \"Buffoon\",\r\n            id: \"06904d31-65b4-41ec-a50c-8658bbd1af96\",\r\n            defaultUsers: [\r\n                \"389016895543705602\",\r\n                \"664600134528663565\",\r\n                \"625350657829896224\"\r\n            ],\r\n            scopes: [],\r\n            component: Circus,\r\n            href: \"https://youtu.be/EJtb6z-dlT8?t=145\"\r\n        }\r\n    ]\r\n}\r\n\r\nexport const Routes = {\r\n    badges: `/users/badges`\r\n}","import Utils from \"./utils\";\r\nimport v2 from \"./v2\";\r\nimport { uuidv4 } from \"./distant\";\r\nimport { timingSafeEqual } from \"crypto\";\r\n\r\nexport default new class Layers {\r\n    constructor(){\r\n        this.layers = []\r\n        window.Lightcord.BetterDiscord.Layers = this\r\n    }\r\n\r\n    get isInjected(){\r\n        return !!document.querySelector(\"div.Layers.injected\")\r\n    }\r\n\r\n    inject(){\r\n        if(this.isInjected)return\r\n        let [\r\n            classNameLayers\r\n        ] = [\r\n            Utils.removeDa(v2.WebpackModules.find(e => e.layers && e.layer).layers)\r\n        ]\r\n        const layers = document.querySelector(\".\"+classNameLayers);\r\n        if (!layers) return false;\r\n        const ReactInstance = Lightcord.Api.Utils.FindReact(layers, 1)\r\n        if(!ReactInstance)return layers\r\n        this.ReactInstance = ReactInstance\r\n        let render = ReactInstance.render\r\n        ReactInstance.render = () => {\r\n            let returnValue = render.call(ReactInstance)\r\n            let classList = returnValue.props.children[1].props.className.split(\" \")\r\n            classList.push(\"Layers\")\r\n            classList.push(\"injected\")\r\n            returnValue.props.children[1].props.className = classList.join(\" \")\r\n\r\n            this.layers.forEach(layer => {\r\n                returnValue.props.children[1].props.children.push(layer[1])\r\n            })\r\n\r\n            return returnValue\r\n        }\r\n        ReactInstance.forceUpdate()\r\n    }\r\n\r\n    createLayer(children, props = {}){\r\n        let id = uuidv4()\r\n        let layer = null\r\n        this.layers.push([id, <Layer {...props} getLayer={lay => {\r\n            layer = lay\r\n        }} key={id} id={id} remove={() => {\r\n            let index = this.layers.findIndex(e => e[0] === id)\r\n            if(index === -1)return\r\n            this.layers.splice(index, 1)\r\n            layer = null\r\n            if(this.ReactInstance)this.ReactInstance.forceUpdate()\r\n            this.inject()\r\n        }}>{children}</Layer>])\r\n        if(this.ReactInstance)this.ReactInstance.forceUpdate()\r\n        this.inject()\r\n        return {\r\n            remove: () => {\r\n                if(!layer){\r\n                    let index = this.layers.findIndex(e => e[0] === id)\r\n                    if(index === -1)return\r\n                    this.layers.splice(index, 1)\r\n                    layer = null\r\n                    if(this.ReactInstance)this.ReactInstance.forceUpdate()\r\n                    this.inject()\r\n                }else{\r\n                    layer.remove()\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\nlet LayerModules\r\nexport class Layer extends React.Component {\r\n    constructor(){\r\n        super(...arguments)\r\n        this.state = {\r\n            animation: new this.modules[0].default.Value(0)\r\n        } \r\n        this.props.getLayer(this)\r\n        this.keydown = this.keydown.bind(this)\r\n    }\r\n\r\n    keydown(e){\r\n        if (e.which === 27) {\r\n            this.remove()\r\n        }\r\n    }\r\n\r\n    get modules(){\r\n        return LayerModules || (LayerModules = [\r\n            v2.WebpackModules.find(e => e.default && e.default.Value && e.default.div)\r\n        ])\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        window.removeEventListener(\"keydown\", this.keydown)\r\n    }\r\n\r\n    componentDidMount(ev){\r\n        window.addEventListener(\"keydown\", this.keydown)\r\n    }\r\n\r\n    remove(){\r\n        this.props.remove()\r\n    }\r\n\r\n    componentWillEnter(ev){\r\n        this.modules[0].default.timing(this.state.animation, {\r\n            toValue: 1,\r\n            duration: 100\r\n        }).start(ev)\r\n    }\r\n\r\n    componentWillLeave(ev){\r\n        this.modules[0].default.timing(this.state.animation, {\r\n            toValue: 0,\r\n            duration: 100\r\n        }).start(ev)\r\n    }\r\n\r\n    render(){\r\n        let interpolation = this.state.animation.interpolate({\r\n            inputRange: [0, 1],\r\n            outputRange: [1.07, 1]\r\n        })\r\n        let style = {\r\n            opacity: this.state.animation,\r\n            transform: [{\r\n                scale: interpolation\r\n            }]\r\n        }\r\n        let Div = this.modules[0].default.div\r\n        return <Div className={[__SECRET_EMOTION__.css({\r\n            backgroundColor:\"var(--background-primary)\",\r\n            position: \"absolute\",\r\n            top: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            left: 0,\r\n            display: \"flex\",\r\n            overflow: \"hidden\",\r\n            WebkitBoxOrient: \"vertical\",\r\n            WebkitBoxDirection: \"normal\",\r\n            msFlexDirection: \"column\",\r\n            flexDirection: \"column\",\r\n            zIndex: 101\r\n        }),process.platform===\"win32\"?__SECRET_EMOTION__.css({\r\n            top: \"-22px\",\r\n            paddingTop: \"22px\"\r\n        }):null,...(this.props.className?this.props.className.split(\" \"):[])].filter(e=>e).join(\" \") || null} style={style}>\r\n            {this.props.children(() => {\r\n                this.remove()\r\n            })}\r\n        </Div>\r\n    }\r\n}\r\nLayer.defaultProps = {\r\n    id: null,\r\n    children: null\r\n}","import {settingsCookie} from \"../0globals\";\r\nimport BDV2 from \"./v2\";\r\nimport webpackModules from \"./webpackModules\";\r\nimport Utils from \"./utils\";\r\nimport DOM from \"./domtools\";\r\n\r\nimport V2C_PublicServers from \"../ui/publicservers/publicServers\";\r\nimport Layers from \"./Layers\";\r\n\r\nexport default new class V2_PublicServers {\r\n\r\n    constructor() {\r\n        this._appendButton = this._appendButton.bind(this);\r\n        window.Lightcord.BetterDiscord.V2_PublicServers = this\r\n    }\r\n\r\n    render() {\r\n        Layers.createLayer((close) => {\r\n            return BDV2.react.createElement(V2C_PublicServers, {rootId: \"pubslayerroot\", close})\r\n        })\r\n    }\r\n\r\n    get button() {\r\n        const btn = DOM.createElement(`<div id=\"bd-pub-li\" class=\"${BDV2.guildClasses.listItem}\">`);\r\n        if (!settingsCookie[\"bda-gs-1\"]) btn.style.display = \"none\";\r\n        const label = DOM.createElement(`<div id=\"bd-pub-button\" class=\"${\"wrapper-25eVIn \" + BDV2.guildClasses.circleButtonMask}\">public</div>`);\r\n        label.addEventListener(\"click\", () => {this.render();});\r\n        btn.append(label);\r\n        return btn;\r\n    }\r\n\r\n    _appendButton() {\r\n        let [\r\n            classNametutorialContainer\r\n        ] = [\r\n            Utils.removeDa(BDModules.get(e => e.downloadProgress && e.tutorialContainer)[0].tutorialContainer)\r\n        ]\r\n        if (DOM.query(\"#bd-pub-li\")) return;\r\n        const guilds = DOM.query(`div.${classNametutorialContainer} > div`);\r\n        DOM.after(guilds, this.button);\r\n    }\r\n\r\n    addButton() {\r\n        if (this.guildPatch) return;\r\n        const GuildList = webpackModules.find(m => m.default && m.default.displayName == \"NavigableGuilds\");\r\n        const GuildListOld = webpackModules.findByDisplayName(\"Guilds\");\r\n        if (!GuildList && !GuildListOld) Utils.warn(\"PublicServer\", \"Can't find GuildList component\");\r\n        this.guildPatch = Utils.monkeyPatch(GuildList ? GuildList : GuildListOld.prototype, GuildList ? \"default\" : \"render\", {after: this._appendButton});\r\n        this._appendButton();\r\n    }\r\n\r\n    removeButton() {\r\n        this.guildPatch();\r\n        delete this.guildPatch;\r\n        const button = DOM.query(\"#bd-pub-li\");\r\n        if (button) button.remove();\r\n    }\r\n};","import DOM from \"./domtools\";\r\n\r\nconst style = `\r\n    .container-2Rl01u {\r\n        display: none!important;\r\n    }\r\n\r\n    .chat-3bRxxu {\r\n        display: none!important;\r\n    }\r\n\r\n    .sidebar-2K8pFh {\r\n        flex-grow: 1!important;\r\n    }\r\n`;\r\n\r\nexport default new class VoiceMode {\r\n    start() {\r\n        DOM.addStyle(\"VoiceMode\", style);\r\n    }\r\n\r\n    stop() {\r\n        DOM.removeStyle(\"VoiceMode\");\r\n    }\r\n};","import WebpackModules from \"./webpackModules\";\r\n\r\nconst normalizedPrefix = \"da\";\r\nconst randClass = new RegExp(`^(?!${normalizedPrefix}-)((?:[A-Za-z]|[0-9]|-)+)-(?:[A-Za-z]|[0-9]|-|_){6}$`);\r\n\r\nexport default new class ClassNormalizer {\r\n    constructor(){\r\n        window.Lightcord.BetterDiscord.ClassNormalizer = this\r\n    }\r\n    stop() {\r\n        if (!this.hasPatched) return;\r\n        this.unpatchClassModules(WebpackModules.findAll(this.moduleFilter.bind(this)));\r\n        this.revertElement(document.querySelector(\"#app-mount\"));\r\n        this.hasPatched = false;\r\n    }\r\n\r\n    start() {\r\n        if (this.hasPatched) return;\r\n        this.patchClassModules(WebpackModules.findAll(this.moduleFilter.bind(this)));\r\n        this.normalizeElement(document.querySelector(\"#app-mount\"));\r\n        this.hasPatched = true;\r\n        this.patchDOMMethods();\r\n    }\r\n\r\n    patchClassModules(modules) {\r\n        for (const module of modules) {\r\n            this.patchClassModule(normalizedPrefix, module);\r\n        }\r\n    }\r\n\r\n    unpatchClassModules(modules) {\r\n        for (const module of modules) {\r\n            this.unpatchClassModule(normalizedPrefix, module);\r\n        }\r\n    }\r\n\r\n    shouldIgnore(value) {\r\n        if (!isNaN(value)) return true;\r\n        if (value.endsWith(\"px\") || value.endsWith(\"ch\") || value.endsWith(\"em\") || value.endsWith(\"ms\")) return true;\r\n        if (value.startsWith(\"layerContainer-\")) return true;\r\n        if (value.startsWith(\"#\") && (value.length == 7 || value.length == 4)) return true;\r\n        if (value.includes(\"calc(\") || value.includes(\"rgba\")) return true;\r\n        return false;\r\n    }\r\n\r\n    moduleFilter(module) {\r\n        if (typeof module !== \"object\" || Array.isArray(module)) return false;\r\n        if (module.__esModule) return false;\r\n        if (!Object.keys(module).length) return false;\r\n        for (const baseClassName in module) {\r\n            const value = module[baseClassName];\r\n            if (typeof value !== \"string\") return false;\r\n            if (this.shouldIgnore(value)) continue;\r\n            if (value.split(\"-\").length === 1) return false;\r\n            if (!randClass.test(value.split(\" \")[0])) return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    patchClassModule(componentName, classNames) {\r\n        for (const baseClassName in classNames) {\r\n            const value = classNames[baseClassName];\r\n            if (this.shouldIgnore(value)) continue;\r\n            const classList = value.split(\" \");\r\n            for (const normalClass of classList) {\r\n                const match = normalClass.match(randClass);\r\n                if (!match || !match.length || match.length < 2) continue; // Shouldn't ever happen since they passed the moduleFilter, but you never know\r\n                const camelCase = match[1].split(\"-\").map((s, i) => i ? s[0].toUpperCase() + s.slice(1) : s).join(\"\");\r\n                classNames[baseClassName] += ` ${componentName}-${camelCase}`;\r\n            }\r\n        }\r\n    }\r\n\r\n    unpatchClassModule(componentName, classNames) {\r\n        for (const baseClassName in classNames) {\r\n            const value = classNames[baseClassName];\r\n            if (this.shouldIgnore(value)) continue;\r\n            let newString = \"\";\r\n            const classList = value.split(\" \");\r\n            for (const normalClass of classList) {\r\n                if (normalClass.startsWith(`${componentName}-`)) continue;\r\n                newString += ` ${normalClass}`;\r\n            }\r\n            classNames[baseClassName] = newString.trim();\r\n        }\r\n    }\r\n\r\n    normalizeElement(element) {\r\n        if (!(element instanceof Element)) return;\r\n        const classes = element.classList;\r\n        for (let c = 0, clen = classes.length; c < clen; c++) {\r\n            if (!randClass.test(classes[c])) continue;\r\n            const match = classes[c].match(randClass)[1];\r\n            const newClass = match.split(\"-\").map((s, i) => i ? s[0].toUpperCase() + s.slice(1) : s).join(\"\");\r\n            element.classList.add(`${normalizedPrefix}-${newClass}`);\r\n        }\r\n        for (const child of element.children) this.normalizeElement(child);\r\n    }\r\n\r\n    revertElement(element) {\r\n        if (!(element instanceof Element)) return;\r\n        if (element.children && element.children.length) this.revertElement(element.children[0]);\r\n        if (element.nextElementSibling) this.revertElement(element.nextElementSibling);\r\n        const classes = element.classList;\r\n        const toRemove = [];\r\n        for (let c = 0; c < classes.length; c++) {\r\n            if (classes[c].startsWith(`${normalizedPrefix}-`)) toRemove.push(classes[c]);\r\n        }\r\n        element.classList.remove(...toRemove);\r\n    }\r\n\r\n    patchDOMMethods() {\r\n        const contains = DOMTokenList.prototype.contains;\r\n        DOMTokenList.prototype.contains = function(token) {\r\n            // const tokens = token.split(\" \");\r\n            return Reflect.apply(contains, this, [token.split(\" \")[0]]);\r\n            // return tokens.every(t => contains.call(this, t));\r\n        };\r\n\r\n        const add = DOMTokenList.prototype.add;\r\n        DOMTokenList.prototype.add = function(...tokens) {\r\n            for (let t = 0; t < tokens.length; t++) {\r\n                tokens[t] = tokens[t].split(\" \")[0];\r\n            }\r\n            return Reflect.apply(add, this, tokens);\r\n        };\r\n\r\n        const remove = DOMTokenList.prototype.remove;\r\n        DOMTokenList.prototype.remove = function(...tokens) {\r\n            for (let t = 0; t < tokens.length; t++) {\r\n                tokens[t] = tokens[t].split(\" \")[0];\r\n            }\r\n            return Reflect.apply(remove, this, tokens);\r\n        };\r\n    }\r\n\r\n};","import {settingsCookie} from \"../0globals\";\r\nimport BDV2 from \"./v2\";\r\nimport DOM from \"./domtools\";\r\nimport Utils from \"./utils\";\r\n\r\nexport default new class DevMode {\r\n    constructor() {\r\n        this.debugListener = this.debugListener.bind(this);\r\n        this.copySelectorListener = this.copySelectorListener.bind(this);\r\n    }\r\n\r\n    start() {\r\n        this.startDebugListener();\r\n        if (settingsCookie[\"fork-dm-1\"]) this.startCopySelector();\r\n    }\r\n    \r\n    stop() {\r\n        this.stopDebugListener();\r\n        this.stopCopySelector();\r\n    }\r\n\r\n    startDebugListener() {\r\n        this.stopDebugListener();\r\n        document.addEventListener(\"keydown\", this.debugListener);\r\n    }\r\n\r\n    stopDebugListener() {\r\n        document.removeEventListener(\"keydown\", this.debugListener);\r\n    }\r\n\r\n    startCopySelector() {\r\n        this.stopCopySelector();\r\n        document.addEventListener(\"contextmenu\", this.copySelectorListener);\r\n    }\r\n\r\n    stopCopySelector() {\r\n        document.removeEventListener(\"contextmenu\", this.copySelectorListener);\r\n    }\r\n\r\n    debugListener(e) {\r\n        if (e.which === 119 || e.which == 118) {//F8\r\n            console.log(\"%c[%cDevMode%c] %cBreak/Resume\", \"color: red;\", \"color: #303030; font-weight:700;\", \"color:red;\", \"\");\r\n            debugger; // eslint-disable-line no-debugger\r\n            e.preventDefault();\r\n            e.stopImmediatePropagation();\r\n         }\r\n    }\r\n\r\n    copySelectorListener(e) {\r\n        try{\r\n            e.stopPropagation();\r\n            const selector = this.getSelector(e.target);\r\n    \r\n            let [\r\n                classLayer, \r\n                classItems\r\n            ] = [\r\n                BDModules.get((e) => e.layer && typeof e.layer === \"string\" && e.disabledPointerEvents)[0],\r\n                BDModules.get((e) => e.menu)[0]\r\n            ]\r\n            \r\n            function attach() {\r\n                if(!classItems || !classLayer.layer)return console.log(classItems, classLayer.layer)\r\n\r\n                let cm = DOM.query(\".\"+Utils.removeDa(classItems.menu));\r\n                if (!cm) {\r\n                    const container = DOM.query(\"#app-mount > .\"+Utils.removeDa(classLayer.layerContainer));\r\n                    const cmWrap = DOM.createElement(`<div class=\"${classLayer.layer}\">`);\r\n                    cm = DOM.createElement(`<div class=\"${classItems.menu} ${classItems.styleFlexible} ${classItems.accommodateScrollbar} bd-context-menu\" style=\"\"></div>`);\r\n                    cmWrap.append(cm);\r\n                    container.append(cmWrap);\r\n                    cmWrap.style.top = e.clientY + \"px\";\r\n                    cmWrap.style.left = e.clientX + \"px\";\r\n                    cmWrap.setAttribute(\"role\", \"menu\")\r\n                    cmWrap.setAttribute(\"tabindex\", \"-1\")\r\n                    cmWrap.id = \"bd-copy-selector-context\"\r\n                    cmWrap.setAttribute(\"aria-label\", \"Copy Selector Actions\")\r\n\r\n                    const scrollerClasses = BDModules.get((e) => e.scrollerWrap)[0]\r\n                    const scrollerWrap = DOM.createElement(`<div class=\"${scrollerClasses.scrollerWrap} ${scrollerClasses.scrollerThemed} ${scrollerClasses.themeGhostHairline}\"></div>`)\r\n                    const scroller = DOM.createElement(`<div class=\"${BDModules.get(e => e.scroller)[0].scroller} ${classItems.scroller}\"></div>`)\r\n                    scrollerWrap.append(scroller)\r\n                    cm.append(scrollerWrap)\r\n\r\n                    const removeCM = function(e) {\r\n                        if (e.keyCode && e.keyCode !== 27) return;\r\n                        cmWrap.remove();\r\n                        document.removeEventListener(\"click\", removeCM);\r\n                        document.removeEventListener(\"contextmenu\", removeCM);\r\n                        document.removeEventListener(\"keyup\", removeCM);\r\n                    };\r\n                    document.addEventListener(\"click\", removeCM);\r\n                    document.addEventListener(\"contextmenu\", removeCM);\r\n                    document.addEventListener(\"keyup\", removeCM);\r\n                }\r\n                const cmWrap = cm.parentElement\r\n                \r\n                const scroller = cm.childNodes[0].childNodes[0]\r\n                const cmg = DOM.createElement(`<div role=\"group\"></div>`);\r\n                /**\r\n                 * @type {HTMLElement}\r\n                 */\r\n                const cmi = DOM.createElement(`<div class=\"${classItems.item} ${classItems.labelContainer} ${classItems.colorDefault}\" role=\"menuitem\" id=\"bd-copy-selector-item-cm\"></div>`);\r\n                cmi.append(DOM.createElement(`<div class=\"${classItems.label}\">Copy Selector</div>`));\r\n                cmi.addEventListener(\"click\", () => {\r\n                    BDV2.NativeModule.copy(selector);\r\n                    cmWrap.style.display = \"none\"\r\n                });\r\n                cmi.addEventListener(\"mouseover\", (e) => {\r\n                    let elements = DOM.queryAll(\"div[role=menuitem].\"+Utils.removeDa(classItems.focused))\r\n                    elements && elements.forEach(elem => elem.classList.remove(classItems.focused))\r\n                    cmi.classList.add(classItems.focused)\r\n                })\r\n                cmi.addEventListener(\"mouseout\", (e) => {\r\n                    cmi.classList.remove(classItems.focused)\r\n                })\r\n                cmg.append(cmi);\r\n                if(scroller.childNodes.length){ // apend a separator\r\n                    const separator = DOM.createElement(`<div role=\"separator\" class=\"${classItems.separator}\"></div>`)\r\n                    scroller.append(separator)\r\n                }\r\n                scroller.append(cmg);\r\n                if(cmWrap.clientHeight < cmWrap.scrollHeight){\r\n                    console.log(\"overflowing \"+cmWrap.style.top)\r\n                    cmWrap.style.top = (cmWrap.style.top - cmg.clientHeight) + \"px\";\r\n                    console.log(\"overflowing\"+cmWrap.style.top)\r\n                }\r\n            }\r\n    \r\n            setTimeout(attach, 1);\r\n        }catch(e){\r\n            console.error(e)\r\n        }\r\n    }\r\n\r\n    getSelector(element) {\r\n        if (element.id) return `#${element.id}`;\r\n        /**\r\n         * \r\n         * @param {HTMLElement} el \r\n         */\r\n        function fullPath(el){\r\n            var names = [];\r\n            while (el.parentNode){\r\n              if (el.id){\r\n                names.unshift('#'+el.id);\r\n                break;\r\n              }else{\r\n                if (el==el.ownerDocument.documentElement) names.unshift(el.tagName.toLowerCase()+Array.from(el.classList.entries()).map(e => \".\"+e).join(\"\"));\r\n                else{\r\n                  for (var c=1,e=el;e.previousElementSibling;e=e.previousElementSibling,c++);\r\n                  names.unshift(el.tagName.toLowerCase()+((typeof el.className === \"string\" && el.className) || \"\").split(\" \").filter(e => !!e).map(e => \".\"+e).join(\"\")+\":nth-child(\"+c+\")\");\r\n                }\r\n                el=el.parentNode;\r\n              }\r\n            }\r\n            return names.join(\" > \");\r\n        }\r\n        return fullPath(element)\r\n    }\r\n};","import BDV2 from \"../../modules/v2\";\r\n\r\nconst React = BDV2.React;\r\n\r\nexport default class Switch extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {checked: this.props.checked};\r\n        this.onChange = this.onChange.bind(this);\r\n        this.switch = <Lightcord.Api.Components.inputs.Switch onChange={this.onChange} value={this.state.checked} />\r\n    }\r\n\r\n    onChange(value) {\r\n        if (this.props.disabled) return;\r\n        this.props.onChange(value);\r\n        this.setState({checked: value});\r\n    }\r\n\r\n    render() {\r\n        return this.switch\r\n    }\r\n}","import BDV2 from \"../modules/v2\";\r\nimport Switch from \"./components/switch\";\r\n\r\nlet classnames = []\r\nfunction getClassName(name){\r\n    let className = classnames.find(e => e.startsWith(name+\"-\"))\r\n    if(className)return className\r\n    className = BDModules.get(e => e[name])[0][name]\r\n    classnames.push(className)\r\n    return className\r\n}\r\n\r\nexport default class SwitchItem extends BDV2.reactComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.onChange = this.onChange.bind(this);\r\n    }\r\n\r\n    onChange() {\r\n        this.props.checked = !this.props.checked;\r\n        this.props.onChange(this.props.id, this.props.checked);\r\n    }\r\n\r\n    render() {\r\n        let {text, info} = this.props.data;\r\n        if(!classnames.find(e => e.startsWith(\"beta-\"))){\r\n            classnames.push(BDModules.get(e => e.beta && (!e.container && !e.userSettingsVoice))[0].beta)\r\n        }\r\n        if(this.props.data.experimental){\r\n            info = [\r\n                info,\r\n                React.createElement(\"sup\", {className: getClassName(\"beta\")}, \"(EXPERIMENTAL)\")\r\n            ]\r\n        }\r\n        return BDV2.react.createElement(\"div\", {className: \"ui-flex flex-vertical flex-justify-start flex-align-stretch flex-nowrap ui-switch-item\"},\r\n            BDV2.react.createElement(\"div\", {className: \"ui-flex flex-horizontal flex-justify-start flex-align-stretch flex-nowrap\"},\r\n                BDV2.react.createElement(\"h3\", {key: \"title\", className: \"ui-form-title h3 margin-reset margin-reset ui-flex-child\"}, text),\r\n                BDV2.react.createElement(Switch, {key: \"switch\", onChange: this.onChange, checked: this.props.checked})\r\n            ),\r\n            BDV2.react.createElement(\"div\", {className: \"ui-form-text style-description margin-top-4\", style: {flex: \"1 1 auto\"}}, info)\r\n        );\r\n    }\r\n}","let marginModule = BDModules.get(e => e.marginTop60)[0]\r\n\r\nexport default class MarginTop extends React.Component {\r\n    render(){\r\n        if(!marginModule)marginModule = BDModules.get(e => e.marginTop60)[0]\r\n        return <div className={marginModule.marginTop60}></div>\r\n    }\r\n}","import {settingsCookie} from \"../0globals\";\r\nimport BDV2 from \"../modules/v2\";\r\n\r\nimport SettingsTitle from \"./settingsTitle\";\r\nimport Switch from \"./switch\";\r\nimport MarginTop from \"./margintop\";\r\n\r\nlet formModule\r\nlet switchItem\r\nlet betaClassNames\r\nexport default class V2C_SettingsGroup extends BDV2.reactComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            error: false\r\n        }\r\n    }\r\n\r\n    renderOldSettings() {\r\n        const {title, settings, button} = this.props;\r\n        const buttonComponent = button ? BDV2.react.createElement(\"button\", {key: \"title-button\", className: \"bd-pfbtn\", onClick: button.onClick}, button.title) : null;\r\n        return [BDV2.react.createElement(SettingsTitle, {text: title}),\r\n                buttonComponent,\r\n                settings.map(setting => {\r\n                    return BDV2.react.createElement(Switch, {id: setting.id, key: setting.id, data: setting, checked: settingsCookie[setting.id], onChange: (id, checked) => {\r\n                        this.props.onChange(id, checked);\r\n                    }});\r\n                })];\r\n    }\r\n\r\n    componentDidCatch(err, errInfo){\r\n        console.log(err, errInfo)\r\n        this.setState({\r\n            error: true\r\n        })\r\n    }\r\n\r\n    render(){\r\n        if(this.state.error){\r\n            try{\r\n                return this.renderOldSettings()\r\n            }catch(e){\r\n                console.error(e)\r\n                return null\r\n            }\r\n        }else{\r\n            try{\r\n                if(!formModule)formModule = BDV2.WebpackModules.find(e => e.FormSection)\r\n                if(!switchItem)switchItem = BDV2.WebpackModules.find(e => e.default && e.default.displayName === \"SwitchItem\")\r\n                if(!betaClassNames)betaClassNames = BDV2.WebpackModules.find(e => e.beta && (!e.container && !e.userSettingsVoice))\r\n                \r\n                let children = []\r\n                if(this.props.description){\r\n                    children.push(<formModule.FormText type=\"description\" selectable={false}>\r\n                        {this.props.description}\r\n                    </formModule.FormText>, <MarginTop></MarginTop>)\r\n                }\r\n                children.push(...this.props.settings.map(setting => {\r\n                    let info = [\r\n                        setting.text\r\n                    ]\r\n                    if(setting.experimental){\r\n                        info.push(<sup className={betaClassNames.beta}>(EXPERIMENTAL)</sup>)\r\n                    }\r\n                    return <switchItem.default onChange={(ev) => {\r\n                        this.props.onChange(setting.id, ev.target.checked);\r\n                        this.forceUpdate()\r\n                    }} key={setting.id} value={settingsCookie[setting.id]} className={__SECRET_EMOTION__.css({\r\n                        marginBottom: \"20px\"\r\n                    })} disabled={false} hideBorder={false}\r\n                        size={switchItem.default.Sizes.DEFAULT} theme={switchItem.default.Themes.DEFAULT} note={setting.info}>\r\n                        {info}\r\n                    </switchItem.default>\r\n                }))\r\n                return <formModule.FormSection tag=\"h2\" title={this.props.title}>\r\n                    {children}\r\n                </formModule.FormSection>\r\n            }catch(e){\r\n                console.error(e)\r\n                setImmediate(()=>{\r\n                    this.setState({\r\n                        error: true\r\n                    })\r\n                })\r\n                return null\r\n            }\r\n        }\r\n    }\r\n}","import BDV2 from \"../modules/v2\";\r\n\r\nimport SettingsGroup from \"./settingsGroup\";\r\nimport MarginTop from \"./margintop\";\r\n\r\nexport default class V2C_SectionedSettingsPanel extends BDV2.reactComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        return this.props.sections.map((section, i) => {\r\n            return [\r\n                i !== 0 ? BDV2.react.createElement(MarginTop, {}) : null,\r\n                BDV2.react.createElement(SettingsGroup, Object.assign({}, section, {onChange: this.props.onChange}))\r\n            ]\r\n        })\r\n    }\r\n}","import BDV2 from \"../modules/v2\";\r\n\r\nexport default class V2C_Checkbox extends BDV2.reactComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.onClick = this.onClick.bind(this);\r\n        this.setInitialState();\r\n    }\r\n\r\n    setInitialState() {\r\n        this.state = {\r\n            checked: this.props.checked || false\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return BDV2.react.createElement(\r\n            \"li\",\r\n            null,\r\n            BDV2.react.createElement(\r\n                \"div\",\r\n                {className: \"checkbox \"+BDModules.get(e => e.checkboxElement)[0].checkbox, onClick: this.onClick},\r\n                BDV2.react.createElement(\r\n                    \"div\",\r\n                    {className: \"checkbox-inner \"+BDModules.get(e => e.checkboxInner)[0].checkboxInner},\r\n                    BDV2.react.createElement(\"input\", {className: BDModules.get(e => e.checkboxElement)[0].checkboxElement, checked: this.state.checked, onChange: () => {}, type: \"checkbox\"}),\r\n                    BDV2.react.createElement(\"span\", null)\r\n                ),\r\n                BDV2.react.createElement(\r\n                    \"span\",\r\n                    null,\r\n                    this.props.text\r\n                )\r\n            )\r\n        );\r\n    }\r\n\r\n    onClick() {\r\n        this.props.onChange(this.props.id, !this.state.checked);\r\n        this.setState({\r\n            checked: !this.state.checked\r\n        });\r\n    }\r\n}","import {settingsCookie} from \"../0globals\";\r\nimport Settings from \"../modules/settingsPanel\";\r\nimport BDV2 from \"../modules/v2\";\r\nimport DataStore from \"../modules/dataStore\";\r\nimport DOM from \"../modules/domtools\";\r\nimport Utils from \"../modules/utils\"\r\n\r\nimport Checkbox from \"./checkbox\";\r\n\r\nexport default class V2C_CssEditorDetached extends BDV2.reactComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        const self = this;\r\n        self.onClick = self.onClick.bind(self);\r\n        self.updateCss = self.updateCss.bind(self);\r\n        self.saveCss = self.saveCss.bind(self);\r\n        self.onChange = self.onChange.bind(self);\r\n    }\r\n\r\n    componentDidMount() {\r\n        DOM.addClass(DOM.query(\"#app-mount\"), \"bd-detached-editor\");\r\n        BDV2.editorDetached = true;\r\n        // this.updateLineCount();\r\n        this.editor = ace.edit(\"bd-customcss-editor-detached\");\r\n        this.editor.setTheme(\"ace/theme/discord\");\r\n        this.editor.session.setMode(\"ace/mode/css\");\r\n        this.editor.setShowPrintMargin(false);\r\n        this.editor.setFontSize(14);\r\n        this.editor.on(\"change\", () => {\r\n            if (!settingsCookie[\"bda-css-0\"]) return;\r\n            this.saveCss();\r\n            this.updateCss();\r\n        });\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        DOM.removeClass(DOM.query(\"#app-mount\"), \"bd-detached-editor\");\r\n        BDV2.editorDetached = false;\r\n        this.editor.destroy();\r\n    }\r\n\r\n    updateLineCount() {\r\n        const lineCount = this.refs.editor.value.split(\"\\n\").length;\r\n        if (lineCount == this.props.lines) return;\r\n        this.refs.lines.textContent = Array.from(new Array(lineCount), (_, i) => i + 1).join(\".\\n\") + \".\";\r\n        this.props.lines = lineCount;\r\n    }\r\n\r\n    get options() {\r\n        return {\r\n            lineNumbers: true,\r\n            mode: \"css\",\r\n            indentUnit: 4,\r\n            theme: \"material\",\r\n            scrollbarStyle: \"simple\"\r\n        };\r\n    }\r\n\r\n    get css() {\r\n        const _ccss = DataStore.getBDData(\"bdcustomcss\");\r\n        let ccss = \"\";\r\n        if (_ccss && _ccss !== \"\") {\r\n            ccss = Buffer.from(_ccss, \"base64\").toString(\"utf8\");\r\n        }\r\n        return ccss;\r\n    }\r\n\r\n    get root() {\r\n        const _root = DOM.query(\"#bd-customcss-detach-container\");\r\n        if (!_root) {\r\n            if (!this.injectRoot()) return null;\r\n            return this.detachedRoot;\r\n        }\r\n        return _root;\r\n    }\r\n\r\n    injectRoot() {\r\n        const app = DOM.query(\".app, .\"+Utils.removeDa(BDModules.get(e => e.app && e.layers)[0].app));\r\n        if (!app) return false;\r\n        DOM.insertAfter(DOM.createElement(`<div id=\"bd-customcss-detach-container\">`), app);\r\n        return true;\r\n    }\r\n\r\n    render() {\r\n        const self = this;\r\n        return BDV2.react.createElement(\r\n            \"div\",\r\n            {className: \"bd-detached-css-editor\", id: \"bd-customcss-detach-editor\"},\r\n            BDV2.react.createElement(\r\n                \"div\",\r\n                {id: \"bd-customcss-innerpane\"},\r\n                BDV2.react.createElement(\"div\", {className: \"editor-wrapper\"},\r\n                    BDV2.react.createElement(\"div\", {id: \"bd-customcss-editor-detached\", className: \"editor\", ref: \"editor\"}, self.css)\r\n                ),\r\n                BDV2.react.createElement(\r\n                    \"div\",\r\n                    {id: \"bd-customcss-attach-controls\"},\r\n                    BDV2.react.createElement(\r\n                        \"ul\",\r\n                        {className: \"checkbox-group\"},\r\n                        BDV2.react.createElement(Checkbox, {id: \"live-update\", text: \"Live Update\", onChange: self.onChange, checked: settingsCookie[\"bda-css-0\"]})\r\n                    ),\r\n                    BDV2.react.createElement(\r\n                        \"div\",\r\n                        {id: \"bd-customcss-detach-controls-button\"},\r\n                        BDV2.react.createElement(\r\n                            \"button\",\r\n                            {style: {borderRadius: \"3px 0 0 3px\", borderRight: \"1px solid #3f4146\"}, className: \"btn btn-primary\", onClick: () => {\r\n                                    self.onClick(\"update\");\r\n                                }},\r\n                            \"Update\"\r\n                        ),\r\n                        BDV2.react.createElement(\r\n                            \"button\",\r\n                            {style: {borderRadius: \"0\", borderLeft: \"1px solid #2d2d2d\", borderRight: \"1px solid #2d2d2d\"}, className: \"btn btn-primary\", onClick: () => {\r\n                                    self.onClick(\"save\");\r\n                                }},\r\n                            \"Save\"\r\n                        ),\r\n                        BDV2.react.createElement(\r\n                            \"button\",\r\n                            {style: {borderRadius: \"0 3px 3px 0\", borderLeft: \"1px solid #3f4146\"}, className: \"btn btn-primary\", onClick: () => {\r\n                                    self.onClick(\"attach\");\r\n                                }},\r\n                            \"Attach\"\r\n                        ),\r\n                        BDV2.react.createElement(\r\n                            \"span\",\r\n                            {style: {fontSize: \"10px\", marginLeft: \"5px\"}},\r\n                            \"Unsaved changes are lost on attach\"\r\n                        )\r\n                    )\r\n                )\r\n            )\r\n        );\r\n    }\r\n\r\n    onChange(id, checked) {\r\n        switch (id) {\r\n            case \"live-update\":\r\n                settingsCookie[\"bda-css-0\"] = checked;\r\n                Settings.saveSettings();\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClick(id) {\r\n        const self = this;\r\n        switch (id) {\r\n            case \"attach\":\r\n                if (DOM.query(\"#editor-detached\")) self.props.attach();\r\n                BDV2.reactDom.unmountComponentAtNode(self.root);\r\n                self.root.remove();\r\n                break;\r\n            case \"update\":\r\n                self.updateCss();\r\n                break;\r\n            case \"save\":\r\n                self.saveCss();\r\n                break;\r\n        }\r\n    }\r\n\r\n    updateCss() {\r\n        DOM.removeStyle(\"customcss\");\r\n        DOM.addStyle(\"customcss\", this.editor.session.getValue());\r\n    }\r\n\r\n    saveCss() {\r\n        DataStore.setBDData(\"bdcustomcss\", Buffer.from(this.editor.session.getValue(), \"utf-8\").toString(\"base64\"));\r\n    }\r\n}","import {settingsCookie} from \"../0globals\";\r\nimport Settings from \"../modules/settingsPanel\";\r\nimport BDV2 from \"../modules/v2\";\r\nimport DataStore from \"../modules/dataStore\";\r\nimport DOM from \"../modules/domtools\";\r\nimport Utils from \"../modules/utils\"\r\n\r\nimport SettingsTitle from \"./settingsTitle\";\r\nimport Checkbox from \"./checkbox\";\r\nimport V2C_CssEditorDetached from \"./cssEditorDetached\";\r\n\r\nexport default class V2C_CssEditor extends BDV2.reactComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        const self = this;\r\n        self.props.lines = 0;\r\n        self.setInitialState();\r\n        self.attach = self.attach.bind(self);\r\n        self.detachedEditor = BDV2.react.createElement(V2C_CssEditorDetached, {attach: self.attach});\r\n        self.onClick = self.onClick.bind(self);\r\n        self.updateCss = self.updateCss.bind(self);\r\n        self.saveCss = self.saveCss.bind(self);\r\n        self.detach = self.detach.bind(self);\r\n    }\r\n\r\n    setInitialState() {\r\n        this.state = {\r\n            detached: this.props.detached || BDV2.editorDetached\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        // this.updateLineCount();\r\n        this.editor = ace.edit(\"bd-customcss-editor\");\r\n        this.editor.setTheme(\"ace/theme/discord\");\r\n        this.editor.session.setMode(\"ace/mode/css\");\r\n        this.editor.setShowPrintMargin(false);\r\n        this.editor.setFontSize(14);\r\n        this.editor.on(\"change\", () => {\r\n            if (!settingsCookie[\"bda-css-0\"]) return;\r\n            this.saveCss();\r\n            this.updateCss();\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.editor.destroy();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        const self = this;\r\n        if (prevState.detached && !self.state.detached) {\r\n            BDV2.reactDom.unmountComponentAtNode(self.detachedRoot);\r\n        }\r\n    }\r\n\r\n    codeMirror() {\r\n    }\r\n\r\n    get options() {\r\n        return {\r\n            lineNumbers: true,\r\n            mode: \"css\",\r\n            indentUnit: 4,\r\n            theme: \"material\",\r\n            scrollbarStyle: \"simple\"\r\n        };\r\n    }\r\n\r\n    get css() {\r\n        const _ccss = DataStore.getBDData(\"bdcustomcss\");\r\n        let ccss = \"\";\r\n        if (_ccss && _ccss !== \"\") {\r\n            ccss = Buffer.from(_ccss, \"base64\").toString(\"utf8\");\r\n        }\r\n        return ccss;\r\n    }\r\n\r\n    updateLineCount() {\r\n        const lineCount = this.refs.editor.value.split(\"\\n\").length;\r\n        if (lineCount == this.props.lines) return;\r\n        this.refs.lines.textContent = Array.from(new Array(lineCount), (_, i) => i + 1).join(\".\\n\") + \".\";\r\n        this.props.lines = lineCount;\r\n    }\r\n\r\n    render() {\r\n        const self = this;\r\n\r\n        const {detached} = self.state;\r\n        return [\r\n            detached && BDV2.react.createElement(\r\n                \"div\",\r\n                {id: \"editor-detached\"},\r\n                BDV2.react.createElement(SettingsTitle, {text: \"Custom CSS Editor\"}),\r\n                BDV2.react.createElement(\r\n                    \"h3\",\r\n                    null,\r\n                    \"Editor Detached\"\r\n                ),\r\n                BDV2.react.createElement(\r\n                    \"button\",\r\n                    {className: \"btn btn-primary\", onClick: () => {\r\n                            self.attach();\r\n                        }},\r\n                    \"Attach\"\r\n                )\r\n            ),\r\n            !detached && BDV2.react.createElement(\r\n                \"div\",\r\n                null,\r\n                BDV2.react.createElement(SettingsTitle, {text: \"Custom CSS Editor\"}),\r\n                BDV2.react.createElement(\"div\", {className: \"editor-wrapper\"},\r\n                    BDV2.react.createElement(\"div\", {id: \"bd-customcss-editor\", className: \"editor\", ref: \"editor\"}, self.css)\r\n                ),\r\n                BDV2.react.createElement(\r\n                    \"div\",\r\n                    {id: \"bd-customcss-attach-controls\"},\r\n                    BDV2.react.createElement(\r\n                        \"ul\",\r\n                        {className: \"checkbox-group\"},\r\n                        BDV2.react.createElement(Checkbox, {id: \"live-update\", text: \"Live Update\", onChange: this.onChange, checked: settingsCookie[\"bda-css-0\"]})\r\n                    ),\r\n                    BDV2.react.createElement(\r\n                        \"div\",\r\n                        {id: \"bd-customcss-detach-controls-button\"},\r\n                        BDV2.react.createElement(\r\n                            \"button\",\r\n                            {style: {borderRadius: \"3px 0 0 3px\", borderRight: \"1px solid #3f4146\"}, className: \"btn btn-primary\", onClick: () => {\r\n                                    self.onClick(\"update\");\r\n                                }},\r\n                            \"Update\"\r\n                        ),\r\n                        BDV2.react.createElement(\r\n                            \"button\",\r\n                            {style: {borderRadius: \"0\", borderLeft: \"1px solid #2d2d2d\", borderRight: \"1px solid #2d2d2d\"}, className: \"btn btn-primary\", onClick: () => {\r\n                                    self.onClick(\"save\");\r\n                                }},\r\n                            \"Save\"\r\n                        ),\r\n                        BDV2.react.createElement(\r\n                            \"button\",\r\n                            {style: {borderRadius: \"0 3px 3px 0\", borderLeft: \"1px solid #3f4146\"}, className: \"btn btn-primary\", onClick: () => {\r\n                                    self.onClick(\"detach\");\r\n                                }},\r\n                            \"Detach\"\r\n                        ),\r\n                        BDV2.react.createElement(\r\n                            \"span\",\r\n                            {style: {fontSize: \"10px\", marginLeft: \"5px\"}},\r\n                            \"Unsaved changes are lost on detach\"\r\n                        ),\r\n                        BDV2.react.createElement(\"div\", {className: \"help-text\"},\r\n                            \"Press \",\r\n                            BDV2.react.createElement(\"code\", {className: \"inline\"}, \"ctrl\"),\r\n                            \"+\",\r\n                            BDV2.react.createElement(\"span\", {className: \"inline\"}, \",\"),\r\n                            \" with the editor focused to access the editor's settings.\"\r\n                        )\r\n                    )\r\n                )\r\n            )\r\n        ]\r\n    }\r\n\r\n    onClick(arg) {\r\n        const self = this;\r\n        switch (arg) {\r\n            case \"update\":\r\n                self.updateCss();\r\n                break;\r\n            case \"save\":\r\n                self.saveCss();\r\n                break;\r\n            case \"detach\":\r\n                self.detach();\r\n                break;\r\n        }\r\n    }\r\n\r\n    onChange(id, checked) {\r\n        switch (id) {\r\n            case \"live-update\":\r\n                settingsCookie[\"bda-css-0\"] = checked;\r\n                Settings.saveSettings();\r\n                break;\r\n        }\r\n    }\r\n\r\n    updateCss() {\r\n        DOM.removeStyle(\"customcss\");\r\n        DOM.addStyle(\"customcss\", this.editor.session.getValue());\r\n    }\r\n\r\n    saveCss() {\r\n        DataStore.setBDData(\"bdcustomcss\", Buffer.from(this.editor.session.getValue(), \"utf-8\").toString(\"base64\"));\r\n    }\r\n\r\n    detach() {\r\n        const self = this;\r\n        self.setState({\r\n            detached: true\r\n        });\r\n        const droot = self.detachedRoot;\r\n        if (!droot) {\r\n            console.log(\"FAILED TO INJECT ROOT: .app\");\r\n            return;\r\n        }\r\n        BDV2.reactDom.render(self.detachedEditor, droot);\r\n    }\r\n\r\n    get detachedRoot() {\r\n        const _root = DOM.query(\"#bd-customcss-detach-container\");\r\n        if (!_root) {\r\n            if (!this.injectDetachedRoot()) return null;\r\n            return this.detachedRoot;\r\n        }\r\n        return _root;\r\n    }\r\n\r\n    injectDetachedRoot() {\r\n        const app = DOM.query(\".app, .\"+Utils.removeDa(BDModules.get(e => e.app && e.layers)[0].app));\r\n        if (!app) return false;\r\n        DOM.insertAfter(DOM.createElement(`<div id=\"bd-customcss-detach-container\">`), app);\r\n        return true;\r\n    }\r\n\r\n    attach() {\r\n        const self = this;\r\n        self.setState({\r\n            detached: false\r\n        });\r\n    }\r\n}","import BDV2 from \"../modules/v2\";\r\n\r\nexport default class BDErrorBoundary extends BDV2.reactComponent {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {hasError: false};\r\n    }\r\n\r\n    componentDidCatch() {\r\n      this.setState({hasError: true});\r\n    }\r\n\r\n    render() {\r\n      if (this.state.hasError) return BDV2.react.createElement(\"div\", {className: \"react-error\"}, \"Component Error\");  \r\n      return this.props.children; \r\n    }\r\n}\r\n\r\nconst originalRender = BDErrorBoundary.prototype.render;\r\nObject.defineProperty(BDErrorBoundary.prototype, \"render\", {\r\n    enumerable: false,\r\n    configurable: false,\r\n    set: function() {console.warn(\"Addon policy for plugins #5 https://github.com/rauenzi/BetterDiscordApp/wiki/Addon-Policies#plugins\");},\r\n    get: () => originalRender\r\n}); ","import BDV2 from \"../modules/v2\";\r\n\r\nexport default class V2C_ContentColumn extends BDV2.reactComponent {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    static get displayName() {return \"ContentColumn\";}\r\n\r\n    render() {\r\n        //let contentModule = BDModules.get(e => e.contentColumn)[0]\r\n        let title = this.props.title ? BDV2.react.createElement(\"h2\", {className: \"ui-form-title h2 margin-reset margin-bottom-20\"}, this.props.title) : null\r\n        return [\r\n            title,\r\n            this.props.children\r\n        ]\r\n        return BDV2.react.createElement(\r\n            \"div\",\r\n            {className: contentModule.contentColumn + \" \"+contentModule.contentColumnDefault+\" content-column default\", style: {padding: \"60px 40px 0px\"}},\r\n            title,\r\n            this.props.children\r\n        );\r\n    }\r\n}","import BDV2 from \"../modules/v2\";\r\n\r\nexport default class V2C_ReloadIcon extends BDV2.reactComponent {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        return BDV2.react.createElement(\"svg\", {\r\n                xmlns: \"http://www.w3.org/2000/svg\",\r\n                viewBox: \"0 0 24 24\",\r\n                fill: \"#dcddde\",\r\n                className: \"bd-reload \" + this.props.className,\r\n                onClick: this.props.onClick,\r\n                style: {width: this.props.size || \"24px\", height: this.props.size || \"24px\"}\r\n            },\r\n            BDV2.react.createElement(\"path\", {d: \"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z\"}),\r\n            BDV2.react.createElement(\"path\", {fill: \"none\", d: \"M0 0h24v24H0z\"})\r\n        );\r\n    }\r\n}","import BDV2 from \"../modules/v2\";\r\n\r\nexport default class V2C_XSvg extends BDV2.reactComponent {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        return BDV2.react.createElement(\r\n            \"svg\",\r\n            {xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 12 12\", style: {width: \"18px\", height: \"18px\"}},\r\n            BDV2.react.createElement(\r\n                \"g\",\r\n                {className: \"background\", fill: \"none\", fillRule: \"evenodd\"},\r\n                BDV2.react.createElement(\"path\", {d: \"M0 0h12v12H0\"}),\r\n                BDV2.react.createElement(\"path\", {className: \"fill\", fill: \"#dcddde\", d: \"M9.5 3.205L8.795 2.5 6 5.295 3.205 2.5l-.705.705L5.295 6 2.5 8.795l.705.705L6 6.705 8.795 9.5l.705-.705L6.705 6\"})\r\n            )\r\n        );\r\n    }\r\n}","import BDV2 from \"../../modules/v2\";\r\n\r\nconst React = BDV2.React;\r\n\r\nexport default class Edit extends React.Component {\r\n    render() {\r\n        const size = this.props.size || \"24px\";\r\n        return <svg className={this.props.className || \"\"} viewBox=\"0 0 24 24\" fill=\"var(--text-normal)\" style={{width: size, height: size}} onClick={this.props.onClick}>\r\n                <path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\" />\r\n                <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n               </svg>;\r\n    }\r\n}","import BDV2 from \"../../modules/v2\";\r\n\r\nconst React = BDV2.React;\r\n\r\nexport default class Delete extends React.Component {\r\n    render() {\r\n        const size = this.props.size || \"24px\";\r\n        return <svg className={this.props.className || \"\"} fill=\"var(--text-normal)\" viewBox=\"0 0 24 24\" style={{width: size, height: size}} onClick={this.props.onClick}>\r\n                    <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z\"/>\r\n                    <path fill=\"none\" d=\"M0 0h24v24H0z\"/>\r\n                </svg>;\r\n    }\r\n}","import {settingsCookie} from \"../0globals\";\r\nimport BDV2 from \"../modules/v2\";\r\nimport Utils from \"../modules/utils\";\r\nimport DOM from \"../modules/domtools\";\r\n\r\nimport XSvg from \"./xSvg\";\r\nimport ReloadIcon from \"./reloadIcon\";\r\nimport EditIcon from \"./icons/edit\";\r\nimport DeleteIcon from \"./icons/delete\";\r\nimport Switch from \"./components/switch\";\r\nimport TooltipWrap from \"./tooltipWrap\";\r\nimport { processFile } from \"../modules/pluginCertifier\";\r\nimport contentManager from \"../modules/contentManager\";\r\nimport { resolve } from \"path\";\r\n\r\nconst React = BDV2.React;\r\nconst anchorClasses = BDV2.anchorClasses;\r\n\r\nexport default class V2C_PluginCard extends BDV2.reactComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.onChange = this.onChange.bind(this);\r\n        this.showSettings = this.showSettings.bind(this);\r\n        this.setInitialState();\r\n        this.hasSettings = this.props.addon.plugin && typeof(this.props.addon.plugin.getSettingsPanel) === \"function\";\r\n        this.settingsPanel = \"\";\r\n\r\n        this.edit = this.edit.bind(this);\r\n        this.delete = this.delete.bind(this);\r\n        this.reload = this.reload.bind(this);\r\n    }\r\n\r\n    setInitialState() {\r\n        this.state = {\r\n            checked: this.props.enabled,\r\n            settings: false,\r\n            reloads: 0,\r\n            trusted: false\r\n        };\r\n    }\r\n\r\n    showSettings() {\r\n        if (!this.hasSettings) return;\r\n        this.setState({settings: true});\r\n    }\r\n\r\n    closeSettings() {\r\n        this.panelRef.current.innerHTML = \"\";\r\n        this.setState({settingsOpen: false});\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (!this.state.settings) return;\r\n        if (typeof this.settingsPanel === \"object\") {\r\n            this.refs.settingspanel.appendChild(this.settingsPanel);\r\n        }\r\n\r\n        if (!settingsCookie[\"fork-ps-3\"]) return;\r\n        setImmediate(() => {\r\n            const isHidden = (container, element) => {\r\n                if(!container){\r\n                    console.error(new Error(`Container is undefined.`))\r\n                    return false\r\n                }\r\n                const cTop = container.scrollTop;\r\n                const cBottom = cTop + container.clientHeight;\r\n                const eTop = element.offsetTop;\r\n                const eBottom = eTop + element.clientHeight;\r\n                return  (eTop < cTop || eBottom > cBottom);\r\n            };\r\n\r\n            const thisNode = this.refs.cardNode;\r\n            const container = thisNode.closest(\"div[class*=\\\"contentRegionScroller-\\\"]\")\r\n            if (!isHidden(container, thisNode)) return;\r\n            const thisNodeOffset = DOM.offset(thisNode);\r\n            const containerOffset = DOM.offset(container);\r\n            const original = container.scrollTop;\r\n            const endPoint = thisNodeOffset.top - containerOffset.top + container.scrollTop - 30;\r\n            DOM.animate({\r\n                duration: 300,\r\n                update: function(progress) {\r\n                    if (endPoint > original) container.scrollTop = original + (progress * (endPoint - original));\r\n                    else container.scrollTop = original - (progress * (original - endPoint));\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n\r\n    getString(value) {\r\n        if (!value) return \"???\";\r\n        return typeof value == \"string\" ? value : value.toString();\r\n    }\r\n\r\n    get settingsComponent() {\r\n        try { this.settingsPanel = this.props.addon.plugin.getSettingsPanel(); }\r\n        catch (err) { Utils.err(\"Plugins\", \"Unable to get settings panel for \" + this.name + \".\", err); }\r\n\r\n        return BDV2.react.createElement(\"div\", {className: \"bd-card bd-addon-card settings-open ui-switch-item\", ref: \"cardNode\"},\r\n                BDV2.react.createElement(\"div\", {style: {\"float\": \"right\", \"cursor\": \"pointer\"}, onClick: () => {\r\n                        this.refs.settingspanel.innerHTML = \"\";\r\n                        this.setState({settings: false});\r\n                    }},\r\n                BDV2.react.createElement(XSvg, null)\r\n            ),\r\n            typeof this.settingsPanel === \"object\" && BDV2.react.createElement(\"div\", {id: `plugin-settings-${this.name}`, className: \"plugin-settings\", ref: \"settingspanel\"}),\r\n            typeof this.settingsPanel !== \"object\" && BDV2.react.createElement(\"div\", {id: `plugin-settings-${this.name}`, className: \"plugin-settings\", ref: \"settingspanel\", dangerouslySetInnerHTML: {__html: this.settingsPanel}})\r\n        );\r\n    }\r\n\r\n    buildTitle(name, version, author) {\r\n        const title = \"{{name}} v{{version}} by {{author}}\".split(/({{[A-Za-z]+}})/);\r\n        const nameIndex = title.findIndex(s => s == \"{{name}}\");\r\n        if (nameIndex) title[nameIndex] = React.createElement(\"span\", {className: \"name bda-name\"}, name);\r\n        const versionIndex = title.findIndex(s => s == \"{{version}}\");\r\n        if (nameIndex) title[versionIndex] = React.createElement(\"span\", {className: \"version bda-version\"}, version);\r\n        const authorIndex = title.findIndex(s => s == \"{{author}}\");\r\n        if (nameIndex) {\r\n            const props = {className: \"author bda-author\"};\r\n            if (author.link || author.id) {\r\n                props.className += ` ${anchorClasses.anchor} ${anchorClasses.anchorUnderlineOnHover}`;\r\n                props.target = \"_blank\";\r\n\r\n                if (author.link) props.href = author.link;\r\n                if (author.id) props.onClick = () => {BDV2.LayerStack.popLayer(); BDV2.openDM(author.id);};\r\n            }\r\n            title[authorIndex] = React.createElement(author.link || author.id ? \"a\" : \"span\", props, author.name);\r\n        }\r\n        return title.flat();\r\n    }\r\n\r\n    makeLink(title, url) {\r\n        const props = {className: \"bda-link bda-link-website\", target: \"_blank\"};\r\n        if (typeof(url) == \"string\") props.href = url;\r\n        if (typeof(url) == \"function\") props.onClick = (event) => {event.preventDefault(); event.stopPropagation(); url();};\r\n        return BDV2.react.createElement(\"a\", props, title);\r\n    }\r\n\r\n    makeButton(title, children, action) {\r\n        return <TooltipWrap color=\"black\" side=\"top\" text={title}>\r\n            <div className=\"bd-addon-button\" onClick={action}>{children}</div>\r\n        </TooltipWrap>;\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        this.unmounted = true\r\n    }\r\n\r\n    get links() {\r\n        const links = [];\r\n        const addon = this.props.addon;\r\n        if (addon.website) links.push(this.makeLink(\"Website\", addon.website));\r\n        if (addon.source) links.push(this.makeLink(\"Source\", addon.source));\r\n        if (addon.invite) {\r\n            links.push(this.makeLink(\"Support Server\", () => {\r\n                const tester = /\\.gg\\/(.*)$/;\r\n                let code = addon.invite;\r\n                if (tester.test(code)) code = code.match(tester)[1];\r\n                BDV2.LayerStack.popLayer();\r\n                BDV2.InviteActions.acceptInviteAndTransitionToInviteChannel(code);\r\n            }));\r\n        }\r\n        if (addon.donate) links.push(this.makeLink(\"Donate\", addon.donate));\r\n        if (addon.patreon) links.push(this.makeLink(\"Patreon\", addon.patreon));\r\n        return links;\r\n    }\r\n\r\n    get footer() {\r\n        const links = this.links;\r\n        return (links.length || this.hasSettings) && BDV2.react.createElement(\"div\", {className: \"bd-card-footer bda-footer\"},\r\n            BDV2.react.createElement(\"span\", {className: \"bd-addon-links bda-links\"},\r\n                ...(links.map((element, index) => index < links.length - 1 ? [element, \" | \"] : element).flat())\r\n            ),\r\n            this.hasSettings && BDV2.react.createElement(\"button\", {onClick: this.showSettings, className: \"bd-button bda-settings-button\", disabled: !this.state.checked}, \"Settings\")\r\n        );\r\n    }\r\n\r\n    onChange() {\r\n        this.props.toggle && this.props.toggle(this.name);\r\n        this.setState({checked: !this.state.checked});\r\n    }\r\n\r\n    edit() {this.props.edit(this.name);}\r\n    delete() {this.props.remove(this.name);}\r\n    reload() {this.props.reload(this.name);}\r\n\r\n    get name() {return this.getString(this.props.addon.plugin ? this.props.addon.plugin.getName() : this.props.addon.name);}\r\n    get author() {return this.getString(this.props.addon.plugin ? this.props.addon.plugin.getAuthor() : this.props.addon.author);}\r\n    get description() {return this.getString(this.props.addon.plugin ? this.props.addon.plugin.getDescription() : this.props.addon.description);}\r\n    get version() {return this.getString(this.props.addon.plugin ? this.props.addon.plugin.getVersion() : this.props.addon.version);}\r\n\r\n    render() {\r\n        if (this.state.settings) return this.settingsComponent;\r\n        const {authorId, authorLink} = this.props.addon;\r\n\r\n        const style = {}\r\n        if(settingsCookie[\"fork-ps-6\"]){\r\n            if(!this.isScanning){\r\n                this.isScanning = true\r\n                processFile(resolve(this.props.addon.filename.endsWith(\".plugin.js\") ? contentManager.pluginsFolder : contentManager.themesFolder, this.props.addon.filename), (result) => {\r\n                    if(this.unmounted)return\r\n    \r\n                    this.setState({\r\n                        isTrusted: result.suspect ? \"suspect\" : true\r\n                    })\r\n                }, () => {})\r\n            }else{\r\n                if(this.state.isTrusted === true){\r\n                    style.borderColor = \"#4087ed\"\r\n                }\r\n                if(this.state.isTrusted === \"suspect\"){\r\n                    style.borderColor = \"rgb(240, 71, 71)\"\r\n                }\r\n            }\r\n        }\r\n        \r\n        return BDV2.react.createElement(\"div\", {className: \"bd-card bd-addon-card settings-closed ui-switch-item\", style},\r\n            BDV2.react.createElement(\"div\", {className: \"bd-addon-header bda-header\"},\r\n                    BDV2.react.createElement(\"div\", {className: \"bd-card-title bda-header-title\"}, this.buildTitle(this.name, this.version, {name: this.author, id: authorId, link: authorLink})),\r\n                    BDV2.react.createElement(\"div\", {className: \"bd-addon-controls bda-controls\"},\r\n                        this.props.edit && this.makeButton(\"Edit\", <EditIcon className=\"bd-icon\" />, this.edit),\r\n                        this.props.remove && this.makeButton(\"Delete\", <DeleteIcon className=\"bd-icon\" />, this.delete),\r\n                        this.props.reload && this.makeButton(\"Reload\", <ReloadIcon className=\"bd-icon\" />, this.reload),\r\n                        React.createElement(Switch, {onChange: this.onChange, checked: this.state.checked})\r\n                    )\r\n            ),\r\n            BDV2.react.createElement(\"div\", {className: \"bd-scroller-wrap bda-description-wrap scroller-wrap fade\"},\r\n                BDV2.react.createElement(\"div\", {className: \"bd-scroller bd-addon-description bda-description scroller\"}, this.description)\r\n            ),\r\n            this.footer\r\n        );\r\n    }\r\n}\r\n\r\nconst originalRender = V2C_PluginCard.prototype.render;\r\nObject.defineProperty(V2C_PluginCard.prototype, \"render\", {\r\n    enumerable: false,\r\n    configurable: false,\r\n    set: function() {console.warn(\"Addon policy for plugins #5 https://github.com/rauenzi/BetterDiscordApp/wiki/Addon-Policies#plugins\");},\r\n    get: () => originalRender\r\n});","import BDV2 from \"../../modules/v2\";\r\n\r\nconst React = BDV2.React;\r\n\r\nexport default class DownArrow extends React.Component {\r\n    render() {\r\n        const size = this.props.size || \"16px\";\r\n        return <svg className={this.props.className || \"\"} fill=\"var(--text-normal)\" viewBox=\"0 0 24 24\" style={{width: size, height: size}}>\r\n                    <path d=\"M8.12 9.29L12 13.17l3.88-3.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-4.59 4.59c-.39.39-1.02.39-1.41 0L6.7 10.7c-.39-.39-.39-1.02 0-1.41.39-.38 1.03-.39 1.42 0z\"/>\r\n                </svg>;\r\n    }\r\n}","import BDV2 from \"../../modules/v2\";\r\nimport Arrow from \"../icons/downarrow\";\r\n\r\nconst React = BDV2.React;\r\n\r\n\r\nexport default class Select extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {open: false, value: this.props.value || this.props.options[0].value};\r\n        this.dropdown = React.createRef();\r\n        this.onChange = this.onChange.bind(this);\r\n        this.showMenu = this.showMenu.bind(this);\r\n        this.hideMenu = this.hideMenu.bind(this);\r\n    }\r\n\r\n    showMenu(event) {\r\n        event.preventDefault();\r\n        this.setState({open: true}, () => {\r\n            document.addEventListener(\"click\", this.hideMenu);\r\n        });\r\n    }\r\n\r\n    hideMenu() {\r\n        this.setState({open: false}, () => {\r\n            document.removeEventListener(\"click\", this.hideMenu);\r\n        });\r\n    }\r\n\r\n    onChange(value) {\r\n        this.setState({value});\r\n        if (this.props.onChange) this.props.onChange(value);\r\n    }\r\n\r\n    get selected() {return this.props.options.find(o => o.value == this.state.value);}\r\n\r\n    get options() {\r\n        const selected = this.selected;\r\n        return <div className=\"bd-select-options\">\r\n            {this.props.options.map(opt => \r\n                <div className={`bd-select-option${selected.value == opt.value ? \" selected\" : \"\"}`} onClick={this.onChange.bind(this, opt.value)}>{opt.label}</div>\r\n            )}\r\n        </div>;\r\n    }\r\n\r\n    render() {\r\n        const style = this.props.style == \"transparent\" ? \" bd-select-transparent\" : \"\";\r\n        const isOpen = this.state.open ? \" menu-open\" : \"\";\r\n        return  <div className={`bd-select${style}${isOpen}`} onClick={this.showMenu} ref={this.dropdown}>\r\n                    <div className=\"bd-select-value\">{this.selected.label}</div>\r\n                    <Arrow className=\"bd-select-arrow\" />\r\n                    {this.state.open && this.options}\r\n                </div>;\r\n    }\r\n}\r\n\r\n// return <div className=\"bd-select-wrap\">\r\n// <label className=\"bd-label\">{this.props.label}</label>\r\n// <div className={`bd-select${style}${isOpen}`} onClick={this.showMenu} ref={this.dropdown}>\r\n//     <div className=\"bd-select-controls\">\r\n//         <div className=\"bd-select-value\">{this.selected.label}</div>\r\n//         <Arrow className=\"bd-select-arrow\" />\r\n//     </div>\r\n// </div>\r\n// {this.state.open && this.options}\r\n// </div>;","import BDV2 from \"../../modules/v2\";\r\n\r\nconst React = BDV2.React;\r\n\r\nexport default class Search extends React.Component {\r\n    render() {\r\n        const size = this.props.size || \"16px\";\r\n        return <svg className={this.props.className || \"\"} fill=\"var(--text-normal)\" viewBox=\"0 0 24 24\" style={{width: size, height: size}}>\r\n                    <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\r\n                    <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\r\n                </svg>;\r\n    }\r\n}","import BDV2 from \"../../modules/v2\";\r\nimport SearchIcon from \"../icons/search\";\r\n\r\nconst React = BDV2.React;\r\n\r\nexport default class Search extends React.Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            focused: false\r\n        }\r\n    }\r\n    render() {\r\n        const className = [\"bd-search-wrapper\"]\r\n        if(this.state.focused)className.push(\"focused\")\r\n        return <div className={className.join(\" \")}>\r\n                    <input onChange={this.props.onChange} onKeyDown={this.props.onKeyDown} type=\"text\" \r\n                    className=\"bd-search\" placeholder={this.props.placeholder} maxLength=\"50\" \r\n                    onFocus={() => {\r\n                        this.setState({focused: true})\r\n                    }} onBlur={() => {\r\n                        this.setState({focused: false})\r\n                    }}/>\r\n                    <SearchIcon />\r\n                </div>;\r\n    }\r\n}","import ErrorBoundary from \"./errorBoundary\";\r\nimport ContentColumn from \"./contentColumn\";\r\nimport ReloadIcon from \"./reloadIcon\";\r\nimport AddonCard from \"./addoncard\";\r\nimport Dropdown from \"./components/dropdown\";\r\nimport Search from \"./components/search\";\r\n\r\nimport {settingsCookie, pluginCookie, themeCookie, bdplugins, bdthemes} from \"../0globals\";\r\nimport ContentManager from \"../modules/contentManager\";\r\nimport BDV2 from \"../modules/v2\";\r\nimport pluginModule from \"../modules/pluginModule\";\r\nimport themeModule from \"../modules/themeModule\";\r\nimport WebpackModules from \"../modules/webpackModules\";\r\nimport BdApi from \"../modules/bdApi\";\r\nimport Utils from \"../modules/utils\";\r\nimport TooltipWrap from \"./tooltipWrap\";\r\nimport bdEvents from \"../modules/bdEvents\";\r\nimport EmulatedTooltip from \"./tooltip\";\r\n\r\nconst Tooltip = WebpackModules.findByDisplayName(\"Tooltip\");\r\n\r\nconst React = BDV2.react;\r\n\r\nexport default class CardList extends BDV2.reactComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {sort: \"name\", ascending: true, query: \"\"};\r\n        this.isPlugins = this.props.type == \"plugins\";\r\n        this.cookie = this.isPlugins ? pluginCookie : themeCookie;\r\n        this.manager = this.isPlugins ? pluginModule : themeModule;\r\n\r\n        this.sort = this.sort.bind(this);\r\n        this.reverse = this.reverse.bind(this);\r\n        this.search = this.search.bind(this);\r\n\r\n        this.onAddonChanges = function(){\r\n            this.forceUpdate()\r\n        }\r\n        this.onAddonChanges = this.onAddonChanges.bind(this)\r\n    }\r\n\r\n    componentDidMount(){\r\n        const type = (this.isPlugins ? \"plugin\" : \"theme\") + \"-\"\r\n        bdEvents.on(`${type}loaded`, this.onAddonChanges)\r\n        bdEvents.on(`${type}unloaded`, this.onAddonChanges)\r\n        bdEvents.on(`${type}reloaded`, this.onAddonChanges)\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        const type = (this.isPlugins ? \"plugin\" : \"theme\") + \"-\"\r\n        bdEvents.off(`${type}loaded`, this.onAddonChanges)\r\n        bdEvents.off(`${type}unloaded`, this.onAddonChanges)\r\n        bdEvents.off(`${type}reloaded`, this.onAddonChanges)\r\n    }\r\n\r\n    openFolder() {\r\n        const shell = require(\"electron\").shell;\r\n        const open = shell.openPath || shell.openItem;\r\n        open(this.isPlugins ? ContentManager.pluginsFolder : ContentManager.themesFolder);\r\n    }\r\n\r\n    edit(name) {\r\n        console.log(name);\r\n        this.manager.edit(name);\r\n    }\r\n\r\n    async delete(name) {\r\n        const shouldDelete = await this.confirmDelete(name);\r\n        if (!shouldDelete) return;\r\n        this.manager.delete(name);\r\n    }\r\n\r\n    confirmDelete(name) {\r\n        return new Promise(resolve => {\r\n            BdApi.showConfirmationModal(\"Are You Sure?\", `Are you sure you want to delete ${name}?`, {\r\n                danger: true,\r\n                confirmText: \"Delete\",\r\n                onConfirm: () => {resolve(true);},\r\n                onCancel: () => {resolve(false);}\r\n            });\r\n        });\r\n    }\r\n\r\n    get sortOptions() {\r\n        return [\r\n            {label: \"Name\", value: \"name\"},\r\n            {label: \"Author\", value: \"author\"},\r\n            {label: \"Version\", value: \"version\"},\r\n            {label: \"Recently Added\", value: \"added\"},\r\n            {label: \"Last Modified\", value: \"modified\"},\r\n            {label: \"File Size\", value: \"size\"},\r\n        ];\r\n    }\r\n\r\n    get directions() {\r\n        return [\r\n            {label: \"Ascending\", value: true},\r\n            {label: \"Descending\", value: false}\r\n        ];\r\n    }\r\n\r\n    reverse(value) {\r\n        this.setState({ascending: value});\r\n    }\r\n\r\n    sort(value) {\r\n        this.setState({sort: value});\r\n    }\r\n\r\n    search(event) {\r\n        this.setState({query: event.target.value.toLocaleLowerCase()});\r\n    }\r\n\r\n    getProps(addon) {\r\n        return {\r\n            key: this.getName(addon),\r\n            enabled: this.cookie[this.getName(addon)],\r\n            toggle: this.manager.toggle.bind(this.manager),\r\n            edit: settingsCookie[\"fork-ps-7\"] ? this.edit.bind(this) : null,\r\n            remove: this.delete.bind(this),\r\n            addon: addon,\r\n            hash: addon.hash\r\n        };\r\n    }\r\n\r\n    getString(value) {\r\n        if (!value) return \"???\";\r\n        return typeof value == \"string\" ? value : value.toString();\r\n    }\r\n\r\n    get list(){\r\n        return this.props.type === \"plugins\" ? Object.values(bdplugins) : Object.values(bdthemes);\r\n    }\r\n\r\n    getAddons() {\r\n        const sortedAddons = this.list.sort((a, b) => {\r\n            const cap = this.state.sort.charAt(0).toUpperCase() + this.state.sort.slice(1);\r\n            const first = a.plugin && a.plugin[`get${cap}`] ? this.getString(a.plugin[`get${cap}`]()) : this.getString(a[this.state.sort]);\r\n            const second = b.plugin && b.plugin[`get${cap}`] ? this.getString(b.plugin[`get${cap}`]())  : this.getString(b[this.state.sort]);\r\n            if (typeof(first) == \"string\") return first.toLocaleLowerCase().localeCompare(second.toLocaleLowerCase());\r\n            if (first > second) return 1;\r\n            if (second > first) return -1;\r\n            return 0;\r\n        });\r\n        if (!this.state.ascending) sortedAddons.reverse();\r\n        const rendered = [];\r\n        for (let a = 0; a < sortedAddons.length; a++) {\r\n            const addon = sortedAddons[a];\r\n            if (this.state.query) {\r\n                let matches = null;\r\n                const name = this.getName(addon);\r\n                const author = this.getAuthor(addon);\r\n                const description = this.getDescription(addon);\r\n                const version = this.getVersion(addon);\r\n                if (name) matches = name.toLocaleLowerCase().includes(this.state.query);\r\n                if (author) matches = matches || author.toLocaleLowerCase().includes(this.state.query);\r\n                if (description) matches = matches || description.toLocaleLowerCase().includes(this.state.query);\r\n                if (version) matches = matches || version.toLocaleLowerCase().includes(this.state.query);\r\n                if (!matches) continue;\r\n            }\r\n            const props = this.getProps(addon);\r\n            rendered.push(<ErrorBoundary><AddonCard {...props} reload={!settingsCookie[\"fork-ps-5\"] && this.manager.reload.bind(this.manager)} /></ErrorBoundary>);\r\n        }\r\n        return rendered;\r\n    }\r\n\r\n    getName(addon) {return this.getString(addon.plugin ? addon.plugin.getName() : addon.name);}\r\n    getAuthor(addon) {return this.getString(addon.plugin ? addon.plugin.getAuthor() : addon.author);}\r\n    getDescription(addon) {return this.getString(addon.plugin ? addon.plugin.getDescription() : addon.description);}\r\n    getVersion(addon) {return this.getString(addon.plugin ? addon.plugin.getVersion() : addon.version);}\r\n\r\n    renderCheckUpdates(){\r\n        if(!window.ZeresPluginLibrary)return null\r\n        if(!window.PluginUpdates)return null\r\n        if(typeof window.PluginUpdates.checkAll !== \"function\")return null\r\n        if(!this.isPlugins)return null\r\n\r\n        let tooltipIsShowing = false\r\n        let tooltip\r\n        return <TooltipWrap text=\"Checks for updates of plugins that support this feature. Right-click for a list.\">\r\n            <span style={{marginLeft: \"10px\"}} onMouseLeave={() => {\r\n                    tooltipIsShowing = false\r\n                    tooltip.hide()\r\n                }}>\r\n                <Lightcord.Api.Components.inputs.Button ref=\"checkUpdateButton\" color=\"brand\" look=\"filled\" size=\"min\" hoverColor=\"default\" onClick={() => {\r\n                    try{\r\n                        Utils.showToast(\"Plugin update check in progress.\", {type: \"info\"})\r\n                        window.PluginUpdates.checkAll()\r\n                        .then(() => {\r\n                            Utils.showToast(\"Plugin update check complete.\", {type: \"success\"})\r\n                        }).catch(err => {\r\n                            console.error(err)\r\n                            Utils.showToast(\"An error occured while checking update.\", {type: \"error\"})\r\n                        })\r\n                    }catch(e){\r\n                        console.error(e)\r\n                        Utils.showToast(\"An error occured while checking update.\", {type: \"error\"})\r\n                    }\r\n                }} wrapper={false} disabled={false} onRightClick={() => {\r\n                    if(!this.refs.checkUpdateButton)return\r\n                    if (!window.PluginUpdates || !window.PluginUpdates.plugins) return;\r\n                    if(tooltipIsShowing)return\r\n                    tooltip = new EmulatedTooltip(this.refs.checkUpdateButton.refs.original.refs.button, Object.values(window.PluginUpdates.plugins).map(p => p.name).join(\", \"), {\r\n                        side: \"bottom\",\r\n                        attachEvents: false\r\n                    })\r\n                    tooltip.show()\r\n                    tooltipIsShowing = true\r\n                }}>\r\n                    Check for Updates\r\n                </Lightcord.Api.Components.inputs.Button>\r\n            </span>\r\n        </TooltipWrap>\r\n    }\r\n\r\n    render() {\r\n        const refreshIcon = <Tooltip color=\"black\" position=\"top\" text=\"Reload List\">\r\n            {(props) => \r\n            <ReloadIcon {...props} className=\"bd-icon bd-reload bd-reload-header\" size=\"18px\" onClick={async () => {\r\n                if (this.isPlugins) pluginModule.updatePluginList();\r\n                else themeModule.updateThemeList();\r\n                this.forceUpdate();\r\n            }} />\r\n            }</Tooltip>;\r\n        const addonCards = this.getAddons();\r\n\r\n        return <ContentColumn title={`${this.props.type.toUpperCase()}—${addonCards.length}`}>\r\n            <Lightcord.Api.Components.inputs.Button key=\"folder-button\" color=\"brand\" \r\n                look=\"filled\" size=\"min\" hoverColor=\"default\" onClick={this.openFolder.bind(this)} wrapper={false}\r\n                style={{\r\n                    marginLeft: \"10px\"\r\n                }}>\r\n                Open {this.isPlugins ? \"Plugin\" : \"Theme\"} Folder\r\n            </Lightcord.Api.Components.inputs.Button>\r\n            {this.renderCheckUpdates()}\r\n            {!settingsCookie[\"fork-ps-5\"] && refreshIcon}\r\n            <div className=\"bd-controls bd-addon-controls\">\r\n                <Search onChange={this.search} placeholder={`Search ${this.props.type}...`} />\r\n                <div className=\"bd-addon-dropdowns\">\r\n                    <div className=\"bd-select-wrapper\">\r\n                        <label className=\"bd-label\">Sort by:</label>\r\n                        <Dropdown options={this.sortOptions} onChange={this.sort} style=\"transparent\" />\r\n                    </div>\r\n                    <div className=\"bd-select-wrapper\">\r\n                        <label className=\"bd-label\">Order:</label>\r\n                        <Dropdown options={this.directions} onChange={this.reverse} style=\"transparent\" />\r\n                    </div>\r\n                    \r\n                </div>\r\n            </div>\r\n            <div className=\"bda-slist bd-addon-list\">{addonCards}</div>\r\n        </ContentColumn>\r\n    }\r\n}\r\n\r\nconst originalRender = CardList.prototype.render;\r\nObject.defineProperty(CardList.prototype, \"render\", {\r\n    enumerable: false,\r\n    configurable: false,\r\n    set: function() {console.warn(\"Addon policy for plugins #5 https://github.com/rauenzi/BetterDiscordApp/wiki/Addon-Policies#plugins\");},\r\n    get: () => originalRender\r\n});","import {settingsRPC, defaultRPC} from \"../0globals\";\r\n\r\nconst dispatcher = BDModules.get(m=>m.Dispatcher&&m.default&&m.default.dispatch)[0].default\r\nconst ActionTypes = BDModules.get(m=>m.ActionTypes)[0].ActionTypes\r\n\r\nconst socketId = \"lightcord-spoof-socket\"\r\nconst pid = process.pid\r\n\r\nexport default new class CustomRichPresence {\r\n    constructor(){\r\n        this.enabled = false\r\n\r\n        this.game = settingsRPC\r\n    }\r\n    \r\n    get formatedGame(){\r\n        if(!this.game)return null\r\n        if(this.enabled === false)return null\r\n        let game = {\r\n            name: this.game.name || defaultRPC.name,\r\n            application_id: this.game.application_id || defaultRPC.application_id,\r\n            details: this.game.details || undefined,\r\n            state: this.game.state || undefined,\r\n            timestamps: this.game[\"timestamps.start\"] ? {\r\n                start: this.game[\"timestamps.start\"]\r\n            } : undefined,\r\n            assets: this.game[\"assets.large\"] ? {\r\n                large_image: this.game[\"assets.large\"],\r\n                small_image: this.game[\"assets.small\"] || undefined\r\n            } : undefined\r\n        }\r\n        return game\r\n    }\r\n\r\n    sendGame(){\r\n        dispatcher.dispatch({\r\n            type: ActionTypes.LOCAL_ACTIVITY_UPDATE,\r\n            socketId,\r\n            pid,\r\n            activity: this.formatedGame\r\n        })   \r\n    }\r\n\r\n    enable() {\r\n        if(this.enabled)return\r\n        this.enabled = true\r\n        console.log(\"Enabling custom RichPresence\")\r\n\r\n        this.set(settingsRPC || Object.create(defaultRPC))\r\n\r\n        this.sendGame()\r\n    }\r\n\r\n    disable() {\r\n        if(!this.enabled)return\r\n        this.enabled = false\r\n        console.log(\"Disabling custom RichPresence\")\r\n\r\n        this.sendGame()\r\n    }\r\n\r\n    async fetchAssets(applicationId){\r\n        let assets = await BDModules.get(e => e.getAssets)[0].getAssets(applicationId)\r\n        if(assets.undefined && typeof assets.undefined === \"number\"){\r\n            throw new Error(\"Unknown Application\")\r\n        }\r\n        return assets\r\n    }\r\n\r\n    set(activity){\r\n        this.game = activity\r\n\r\n        this.sendGame()\r\n    }\r\n}","import BDV2 from \"../modules/v2\";\r\nimport V2C_SettingsTitle from \"./settingsTitle\";\r\nimport V2C_SettingsGroup from \"./settingsGroup\";\r\nimport dataStore from \"../modules/dataStore\";\r\nimport { defaultRPC, settingsRPC } from \"../0globals\";\r\nimport CustomRichPresence from \"../modules/CustomRichPresence\"\r\nimport { remote } from \"electron\";\r\nimport MarginTop from \"./margintop\";\r\nimport Utils from \"../modules/utils\";\r\n\r\nconst React = BDV2.React;\r\n\r\nlet V2C_PresenceSettingsModules\r\nexport default class V2C_PresenceSettings extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            data: dataStore.getSettingGroup(\"rpc\") || defaultRPC,\r\n            assets: []\r\n        }\r\n\r\n        this.preview = null\r\n        this.isfetching = false\r\n        if(this.state.data.application_id){\r\n            this.fetchAssets()\r\n        }\r\n\r\n        this.assetComponents = new Set()\r\n    }\r\n\r\n    updateWhenFetched(comp){\r\n        this.assetComponents.add(comp)\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {InputText} setting \r\n     */\r\n    onChange(setting, value){\r\n        let defaultSetting = RPCProps.find(e => e.id === setting.props.id)\r\n\r\n        this.setState({\r\n            data: Object.assign(settingsRPC, this.state.data, {\r\n                [defaultSetting.id]: !!value ? value : null\r\n            }),\r\n            assets: this.state.assets\r\n        })\r\n        if(setting.props.id === \"application_id\"){\r\n            this.fetchAssets()\r\n        }\r\n\r\n        dataStore.setSettingGroup(\"rpc\", settingsRPC);\r\n        this.preview.forceUpdate()\r\n        CustomRichPresence.set(settingsRPC)\r\n    }\r\n\r\n    fetchAssets(){\r\n        if(this.isfetching === true){\r\n            let app = this.state.data.application_id\r\n            setTimeout(() => {\r\n                if(this.state.data.application_id !== app){\r\n                    return\r\n                }\r\n                this.fetchAssets()\r\n            }, 5000);\r\n        }\r\n        if(!this.state.data.application_id){\r\n            this.setState({\r\n                data: this.state.data,\r\n                assets: []\r\n            })\r\n            this.forceUpdate()\r\n            this.assetComponents.forEach(e => e.forceUpdate())\r\n            return\r\n        }\r\n        this.isfetching = true\r\n        CustomRichPresence.fetchAssets(this.state.data.application_id)\r\n        .then(assets => {\r\n            this.isfetching = false\r\n            this.setState({\r\n                data: this.state.data,\r\n                assets: Object.keys(assets).map(k => {\r\n                    let asset = assets[k]\r\n                    return {\r\n                        id: asset.id,\r\n                        name: asset.name,\r\n                        type: asset.type\r\n                    }\r\n                })\r\n            })\r\n            this.forceUpdate()\r\n            this.assetComponents.forEach(e => e.forceUpdate())\r\n        }).catch(() => {\r\n            this.isfetching = false\r\n            this.setState({\r\n                data: this.state.data,\r\n                assets: []\r\n            })\r\n            this.forceUpdate()\r\n            this.assetComponents.forEach(e => e.forceUpdate())\r\n        })\r\n    }\r\n\r\n    updatePreview(data){\r\n        this.setState({\r\n            data\r\n        })\r\n    }\r\n\r\n    get modules(){\r\n        return V2C_PresenceSettingsModules || (V2C_PresenceSettingsModules = [\r\n            BDModules.get(e => e.marginBottom20)[0]\r\n        ])\r\n    }\r\n\r\n    render() {\r\n        let [\r\n            marginModule\r\n        ] = this.modules\r\n        return [\r\n            <V2C_SettingsGroup title=\"RichPresence Settings\" settings={this.props.settings} onChange={this.props.onChange}/>,\r\n            <MarginTop />,\r\n            <V2C_SettingsTitle text=\"RichPresence\"/>,\r\n            <div>\r\n                {/** options */}\r\n                {this.optionsComponents}\r\n            </div>,\r\n            <div>\r\n                <MarginTop />\r\n                <V2C_SettingsTitle text=\"Preview\"/>\r\n                {/** preview */}\r\n                <RpcPreview settings={this}/>\r\n            </div>,\r\n            <div className={marginModule.marginBottom20}></div>,\r\n            <button style={{opacity: 0.01}} onClick={window.ohgodohfuck}>\r\n                Oh god Oh fuck\r\n            </button>,\r\n            <button style={{opacity: 0.01}} onClick={() => {\r\n                remote.shell.openExternal(\"https://www.youtube.com/watch?v=LkYa7rps_g4\")\r\n            }}>\r\n                See ? I pulled a litle sneaky on ya\r\n            </button>\r\n        ]\r\n    }\r\n\r\n    get optionsComponents(){\r\n        return this._optionsComponents || (this._optionsComponents = RPCProps.map(e => {\r\n            if(e.type === \"text\"){\r\n                return <InputText setting={e} manager={this} id={e.id}/>\r\n            }else if(e.type === \"number\"){\r\n                let array = [<InputNumber setting={e} manager={this} id={e.id}/>]/*\r\n                if(e.id === \"timestamps.start\"){\r\n                    array.unshift(<DiscordButton title=\"Copy Current Timestamp\" onClick={() => {\r\n                        DiscordNative.clipboard.copy(Date.now()+\"\")\r\n                    }} />)\r\n                }*/\r\n                return array\r\n            }else if(e.type === \"choice\"){\r\n                if([\"assets.small\", \"assets.large\"].includes(e.id)){\r\n                    return <InputChoice setting={e} manager={this} id={e.id} choices={[{value: \"none\", label: \"No assets\"}].concat(this.state.assets.map(e => {\r\n                        return {\r\n                            value: \"asset-\"+e.id,\r\n                            label: e.name\r\n                        }\r\n                    }))}/>\r\n                }else{\r\n                    return \"Unknown choice.\"\r\n                }\r\n            }\r\n        }))\r\n    }\r\n}\r\nconst RPCProps = [\r\n    {\r\n        title: \"Application ID\",\r\n        id: \"application_id\",\r\n        type: \"number\",\r\n        placeholder: \"711416957718757418\"\r\n    },\r\n    {\r\n        title: \"Name\",\r\n        id: \"name\",\r\n        type: \"text\",\r\n        placeholder: \"Lightcord\"\r\n    },\r\n    {\r\n        title: \"Details\",\r\n        id: \"details\",\r\n        type: \"text\",\r\n        placeholder: \"Browsing Discord\"\r\n    },\r\n    {\r\n        title: \"State\",\r\n        id: \"state\",\r\n        type: \"text\",\r\n        placeholder: \"Lightcord Client\"\r\n    },\r\n    {\r\n        title: \"Timestamp Start\",\r\n        id: \"timestamps.start\",\r\n        type: \"number\",\r\n        get placeholder(){\r\n            return Date.now()\r\n        }\r\n    },\r\n    {\r\n        title: \"LargeAsset\",\r\n        id: \"assets.large\",\r\n        type: \"choice\"\r\n    },\r\n    {\r\n        title: \"SmallAsset\",\r\n        id: \"assets.small\",\r\n        type: \"choice\"\r\n    },\r\n]\r\n\r\nlet inputTextModules\r\nclass InputText extends React.PureComponent {\r\n    get modules(){\r\n        if(inputTextModules && inputTextModules[0])return inputTextModules\r\n        return inputTextModules = [\r\n            BDModules.get(e => e.removeKeybind)[0],\r\n            BDModules.get(e => e.marginBottom20)[0],\r\n            BDModules.get(e => e.defaultMarginh5)[0],\r\n            BDModules.get(e => e.colorStandard)[0],\r\n            BDModules.get(e => e.size32)[0],\r\n            BDModules.get(e => e._horizontal)[0],\r\n            BDModules.get(e => e.inputMini)[0],\r\n            BDModules.get(e => e.size16 && e.size20)[0],\r\n        ]\r\n    }\r\n\r\n    constructor(props){\r\n        super(props)\r\n        let setting = this.props.setting\r\n        this.state = {\r\n            data: this.props.manager.state.data[setting.id]\r\n        }\r\n\r\n        this.input = <window.Lightcord.Api.Components.inputs.TextInput placeholder={setting.placeholder} name={setting.id} value={this.state.data} onChange={(value) => {\r\n            this.setState({\r\n                data: value\r\n            })\r\n            if(!this.lastEdited || this.lastEdited < Date.now() - 500){\r\n                this.props.manager.onChange(this, value)\r\n                this.lastEdited = Date.now()\r\n            }else if(!this.isTiming){\r\n                this.isTiming = setTimeout(() => {\r\n                    this.props.manager.onChange(this, this.state.data)\r\n                    this.isTiming = null\r\n                    this.lastEdited = Date.now()\r\n                }, 500);\r\n            }\r\n        }} type=\"text\"/>\r\n    }\r\n\r\n    render(){\r\n        let setting = this.props.setting\r\n\r\n        let [\r\n            rowModule,\r\n            marginModule,\r\n            marginModule2,\r\n            colorModule,\r\n            sizeModule,\r\n            flexModule,\r\n            inputModule,\r\n            sizeModule2,\r\n        ] = this.modules\r\n\r\n        return (<div className={rowModule.row+\" \"+marginModule.marginBottom20}>\r\n            <div className={`${rowModule.item} ${flexModule.flexChild}`}>\r\n                <h5 className={colorModule.colorStandard+\" \"+sizeModule.size14+\" \"+marginModule2.h5+\" \"+marginModule2.defaultMarginh5}>\r\n                    {setting.title}\r\n                </h5>\r\n                {this.input}\r\n            </div>\r\n            <Divider/>\r\n        </div>)\r\n    }\r\n}\r\n\r\nlet InputNumberModules\r\nclass InputNumber extends React.PureComponent {\r\n    get modules(){\r\n        return InputNumberModules || (InputNumberModules = [\r\n            BDModules.get(e => e.removeKeybind)[0],\r\n            BDModules.get(e => e.marginBottom20)[0],\r\n            BDModules.get(e => e.defaultMarginh5)[0],\r\n            BDModules.get(e => e.colorStandard)[0],\r\n            BDModules.get(e => e.size32)[0],\r\n            BDModules.get(e => e._horizontal)[0],\r\n            BDModules.get(e => e.inputMini)[0],\r\n            BDModules.get(e => e.size16 && e.size20)[0],\r\n            BDModules.get(e => e.colorTransparent)[0],\r\n        ])\r\n    }\r\n\r\n    constructor(props){\r\n        super(props)\r\n        let setting = this.props.setting\r\n        this.state = {\r\n            data: this.props.manager.state.data[setting.id]\r\n        }\r\n\r\n        this.input = <window.Lightcord.Api.Components.inputs.TextInput placeholder={setting.placeholder} name={setting.id} value={this.state.data} type=\"number\" onChange={(value, name, input) => {\r\n            value = value.replace(/[^\\d]+/g, \"\")\r\n            if(value == this.state.data){\r\n                input.setValue(value)\r\n                return\r\n            }\r\n\r\n            if(!this.lastEdited || this.lastEdited < Date.now() - 500){\r\n                this.props.manager.onChange(this, value)\r\n                this.lastEdited = Date.now()\r\n            }else if(!this.isTiming){\r\n                this.isTiming = setTimeout(() => {\r\n                    this.props.manager.onChange(this, this.state.data)\r\n                    this.isTiming = null\r\n                    this.lastEdited = Date.now()\r\n                }, 500);\r\n            }\r\n            this.setState({\r\n                data: value\r\n            })\r\n        }} type=\"text\"/>\r\n    }\r\n\r\n    render(){\r\n        let setting = this.props.setting\r\n\r\n        let [\r\n            rowModule,\r\n            marginModule,\r\n            marginModule2,\r\n            colorModule,\r\n            sizeModule,\r\n            flexModule,\r\n        ] = this.modules\r\n\r\n\r\n        return (<div className={rowModule.row+\" \"+marginModule.marginBottom20}>\r\n            <div className={`${rowModule.item} ${flexModule.flexChild}`}>\r\n                <h5 className={colorModule.colorStandard+\" \"+sizeModule.size14+\" \"+marginModule2.h5+\" \"+marginModule2.defaultMarginh5}>\r\n                    {setting.title}\r\n                </h5>\r\n                {this.input}\r\n                {setting.id === \"timestamps.start\" ? \r\n                <Lightcord.Api.Components.inputs.Button onClick={() => {\r\n                    DiscordNative.clipboard.copy(Date.now()+\"\")\r\n                }} color=\"brand\">Copy current timestamp</Lightcord.Api.Components.inputs.Button> : null}\r\n            </div>\r\n            <Divider/>\r\n        </div>)\r\n    }\r\n}\r\n\r\nlet InputChoiceModules\r\nclass InputChoice extends React.PureComponent {\r\n    constructor(props){\r\n        super(props)\r\n        let setting = this.props.setting\r\n        this.state = {\r\n            data: this.props.manager.state.data[setting.id] ? \"asset-\"+this.props.manager.state.data[setting.id] : \"none\"\r\n        }\r\n        this.props.manager.updateWhenFetched(this)\r\n    }\r\n\r\n    onChange(data){\r\n        let value = data.value\r\n\r\n        if(!this.lastEdited || this.lastEdited < Date.now() - 500){\r\n            this.props.manager.onChange(this, value === \"none\" ? null : value.replace(\"asset-\", \"\"))\r\n            this.lastEdited = Date.now()\r\n        }else if(!this.isTiming){\r\n            this.isTiming = setTimeout(() => {\r\n                this.props.manager.onChange(this, this.state.data === \"none\" ? null : this.state.data.replace(\"asset-\", \"\"))\r\n                this.isTiming = null\r\n                this.lastEdited = Date.now()\r\n            }, 500);\r\n        }\r\n        this.setState({\r\n            data: value\r\n        })\r\n        this.forceUpdate()\r\n    }\r\n    \r\n    get modules(){\r\n        return InputChoiceModules || (InputChoiceModules = [\r\n            BDModules.get(e => e.removeKeybind)[0],\r\n            BDModules.get(e => e.marginBottom20)[0],\r\n            BDModules.get(e => e.defaultMarginh5)[0],\r\n            BDModules.get(e => e.colorStandard)[0],\r\n            BDModules.get(e => e.size32)[0],\r\n            BDModules.get(e => e._horizontal)[0]\r\n        ])\r\n    }\r\n\r\n    render(){\r\n        let setting = this.props.setting\r\n\r\n        let [\r\n            rowModule,\r\n            marginModule,\r\n            marginModule2,\r\n            colorModule,\r\n            sizeModule,\r\n            flexModule\r\n        ] = this.modules\r\n        \r\n        let options = this.props.manager.state.assets.map(e => {\r\n            return {\r\n                value: \"asset-\"+e.id,\r\n                label: e.name\r\n            }\r\n        })\r\n\r\n        options.unshift({\r\n            value: \"none\",\r\n            label: \"No assets\"\r\n        })\r\n\r\n        return (<div className={rowModule.row+\" \"+marginModule.marginBottom20}>\r\n            <div className={`${rowModule.item} ${flexModule.flexChild}`}>\r\n                <h5 className={colorModule.colorStandard+\" \"+sizeModule.size14+\" \"+marginModule2.h5+\" \"+marginModule2.defaultMarginh5}>\r\n                    {setting.title}\r\n                </h5>\r\n                <window.Lightcord.Api.Components.inputs.Dropdown value={this.state.data} options={options} onChange={this.onChange.bind(this)} />\r\n                {/*<Select value={this.state.data} onChange={this.onChange.bind(this)} options={options}/>*/}\r\n            </div>\r\n            <Divider/>\r\n        </div>)\r\n    }\r\n}\r\n\r\nlet DividerModules = []\r\nclass Divider extends React.PureComponent {\r\n    get modules(){\r\n        return DividerModules&&DividerModules[0] ? DividerModules : (DividerModules = [\r\n            BDModules.get(e => e.divider && Object.keys(e).length === 1)[0],\r\n            BDModules.get(e => e.dividerDefault)[0]\r\n        ])\r\n    }\r\n\r\n    render(){\r\n        let [\r\n            divider,\r\n            dividerDefault\r\n        ] = this.modules\r\n\r\n        return <div class={`${divider.divider} ${dividerDefault.dividerDefault}`}></div>\r\n    }\r\n}\r\n\r\nclass DiscordButton extends React.Component {\r\n    render(){\r\n        let rowModule = BDModules.get(e => e.removeKeybind)[0]\r\n        let marginModule = BDModules.get(e => e.marginBottom20)[0]\r\n        let flexModule = BDModules.get(e => e._horizontal)[0]\r\n\r\n        return (<div className={rowModule.row+\" \"+marginModule.marginBottom20}>\r\n            <div className={`${rowModule.item} ${flexModule.flexChild}`}>\r\n                <Lightcord.Api.Components.inputs.Button onClick={this.props.onClick} color=\"brand\">\r\n                    {this.props.title}\r\n                </Lightcord.Api.Components.inputs.Button>\r\n            </div>\r\n        </div>)\r\n    }\r\n}\r\n\r\nclass RpcPreview extends React.Component {\r\n    constructor(props = {}){\r\n        super(props)\r\n        this.state = {\r\n            active: \"profile\"\r\n        }\r\n        this.tabs = []\r\n\r\n        this.props.settings.preview = this\r\n    }\r\n\r\n    changeTab(tab){\r\n        let ancientTab = this.state.active\r\n        if(ancientTab === tab.props.id)return\r\n\r\n        this.tabs.forEach(e => {\r\n            e.setActive(false)\r\n        })\r\n        tab.setActive(true)\r\n        this.setState({\r\n            active: tab.props.id\r\n        })\r\n    }\r\n\r\n    render(){\r\n        return (<div className=\"lc-tabWrapper\">\r\n            <div className=\"lc-tabnav\" style={{flex: \"0 1 auto\"}}>\r\n                <Tab preview={this} title=\"Full Profile\" id=\"profile\"/>\r\n                <Tab preview={this} title=\"User Popout\" id=\"popout\"/>\r\n            </div>\r\n            <PresenceErrorCatcher preview={this.preview} state={this.state.rpc} props={{preview: this}} key={this.state.active} />\r\n        </div>)\r\n    }   \r\n\r\n    isActive(tab){\r\n        return this.state.active === tab\r\n    }\r\n\r\n    get preview(){\r\n        if(this.state.active === \"profile\")return Profile\r\n        return Popout\r\n    }\r\n}\r\n\r\nclass Tab extends React.Component {\r\n    constructor(props){\r\n        super(props)\r\n\r\n        this.state = {\r\n            active: props.preview.isActive(props.id)\r\n        }\r\n        props.preview.tabs.push(this)\r\n    }\r\n\r\n    setActive(isActive){\r\n        this.setState({\r\n            active: !!isActive\r\n        })\r\n    }\r\n\r\n    render(){\r\n        let className = `lc-navItem`\r\n        if(this.state.active){\r\n            className += ` lc-navItemActive`\r\n        }else{\r\n            className += ` lc-navItemInactive`\r\n        }\r\n        return (<div className={className} onClick={()=>{\r\n            this.props.preview.changeTab(this)\r\n        }}>\r\n            {this.props.title}\r\n        </div>)\r\n    }\r\n}\r\n\r\nlet emptyClasses\r\nclass PresenceErrorCatcher extends React.Component {\r\n    componentDidCatch(err, errInfo){\r\n        console.error(err, errInfo)\r\n        this.setState({\r\n            error: true\r\n        })\r\n    }\r\n    render(){\r\n        if(!this.state){\r\n            this.state = {\r\n                error: false\r\n            }\r\n        }\r\n        if(!this.state.error){\r\n            try{\r\n                const preview = new this.props.preview(this.props.props)\r\n                preview.setState(this.props.state)\r\n                return preview.render()\r\n            }catch(err){\r\n                console.error(err)\r\n                this.state.error = true\r\n                return this.render()\r\n            }\r\n        }else{\r\n            emptyClasses = emptyClasses || BDV2.WebpackModules.find(e => e.emptyStateImage && e.emptyState)\r\n            if(!emptyClasses){\r\n                Utils.showToast(\"An error occured. Please check the console for more informations.\")\r\n                return null\r\n            }\r\n            return <div style={{\r\n                margin: \"20px\"\r\n            }}>\r\n                <div style={{\r\n                    backgroundColor: \"var(--background-primary)\", \r\n                    padding: \"30px 30px\", \r\n                    borderRadius: \"8px\"\r\n                }} className={`lc-tab-box-shadow ${emptyClasses.emptyState}`}>\r\n                    <div className={emptyClasses.emptyStateImage} style={{\r\n                        marginTop: \"20px\"\r\n                    }}>\r\n\r\n                    </div>\r\n                    <div className={emptyClasses.emptyStateHeader}>An error occured</div>\r\n                    <p className={emptyClasses.emptyStateSubtext}>\r\n                        Please check the console for more informations. Join our ­\r\n                        <a className={`${BDV2.anchorClasses.anchor} ${BDV2.anchorClasses.anchorUnderlineOnHover}`} role=\"button\" tabindex={0} onClick={() => {\r\n                            BDV2.joinLC()\r\n                        }}>\r\n                            support server\r\n                        </a>\r\n                        ­ for help.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        }\r\n    }\r\n}\r\n\r\nlet popoutModules\r\nlet UserPopoutComponent\r\nlet PopoutProps\r\nclass Popout extends React.Component {\r\n    get modules(){\r\n        return popoutModules || (popoutModules = [\r\n            BDV2.WebpackModules.find(e => e.default && e.default.displayName === \"UserPopout\"),\r\n            BDV2.WebpackModules.find(e => e.default && e.default.getCurrentUser)\r\n        ])\r\n    }\r\n\r\n    getComponent(){\r\n        let [\r\n            UserPopout,\r\n            userModule\r\n        ] = this.modules\r\n\r\n        const user = userModule.default.getCurrentUser()\r\n        return React.createElement(() => {\r\n            let render1 = UserPopout.default({\r\n                userId: user.id, \r\n                guildId: null, \r\n                channelId: null, \r\n                disableUserProfileLink: true\r\n            })\r\n            UserPopoutComponent = render1.type\r\n            PopoutProps = render1.props\r\n            return this.render()\r\n        }, null)\r\n    }\r\n\r\n    render(){\r\n        if(!UserPopoutComponent)return this.getComponent()\r\n        let [\r\n            _UserPopout,\r\n            userModule\r\n        ] = this.modules\r\n\r\n        const user = userModule.default.getCurrentUser()\r\n\r\n        let data = Object.assign({}, defaultRPC, this.props.preview.props.settings.state.data)\r\n        const activity = (function(){\r\n            if(!this.game)return null\r\n            let game = {\r\n                name: this.game.name || defaultRPC.name,\r\n                application_id: this.game.application_id || defaultRPC.application_id,\r\n                details: this.game.details || undefined,\r\n                state: this.game.state || undefined,\r\n                timestamps: this.game[\"timestamps.start\"] ? {\r\n                    start: this.game[\"timestamps.start\"]\r\n                } : undefined,\r\n                assets: this.game[\"assets.large\"] ? {\r\n                    large_image: this.game[\"assets.large\"],\r\n                    small_image: this.game[\"assets.small\"] || undefined\r\n                } : undefined,\r\n                type: 0\r\n            }\r\n            return game\r\n        }).call({\r\n            game: data\r\n        })\r\n\r\n        const popout = new UserPopoutComponent(Object.assign({}, PopoutProps, {\r\n            activity: activity,\r\n            userId: user.id\r\n        })).render().props.children // bypass tracking\r\n\r\n        // remove the stop propagation shit.\r\n        const container = <div {...window.Lightcord.Api._.excludeProperties(popout.props, [\"onClick\", \"onContextMenu\"])} />\r\n\r\n        return <div className=\"lc-userPopout lc-tab-box-shadow\">\r\n            {container}\r\n        </div>\r\n    }\r\n}\r\n\r\nlet profileModules\r\nlet UserProfileComponent\r\nlet ProfileProps\r\nlet connectedProfileStore\r\nclass Profile extends React.Component {\r\n    get modules(){\r\n        return profileModules || (profileModules = [\r\n            BDV2.WebpackModules.find(e => e.default && e.default.displayName === \"UserProfile\"),\r\n            BDV2.WebpackModules.find(e => e.default && e.default.getCurrentUser)\r\n        ])\r\n    }\r\n\r\n    render(){\r\n        let [\r\n            UserProfile,\r\n            userModule\r\n        ] = this.modules\r\n\r\n        const user = userModule.default.getCurrentUser()\r\n        if(!UserProfileComponent){\r\n            const render1 = new UserProfile.default({\r\n                user: user\r\n            }).render()\r\n            connectedProfileStore = render1.type\r\n            const render2 = new render1.type(render1.props).render()\r\n            const render3 = render2.type.render(render2.props, null)\r\n            const render4 = new render3.type(render3.props).render()\r\n            UserProfileComponent = render4.type\r\n        }\r\n        if(!UserProfileComponent)throw new Error(`Couldn't find the UserProfileComponent component.`)\r\n\r\n        let data = Object.assign({}, defaultRPC, this.props.preview.props.settings.state.data)\r\n        const activity = (function(){\r\n            if(!this.game)return null\r\n            let game = {\r\n                name: this.game.name || defaultRPC.name,\r\n                application_id: this.game.application_id || defaultRPC.application_id,\r\n                details: this.game.details || undefined,\r\n                state: this.game.state || undefined,\r\n                timestamps: this.game[\"timestamps.start\"] ? {\r\n                    start: this.game[\"timestamps.start\"]\r\n                } : undefined,\r\n                assets: this.game[\"assets.large\"] ? {\r\n                    large_image: this.game[\"assets.large\"],\r\n                    small_image: this.game[\"assets.small\"] || undefined\r\n                } : undefined,\r\n                type: 0\r\n            }\r\n            return game\r\n        }).call({\r\n            game: data\r\n        })\r\n\r\n        ProfileProps = new connectedProfileStore({\r\n            user: user,\r\n            close: () => {}\r\n        }).render().props\r\n        const profile = new UserProfileComponent(Object.assign({}, ProfileProps, {\r\n            activity: activity\r\n        })).render().props.children // bypass tracking\r\n\r\n        profile.props.style = {\r\n            width: \"auto\"\r\n        }\r\n\r\n        return <div className=\"lc-tab lc-tab-box-shadow\">\r\n            {profile}\r\n        </div>\r\n    }\r\n}","import BDV2 from \"../modules/v2\";\r\nimport V2C_SettingsTitle from \"./settingsTitle\";\r\n\r\n/**\r\n * @type {typeof import(\"react\")}\r\n */\r\nconst React = BDV2.React;\r\n\r\nlet marginModule2 = BDModules.get(e => e.defaultMarginh5)[0]\r\nlet colorModule = BDModules.get(e => e.colorStandard)[0]\r\nlet sizeModule = BDModules.get(e => e.size32)[0]\r\nlet scrollbarModule1 = BDModules.get(e => e.scrollbarGhostHairline)[0]\r\nconst GuildModule = BDModules.get(e => e.default && e.default.getGuilds)[0].default\r\nconst relationShipModule = BDModules.get(e => e.default && e.default.getRelationships)[0].default\r\nconst sessionModule = BDModules.get(e => e.default && e.default.getSessions)[0].default\r\nconst userModule = BDModules.get(e => e.default && e.default.getCurrentUser)[0].default\r\n\r\nexport default class V2C_AccountInfos extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        if(!marginModule2)marginModule2 = BDModules.get(e => e.defaultMarginh5)[0]\r\n        if(!colorModule)colorModule = BDModules.get(e => e.colorStandard)[0]\r\n        if(!sizeModule)sizeModule = BDModules.get(e => e.size32)[0]\r\n        return [\r\n            <V2C_SettingsTitle text=\"Account Infos\"/>,\r\n            <div>\r\n                <h5 className={colorModule.colorStandard+\" \"+sizeModule.size14+\" \"+marginModule2.h5+\" \"+marginModule2.defaultMarginh5}>\r\n                    Profile\r\n                </h5>\r\n                <CodeContent content={this.getProfileValue()} language=\"diff\" />\r\n                <h5 className={colorModule.colorStandard+\" \"+sizeModule.size14+\" \"+marginModule2.h5+\" \"+marginModule2.defaultMarginh5}>\r\n                    Statistics\r\n                </h5>\r\n                <CodeContent content={this.getStatistics()} language=\"diff\" />\r\n                <h5 className={colorModule.colorStandard+\" \"+sizeModule.size14+\" \"+marginModule2.h5+\" \"+marginModule2.defaultMarginh5}>\r\n                    Connected Sessions\r\n                </h5>\r\n                <CodeContent content={this.getSessionValue()} language=\"diff\" />\r\n            </div>,\r\n            <div className={BDModules.get(e => e.marginBottom20)[0].marginBottom20}></div>\r\n        ]\r\n    }\r\n\r\n    getSessionValue(){\r\n        const sessionsRaw = sessionModule.getSessions()\r\n        const sessions = Object.keys(sessionsRaw).filter(e => e !== \"all\").map(e => sessionsRaw[e])\r\n\r\n        if(sessions.length === 0)return \"- No session detected. Please try in a few seconds\"\r\n        \r\n        return sessions.map(e => {\r\n            return `+ id: ${e.sessionId}\r\n+ os: ${e.clientInfo.os[0].toUpperCase()+e.clientInfo.os.slice(1)}\r\n+ client: ${e.clientInfo.client}\r\n+ status: ${e.status}\r\n+ Activities: ${e.activities.length}`\r\n        }).join(\"\\n\"+\"-\".repeat(38)+\"\\n\")\r\n    }\r\n\r\n    getProfileValue(){\r\n        const user = userModule.getCurrentUser()\r\n        /**\r\n         * @type {Date}\r\n         */\r\n        const createdAt = user.createdAt\r\n\r\n        let avatarURL = user.avatarURL\r\n        if(user.avatar && user.avatar.startsWith(\"a_\")){\r\n            avatarURL = user.getAvatarURL(\"gif\")\r\n        }\r\n\r\n        if(avatarURL.startsWith(\"/\")){\r\n            avatarURL = \"https://discord.com\"+avatarURL\r\n        }\r\n        if(avatarURL.endsWith(\"?size=128\")){\r\n            avatarURL = avatarURL.replace(\"?size=128\", \"?size=4096\")\r\n        }\r\n\r\n        return `+ Username: ${user.username}\r\n+ Discriminator: ${user.discriminator}\r\n+ Tag: ${user.tag}\r\n+ ID: ${user.id}\r\n+ Avatar: ${user.avatar}\r\n+ Avatar URL: ${avatarURL}\r\n+ Creation Date: ${(createdAt.getDate()).toString().padStart(2, \"0\")}/${(createdAt.getMonth()+1).toString().padStart(2, \"0\")}/${(createdAt.getFullYear()).toString().padStart(2, \"0\")} ${createdAt.getHours().toString().padStart(2, \"0\")}h ${createdAt.getMinutes().toString().padStart(2, \"0\")}min ${createdAt.getSeconds()}s\r\n+ Flags: ${user.flags}\r\n+ Has Nitro: ${user.hasPremiumSubscription ? \"Yes\" : \"No\"}\r\n- Email: ${user.email}\r\n- 2FA: ${user.mfaEnabled ? \"Yes\" : \"No\"}\r\n- Has Been On Mobile: ${user.mobile ? \"Yes\" : \"No\"}\r\n- Phone: ${user.phone || \"None\"}\r\n- Verified: ${user.verified}\r\n- Can See NSFW Channels: ${user.nsfwAllowed}`;\r\n    }\r\n\r\n    getStatistics(){\r\n\r\n        const guilds = Object.values(GuildModule.getGuilds())\r\n        const relations = Object.keys(relationShipModule.getRelationships())\r\n        const friends = relations.filter(e => relationShipModule.isFriend(e))\r\n        const blocked = relations.filter(e => relationShipModule.isBlocked(e))\r\n\r\n        return `+ Server Count: ${guilds.length} servers\r\n+ Relations: ${relations.length} relations\r\n+ Friends Count: ${friends.length} friends\r\n- Blocked Users Count: ${blocked.length} blocked users`\r\n    }\r\n}\r\n\r\n\r\nlet hightlightJS = BDModules.get(e => e.highlight)[0]\r\nlet messageModule1 = BDModules.get(e => e.markup)[0]\r\nlet messageModule2 = BDModules.get(e => e.messageContent)[0]\r\n\r\nclass CodeContent extends React.Component {\r\n    render(){\r\n        if(!messageModule1)messageModule1 = BDModules.get(e => e.markup)[0]\r\n        if(!messageModule2)messageModule2 = BDModules.get(e => e.messageContent)[0]\r\n        if(!scrollbarModule1)scrollbarModule1 = BDModules.get(e => e.scrollbarGhostHairline)[0]\r\n        if(!hightlightJS)hightlightJS = BDModules.get(e => e.listLanguages)[0]\r\n        return (<div class={`${messageModule1.markup} ${messageModule2.messageContent}`}>\r\n            <pre>\r\n                <code class={`${scrollbarModule1.scrollbarGhostHairline} hljs`} dangerouslySetInnerHTML={{__html: hightlightJS.highlight(this.props.language, this.props.content).value}}>\r\n\r\n                </code>\r\n            </pre>\r\n            <div className={BDModules.get(e => e.marginBottom8)[0].marginBottom8}></div>\r\n        </div>)\r\n    }\r\n}","import Utils from \"./utils\"\r\n\r\nconst dispatcher = window.Lightcord.DiscordModules.dispatcher\r\nconst ChannelModule = BDModules.get(e => e.default && e.default.getChannel && e.default.hasChannel)[0].default\r\nlet relationShipModule = BDModules.get(e => e.default && e.default.addRelationship)[0]\r\nlet DMModule = BDModules.get(e => e.default && e.default.closePrivateChannel)[0]\r\n\r\nconst blocked = {}\r\n\r\nlet userModule = BDModules.get(e => e.default && e.default.getCurrentUser)[0]\r\nfunction getCurrentUser(){\r\n    if(userModule)return userModule.default.getCurrentUser()\r\n    return null\r\n}\r\n\r\nexport default new class AntiBotDM {\r\n    constructor(){\r\n        this.antiDM = this.antiDM.bind(this)\r\n        this.enabled = false\r\n    }\r\n\r\n    enable(){\r\n        if(this.enabled)return\r\n        this.enabled = true\r\n\r\n        dispatcher.subscribe(\"MESSAGE_CREATE\", this.antiDM)\r\n    }\r\n\r\n    disable(){\r\n        if(!this.enabled)return\r\n        this.enabled = false\r\n\r\n        dispatcher.unsubscribe(\"MESSAGE_CREATE\", this.antiDM)\r\n    }\r\n\r\n    antiDM(ev){\r\n        if(!ev.message.author.bot)return\r\n        if(ev.message.author.id === getCurrentUser().id)\r\n        if(ev.message.guild_id)return\r\n\r\n        const channel = ChannelModule.getChannel(ev.message.channel_id)\r\n        if(!channel)return // might be broken\r\n\r\n        if(channel.type !== 1)return\r\n\r\n        if(blocked[ev.message.author.id])return // If the user unblock the bot, Don't block it again.\r\n\r\n        if(scanMessage(ev.message)){\r\n            blocked[ev.message.author.id] = true\r\n            Utils.showToast(`[AdBlock]: Blocked ${ev.message.author.username}#${ev.message.author.discriminator}`, {\r\n                \"type\": \"warning\"\r\n            })\r\n            if(!relationShipModule)relationShipModule = BDModules.get(e => e.default && e.default.addRelationship)[0]\r\n            relationShipModule.default.addRelationship(ev.message.author.id, {\r\n                location: \"ContextMenu\"\r\n            }, 2)\r\n            if(!DMModule)DMModule = BDModules.get(e => e.default && e.default.closePrivateChannel)[0]\r\n            DMModule.default.closePrivateChannel(channel.id, false)\r\n        }\r\n    }\r\n}\r\n\r\nfunction scanMessage(message){\r\n    if(/(discord\\.gg|discord\\.com\\/invite\\/|discordapp\\.com\\/invite\\/)/g.test(message.content))return true\r\n    if(EmbedsContains(message, \"discord.gg/\") || EmbedsContains(message, \"discord.com/invite/\") || EmbedsContains(message, \"discordapp.com/invite/\"))return true\r\n\r\n    return false\r\n}\r\nfunction EmbedsContains(message, search){\r\n    let embeds = message.embeds || []\r\n    if(embeds.length === 0)return false\r\n    return embeds.map(embed => {\r\n        if(embed.type !== \"rich\")return false\r\n        if((embed.title || \"\").includes(search))return true\r\n        if((embed.description || \"\").includes(search))return true\r\n        if(((embed.footer || \"\") && embed.footer.text || \"\").includes(search))return true\r\n        if((embed.fields || []).map(e => {\r\n            return e.value.includes(search) || e.name.includes(search)\r\n        }).includes(true))return true\r\n        return false\r\n\r\n    }).includes(true)\r\n}","/**\r\n * Credits to @hellbound1337 on github for the css\r\n */\r\n\r\nimport DOMTools from \"./domtools\"\r\nimport Utils from \"./utils\"\r\n\r\nlet selectors\r\nconst removeDa = Utils.removeDa\r\nfunction getSelectors(){\r\n    let standardSidebarView = BDModules.get(e => e.standardSidebarView)[0]\r\n    if(!standardSidebarView)return null\r\n    let defaultClassName = removeDa(standardSidebarView.standardSidebarView)\r\n    let selects = []\r\n    let userSettingsAccount = BDModules.get(e => e.userSettingsAccount)[0]\r\n    const children = BDModules.get(e => typeof e.children === \"string\")[0]\r\n    selects.push(`#app-mount .${defaultClassName} .payment-info .${removeDa(BDModules.get(e => e.description && typeof e.description === \"string\" && e.description.includes(\"formText\"))[0].description)}`)\r\n    selects.push(`#app-mount .${defaultClassName} .${removeDa(BDModules.get(e => e.paymentSourceRow)[0].paymentSourceRow)} .${removeDa(BDModules.get(e => e.subText && e.descriptionWrapper)[0].subText)}`)\r\n    if(userSettingsAccount){\r\n        selects.push(`#app-mount .${defaultClassName} .${removeDa(userSettingsAccount.userSettingsAccount)} div:nth-child(2)>div:nth-child(2)>.${removeDa(BDModules.get(e => e.viewBody)[0].viewBody)}`)\r\n        selects.push(`.${removeDa(userSettingsAccount.userSettingsSecurity)} .${removeDa(children.children)} > div:nth-child(2)`)\r\n    }\r\n    console.log(selects)\r\n    return selects\r\n}\r\n\r\nexport default new class BlurPrivate {\r\n    constructor(){\r\n        this.enabled = false\r\n    }\r\n\r\n    enable(){\r\n        if(this.enabled)return\r\n        this.enabled = true\r\n        selectors = selectors || getSelectors()\r\n\r\n        if(!selectors)console.error(new Error(\"Couldn't find selectors to blur personnal informations.\"))\r\n        DOMTools.addStyle(\"blurPrivate\", `\r\n${selectors.join(\", \")} {\r\n    transition: all 150ms cubic-bezier(.55,.085,.68,.53);\r\n    filter: blur(4px);\r\n    opacity: .8;\r\n}\r\n\r\n${selectors.map(e => e+\":hover\").join(\", \")}  {\r\n    transition: all 150ms cubic-bezier(.55,.09,.68,.53);\r\n    filter: none;\r\n    opacity: 1;\r\n}`)\r\n    }\r\n\r\n    disable(){\r\n        if(!this.enabled)return\r\n        this.enabled = false\r\n        DOMTools.removeStyle(\"blurPrivate\")\r\n    }\r\n}","export default new class DisableTyping {\r\n    constructor(){\r\n        window.Lightcord.Api.ensureExported(e => e.default && e.default.startTyping)\r\n        .then(typingModule => {\r\n            let self = this\r\n            const startTyping = typingModule.default.startTyping\r\n            typingModule.default.startTyping = function(){\r\n                if(self.disabled)return startTyping.call(this, ...arguments)\r\n            }\r\n            const stopTyping = typingModule.default.stopTyping\r\n            typingModule.default.stopTyping = function(){\r\n                if(self.disabled)return stopTyping.call(this, ...arguments)\r\n            }\r\n            this.disabled = true\r\n        })\r\n        window.Lightcord.BetterDiscord.DisableTyping = this\r\n    }\r\n\r\n    disable(){\r\n        this.disabled = true\r\n    }\r\n\r\n    enable(){\r\n        this.disabled = false\r\n    }\r\n}","// Good luck to read my code, Even me can't read it properly.\r\n\r\nimport { stat } from \"fs\"\r\nimport { uuidv4 } from \"../modules/distant\"\r\nimport webpackModules from \"../modules/webpackModules\"\r\nimport { remote } from \"electron\"\r\nimport MarginTop from \"./margintop\"\r\n\r\nlet formModule\r\nexport default class ApiPreview extends React.PureComponent {\r\n    constructor(){\r\n        super(...arguments)\r\n        this.state = {\r\n            states: []\r\n        }\r\n    }\r\n\r\n    render(){\r\n        if(!formModule)formModule = webpackModules.find(e => e.FormSection)\r\n        /** \r\n         * @type {Function[]}\r\n         */\r\n        const allComponents = [...new Set(Object.keys(window.Lightcord.Api.Components).map(e => {\r\n            return Object.keys(window.Lightcord.Api.Components[e]).map(k => window.Lightcord.Api.Components[e][k])\r\n        }).flat())]\r\n        return [\r\n            <formModule.FormSection tag=\"h2\" title=\"Lightcord's Api Availlable components\">\r\n                <formModule.FormText type=\"description\" className=\"\" selectable={false}>\r\n                    These components are here for the plugin devs. They can quickly embed any component below with this panel.\r\n                    <div style={{marginTop: \"20px\"}}></div>\r\n                    <Lightcord.Api.Components.general.AlertBox type=\"info\">All these components have error handling. If you want none, add `.original` after the component path.</Lightcord.Api.Components.general.AlertBox>\r\n                    <Lightcord.Api.Components.general.AlertBox type=\"warn\">We do not recommend modifying these component with plugins. Only do this if you know what you are doing.</Lightcord.Api.Components.general.AlertBox>\r\n                </formModule.FormText>\r\n                <MarginTop></MarginTop>\r\n                <Lightcord.Api.Components.inputs.Button color=\"brand\" look=\"outlined\" size=\"medium\" hoverColor=\"green\" onClick={() => {\r\n                    remote.shell.openExternal(\"https://lightcord.deroku.xyz/LightcordApi/docs\")\r\n                }} wrapper={false}>\r\n                    Documentation\r\n                </Lightcord.Api.Components.inputs.Button>\r\n            </formModule.FormSection>,\r\n            allComponents.map(comp => {\r\n                const compName = comp.displayName || comp.name\r\n                const compPath = `Lightcord.Api.Components.${Object.keys(window.Lightcord.Api.Components).find(e => window.Lightcord.Api.Components[e][compName])}.${compName}`\r\n                return <ComponentPreview key={compPath} comp={comp} />\r\n            })\r\n        ]\r\n    }\r\n\r\n    get renders(){\r\n\r\n    }\r\n}\r\n\r\nclass ComponentPreview extends React.Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            tab: \"preview\",\r\n            elem: props.comp,\r\n            options: {}\r\n        }\r\n    }\r\n\r\n    render(){\r\n        const comp = this.props.comp\r\n        let AllPreviews = []\r\n        if(comp.AllPreviews)AllPreviews = comp.AllPreviews\r\n        let state = this.state\r\n        let getProps = () => {\r\n            let final = {}\r\n            AllPreviews.forEach(category => {\r\n                final[Object.keys(category[0])[0]] = category[0][Object.keys(category[0])[0]]\r\n            })\r\n            Object.keys(state.options).forEach(key => {\r\n                final[key] = AllPreviews.find(e => e.find(e => e[key]))[state.options[key]][key]\r\n            })\r\n            return final\r\n        }\r\n        let renderPreview = () => {\r\n            return <div style={{margin: \"20px\"}}>\r\n                <div style={{\r\n                    backgroundColor: \"var(--background-secondary)\", \r\n                    padding: \"30px 30px\", \r\n                    borderRadius: \"8px\"\r\n                }} className=\"lc-tab-box-shadow\">\r\n                    {React.createElement(comp, getProps())}\r\n                </div>\r\n            </div>\r\n        }\r\n        let renderCode = () => {\r\n            return <div style={{margin: \"20px\"}}>\r\n                <div style={{\r\n                    backgroundColor: \"var(--background-secondary)\", \r\n                    padding: \"30px 30px\", \r\n                    borderRadius: \"8px\"\r\n                }} className=\"lc-tab-box-shadow\">\r\n                    <window.Lightcord.Api.Components.general.SettingSubTitle>\r\n                        JSX\r\n                    </window.Lightcord.Api.Components.general.SettingSubTitle>\r\n                    <window.Lightcord.Api.Components.general.ErrorCatcher>\r\n                        {React.createElement(() => {\r\n                            return <window.Lightcord.Api.Components.general.CodeBlock language=\"jsx\" content={generateCode(\"jsx\")}/>\r\n                        })}\r\n                    </window.Lightcord.Api.Components.general.ErrorCatcher>\r\n                    <window.Lightcord.Api.Components.general.SettingSubTitle>           \r\n                        React\r\n                    </window.Lightcord.Api.Components.general.SettingSubTitle>\r\n                    <window.Lightcord.Api.Components.general.ErrorCatcher>\r\n                        {React.createElement(() => {\r\n                            return <window.Lightcord.Api.Components.general.CodeBlock language=\"js\" content={generateCode(\"react\")}/>\r\n                        })}\r\n                    </window.Lightcord.Api.Components.general.ErrorCatcher>\r\n                </div>\r\n            </div>\r\n        }\r\n        let getStrForProp = (value, compPath, lang) => {\r\n            if(typeof value === \"string\"){\r\n                return value\r\n            }else if(typeof value === \"boolean\"){\r\n                return String(value)\r\n            }else if(typeof value === \"function\"){\r\n                return value.toString()\r\n            }else if(typeof value === \"object\"){\r\n                if(value && value.$$typeof && (value.$$typeof === Symbol.for(\"react.element\") || value.$$typeof === 0xeac7)){\r\n                    if(compPath === \"Lightcord.Api.Components.general.Tabs\"){\r\n                        if(lang === \"react\"){\r\n                            return `React.createElement(\"div\", {style: {\r\nmarginTop: \"20px\", marginBottom: \"20px\"\r\n}},\r\nReact.createElement(\"div\", {style: {\r\nbackgroundColor: \"var(--background-secondary)\",\r\npadding: \"30px 30px\",\r\nborderRadius: \"8px\"\r\n}, className: \"lc-tab-box-shadow\" },\r\nReact.createElement(Lightcord.Api.Components.general.Title, null, \"Preview tabs\")\r\n)\r\n)`\r\n                        }else if(lang === \"jsx\"){\r\n                            return `<div style={{\r\nmarginTop: \"20px\", marginBottom: \"20px\"\r\n}}>\r\n<div style={{\r\n    backgroundColor: \"var(--background-secondary)\", \r\n    padding: \"30px 30px\", \r\n    borderRadius: \"8px\"\r\n}} className=\"lc-tab-box-shadow\">\r\n    <Lightcord.Api.Components.general.Title>Preview tabs</Lightcord.Api.Components.general.Title>\r\n</div>\r\n</div>`\r\n                        }\r\n                    }\r\n                    return \"Your components here.\"\r\n                }\r\n                return JSON.stringify(value, null, \"    \")\r\n            }else if(typeof value === \"number\"){\r\n                return String(value)\r\n            }\r\n            return String(value)\r\n        }\r\n        let generateCode = function(lang){ // code formatting is hard\r\n            const compName = comp.displayName || comp.name\r\n            let categories = Object.keys(window.Lightcord.Api.Components)\r\n            const compCategory = categories.find(e => window.Lightcord.Api.Components[e][compName])\r\n            const compPath = `Lightcord.Api.Components.${compCategory}.${compName}`\r\n            const props = getProps()\r\n\r\n            if(lang === \"jsx\"){\r\n                let propStrings = []\r\n                let childrenProp = null\r\n                Object.keys(props).forEach(key => {\r\n                    if(key == \"children\"){\r\n                        childrenProp = getStrForProp(props[key], compPath, lang)\r\n                    }else{\r\n                        let str = key+\"=\"\r\n                        if(typeof props[key] === \"string\"){\r\n                            str += JSON.stringify(props[key])\r\n                        }else{\r\n                            str += `{${getStrForProp(props[key], compPath, lang)}}`\r\n                        }\r\n                        propStrings.push(str)\r\n                    }\r\n                })\r\n                let openTag\r\n                if(childrenProp){\r\n                    openTag = `<${compPath} ${propStrings.join(\" \")}>`\r\n                    let closeTag = `</${compPath}>`\r\n                    return `${openTag}\\n    ${childrenProp}\\n${closeTag}`\r\n                }else{\r\n                    openTag = `<${compPath} ${propStrings.join(\" \")}/>`\r\n                    return openTag\r\n                }\r\n            }else if(lang === \"react\"){\r\n                let children = props.children || null\r\n                delete props.children\r\n                if(children && children.$$typeof && (children.$$typeof === Symbol.for(\"react.element\") || children.$$typeof === 0xeac7)){\r\n                    children = getStrForProp(children, compPath, lang)\r\n                }\r\n                let propStrings = []\r\n                Object.keys(props).forEach(key => {\r\n                    let visibleKey = /[^\\w\\d_]/g.test(key) ? JSON.stringify(key) : key\r\n                    let str = visibleKey+\": \"\r\n                    if(typeof props[key] === \"string\"){\r\n                        str += JSON.stringify(props[key])\r\n                    }else{\r\n                        str += getStrForProp(props[key], compPath, lang).split(\"\\n\").map((str, i) => {\r\n                            if(i === 0)return str\r\n                            return \"    \" + str\r\n                        }).join(\"\\n\")\r\n                    }\r\n                    propStrings.push(str)\r\n                })\r\n                let propObject = \"{\"\r\n                if(propStrings.length){\r\n                    propStrings.forEach((str, i) => {\r\n                        let isLast = i === propStrings.length - 1\r\n                        let isFirst = i === 0\r\n                        if(!isFirst){\r\n                            propObject += \",\"\r\n                        }\r\n                        propObject += \"\\n    \"\r\n                        propObject += str\r\n                        if(isLast){\r\n                            propObject +=\"\\n}\"\r\n                        }\r\n                    })\r\n                }else{\r\n                    propObject += \"}\"\r\n                }\r\n                let childrenData = typeof children === \"string\" && children.startsWith(\"React.createElement\") ? children : JSON.stringify(children)\r\n                return `React.createElement(${compPath}, ${propObject}, ${childrenData})`\r\n            }\r\n        }\r\n        let help = comp.help || {}\r\n        let info = help.info ? <window.Lightcord.Api.Components.general.AlertBox type=\"info\">\r\n            {help.info}\r\n        </window.Lightcord.Api.Components.general.AlertBox> : null\r\n        let warn = help.warn ? <window.Lightcord.Api.Components.general.AlertBox type=\"warn\">\r\n            {help.warn}\r\n        </window.Lightcord.Api.Components.general.AlertBox> : null\r\n        let danger = help.danger ? <window.Lightcord.Api.Components.general.AlertBox type=\"danger\">\r\n            {help.danger}\r\n        </window.Lightcord.Api.Components.general.AlertBox> : null\r\n        let error = help.error ? <window.Lightcord.Api.Components.general.AlertBox type=\"error\">\r\n            {help.error}\r\n        </window.Lightcord.Api.Components.general.AlertBox> : null\r\n        let success = help.success ? <window.Lightcord.Api.Components.general.AlertBox type=\"success\">\r\n            {help.success}\r\n        </window.Lightcord.Api.Components.general.AlertBox> : null\r\n        return (<div>\r\n            <window.Lightcord.Api.Components.general.SettingsTitle>\r\n                {comp.displayName || comp.name}\r\n            </window.Lightcord.Api.Components.general.SettingsTitle>\r\n            {info}\r\n            {success}\r\n            {warn}\r\n            {error}\r\n            {danger}\r\n            {AllPreviews.map(category => {\r\n                if(category[0].onClick)return null\r\n                if(category[0].text)return null\r\n                if(category[0].children)return null\r\n                if(category.length === 1)return null\r\n                \r\n                let key = Object.keys(category[0])[0]\r\n                return [\r\n                    <window.Lightcord.Api.Components.general.SettingSubTitle>\r\n                        {key}\r\n                    </window.Lightcord.Api.Components.general.SettingSubTitle>,\r\n                    <window.Lightcord.Api.Components.inputs.Dropdown options={category.map((e, index) => {\r\n                        return {\r\n                            value: \"opt-\"+index,\r\n                            label: JSON.stringify(e[Object.keys(e)[0]])\r\n                        }\r\n                    })} value={\"opt-\"+(state.options[key] || \"0\")} onChange={(value) => {\r\n                        this.setState({\r\n                            options: Object.assign({}, state.options, {\r\n                                [key]: (value.value || \"0\").replace(\"opt-\", \"\")\r\n                            })\r\n                        })\r\n                    }} searchable={true}/>,\r\n                    <div style={{marginBottom: \"8px\"}}></div>\r\n                ]\r\n            })}\r\n            <window.Lightcord.Api.Components.general.Tabs tabs={[{label: \"Preview\", id: \"preview\"}, {label: \"Code\", id: \"code\"}]} \r\n                active={state.tab} children={state.tab === \"preview\" ? renderPreview() : renderCode()} onChange={(tab) => {\r\n                    this.setState({\r\n                        tab\r\n                    })\r\n                }}/>\r\n        </div>)\r\n    }\r\n}","{/* <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"white\" width=\"18px\" height=\"18px\">\r\n    <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\r\n    <path d=\"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z\"/>\r\n</svg> */}\r\n\r\nimport BDV2 from \"../../modules/v2\";\r\n\r\nconst React = BDV2.React;\r\n\r\nexport default class History extends React.Component {\r\n    render() {\r\n        const size = this.props.size || \"18px\";\r\n        return <svg viewBox=\"0 0 24 24\" fill=\"var(--text-normal)\" className={this.props.className || \"\"} style={{width: size, height: size}} onClick={this.props.onClick}>\r\n            <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\r\n            <path d=\"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z\"/>\r\n        </svg>;\r\n    }\r\n}","import { themeCookie } from \"../0globals\"\r\nimport bdEvents from \"./bdEvents\"\r\nimport DOM from \"./domtools\"\r\n\r\nexport default new class popoutWindow {\r\n    constructor(){\r\n        /**\r\n         * @type {Map<string, Window>}\r\n         */\r\n        this.windows = new Map()\r\n        this.enabled = false\r\n        this.init()\r\n    }\r\n\r\n    async init(){\r\n        let popoutModule = await window.Lightcord.Api.ensureExported(e => e.default && e.default.getWindow)\r\n        window.Lightcord.DiscordModules.dispatcher.subscribe(\"POPOUT_WINDOW_OPEN\", (ev) => {\r\n            setImmediate(() => {\r\n                /**\r\n                 * @type {Window}\r\n                 */\r\n                const window = popoutModule.default.getWindow(ev.key)\r\n                this.windows.set(ev.key, window)\r\n\r\n                let classList = window.document.body.classList\r\n                classList.add(\"window-popout\")\r\n                classList.add(\"lightcord\")\r\n                classList.add(\"lightcord\")\r\n\r\n                this.update(ev.key)\r\n            })\r\n        })\r\n        window.Lightcord.DiscordModules.dispatcher.subscribe(\"POPOUT_WINDOW_CLOSE\", (ev) => {\r\n            setImmediate(() => {\r\n                this.windows.delete(ev.key)\r\n            })\r\n        })\r\n        bdEvents.on(\"theme-enabled\", () => {\r\n            this.update()\r\n        })\r\n        bdEvents.on(\"theme-disabled\", () => {\r\n            this.update()\r\n        })\r\n        bdEvents.on(\"theme-reloaded\", () => {\r\n            this.update()\r\n        })\r\n        bdEvents.on(\"theme-unloaded\", () => {\r\n            this.update()\r\n        })\r\n        bdEvents.on(\"theme-loaded\", () => {\r\n            this.update()\r\n        })\r\n    }\r\n\r\n    enable(){\r\n        this.enabled = true\r\n        this.update()\r\n    }\r\n\r\n    disable(){\r\n        this.enabled = false\r\n        this.update()\r\n    }\r\n\r\n    update(key){\r\n        if(!this.windows.size)return\r\n        if(!this.enabled){\r\n            return this.removeThemes(key)\r\n        }else{\r\n            return this.applyThemes(key)\r\n        }\r\n    }\r\n\r\n    removeThemes(key){\r\n        if(this.enabled)return\r\n        if(key){\r\n            let window = this.windows.get(key)\r\n            if(!window)return\r\n            let document = window.document\r\n\r\n            for(let style of document.querySelectorAll(\"style[data-lightcord-theme=true]\")){\r\n                style.remove()\r\n            }\r\n        }else{\r\n            for(let key of this.windows.keys()){\r\n                this.removeThemes(key)\r\n            }\r\n        }\r\n    }\r\n\r\n    applyThemes(key){\r\n        if(!this.enabled)return\r\n        if(key){\r\n            let window = this.windows.get(key)\r\n            if(!window)return\r\n            let document = window.document\r\n\r\n            for(let style of document.querySelectorAll(\"style[data-lightcord-theme=true]\")){\r\n                style.setAttribute(\"will-remove\", \"true\")\r\n            }\r\n\r\n            Object.keys(bdthemes)\r\n            .forEach(themeName => {\r\n                if(!themeCookie[themeName])return // theme disabled\r\n                const theme = bdthemes[themeName]\r\n                if(!theme)return //:shrug:\r\n\r\n                let existing = document.querySelector(\"style[data-lightcord-theme=true]#\"+DOM.escapeID(theme.id))\r\n                if(existing){\r\n                    existing.innerHTML = unescape(theme.css)\r\n                    existing.removeAttribute(\"will-remove\")\r\n                }else{\r\n                    const style = document.createElement(\"style\")\r\n                    style.id = DOM.escapeID(theme.id)\r\n                    style.innerHTML = unescape(theme.css)\r\n                    style.setAttribute(\"data-lightcord-theme\", \"true\")\r\n                    document.head.append(style)\r\n                }\r\n            })\r\n\r\n            for(let style of document.querySelectorAll(\"style[will-remove=true]\")){\r\n                style.remove()\r\n            }\r\n        }else{\r\n            for(let key of this.windows.keys()){\r\n                this.applyThemes(key)\r\n            }\r\n        }\r\n    }\r\n}","import {settings, settingsCookie, settingsRPC, lightcordSettings} from \"../0globals\";\r\nimport DataStore from \"./dataStore\";\r\nimport V2_SettingsPanel_Sidebar from \"./settingsPanelSidebar\";\r\nimport Utils from \"./utils\";\r\nimport BDV2 from \"./v2\";\r\nimport ContentManager from \"./contentManager\";\r\nimport coloredText from \"./coloredText\";\r\nimport tfHour from \"./24hour\";\r\nimport DOM from \"./domtools\";\r\n\r\nimport publicServersModule from \"./publicServers\";\r\nimport voiceMode from \"./voiceMode\";\r\nimport ClassNormalizer from \"./classNormalizer\";\r\nimport dMode from \"./devMode\";\r\n\r\nimport SectionedSettingsPanel from \"../ui/sectionedSettingsPanel\";\r\nimport CssEditor from \"../ui/cssEditor\";\r\nimport CardList from \"../ui/addonlist\";\r\nimport V2C_PresenceSettings from \"../ui/presenceSettings\";\r\nimport CustomRichPresence from \"./CustomRichPresence\";\r\nimport V2C_AccountInfos from \"../ui/AccountInfos\";\r\nimport { remote } from \"electron\";\r\nimport AntiAdDM from \"./AntiAdDM\";\r\nimport blurPrivate from \"./blurPrivate\";\r\nimport disableTyping from \"./disableTyping\";\r\nimport ApiPreview from \"../ui/ApiPreview\";\r\nimport Switch from \"../ui/switch\";\r\nimport MarginTop from \"../ui/margintop\";\r\nimport webpackModules from \"./webpackModules\";\r\nimport tooltipWrap from \"../ui/tooltipWrap\";\r\nimport History from \"../ui/icons/history\";\r\nimport core from \"./core\";\r\nimport popoutWindow from \"./popoutWindow\";\r\n\r\nclass BDSidebarHeader extends React.PureComponent {\r\n    render(){\r\n        let sidebarComponents = webpackModules.find(e => e.Separator && e.Header && e.Item)\r\n\r\n        const changelogButton = React.createElement(tooltipWrap, {color: \"black\", side: \"top\", text: \"Changelog\"}, \r\n            React.createElement(\"span\", {style: {float: \"right\", cursor: \"pointer\"}, className: \"bd-changelog-button\", onClick: () => {Utils.showChangelogModal(bbdChangelog);}},\r\n                React.createElement(History, {className: \"bd-icon\", size: \"16px\"})\r\n            )\r\n        );\r\n        let rendered = new sidebarComponents.Header({\r\n            children: React.createElement(\"span\", null, \"Bandaged BD\", changelogButton),\r\n            className: \"ui-tab-bar-header\"\r\n        })\r\n        return rendered\r\n    }\r\n}\r\n\r\nlet isClearingCache = false\r\n\r\nexport default new class V2_SettingsPanel {\r\n\r\n    constructor() {\r\n        this.onChange = this.onChange.bind(this);\r\n        this.updateSettings = this.updateSettings.bind(this);\r\n        this.sidebar = new V2_SettingsPanel_Sidebar();\r\n\r\n        this.registerComponents()\r\n    }\r\n\r\n    registerComponents(){\r\n        /** Lightcord */\r\n        this.sidebar.register(\"lightcord\", makeComponent(this.lightcordComponent.bind(this)))\r\n        this.sidebar.register(\"status\", makeComponent(this.PresenceComponent.bind(this)))\r\n        this.sidebar.register(\"accountinfo\", makeComponent(this.AccountInfosComponent.bind(this)))\r\n        this.sidebar.register(\"lcapipreview\", makeComponent(this.ApiPreviewComponent.bind(this)))\r\n\r\n        /* Bandaged BD */\r\n        this.sidebar.register(\"BDChangelogTitle\", makeComponent(() => {\r\n            return new BDSidebarHeader().render()\r\n        }))\r\n        this.sidebar.register(\"core\", makeComponent(this.coreComponent.bind(this)))\r\n        this.sidebar.register(\"customcss\", makeComponent(this.customCssComponent.bind(this)))\r\n        this.sidebar.register(\"plugins\", makeComponent(this.renderAddonPane(\"plugins\")))\r\n        this.sidebar.register(\"themes\", makeComponent(this.renderAddonPane(\"themes\")))\r\n    }\r\n    \r\n    get coreSettings() {\r\n        const settings = this.getSettings(\"core\");\r\n        const categories = [...new Set(settings.map(s => s.category))];\r\n        const sections = categories.map(c => {return {title: c, settings: settings.filter(s => s.category == c)};});\r\n        return sections;\r\n    }\r\n\r\n    get lightcordSettings() {\r\n        const settings = this.getSettings(\"lightcord\");\r\n        const categories = [...new Set(settings.map(s => s.category))];\r\n        const sections = categories.map(c => {return {title: c, settings: settings.filter(s => s.category == c)};});\r\n        return sections;\r\n    }\r\n\r\n    get PresenceSettings() {\r\n        return this.getSettings(\"status\")\r\n    }\r\n\r\n    getSettings(category) {\r\n        return Object.keys(settings).reduce((arr, key) => {\r\n            const setting = settings[key];\r\n            if (setting.cat === category && setting.implemented && !setting.hidden) {\r\n                setting.text = key;\r\n                arr.push(setting);\r\n            }\r\n            return arr;\r\n        }, []);\r\n    }\r\n\r\n\r\n    onChange(id, checked, sidebar) {\r\n        this.updateSettings(id, checked, sidebar);\r\n    }\r\n\r\n    updateSettings(id, enabled, sidebar) {\r\n        if(![\"lightcord-8\", \"no_window_bound\", \"enable_glasstron\", \"lightcord-10\"].includes(id))settingsCookie[id] = enabled;\r\n\r\n        if (id == \"bda-gs-2\") {\r\n            if (enabled) DOM.addClass(document.body, \"bd-minimal\");\r\n            else DOM.removeClass(document.body, \"bd-minimal\");\r\n        }\r\n\r\n        if (id == \"bda-gs-3\") {\r\n            if (enabled) DOM.addClass(document.body, \"bd-minimal-chan\");\r\n            else DOM.removeClass(document.body, \"bd-minimal-chan\");\r\n        }\r\n\r\n        if (id == \"bda-gs-1\") {\r\n            if (enabled) publicServersModule.addButton();\r\n            else publicServersModule.removeButton();\r\n        }\r\n\r\n        if (id == \"bda-gs-4\") {\r\n            if (enabled) voiceMode.start();\r\n            else voiceMode.stop();\r\n        }\r\n\r\n        if (id == \"bda-gs-5\") {\r\n            if (enabled) DOM.addClass(DOM.query(\"#app-mount\"), \"bda-dark\");\r\n            else DOM.removeClass(DOM.query(\"#app-mount\"), \"bda-dark\");\r\n        }\r\n\r\n        if (enabled && id == \"bda-gs-6\") tfHour.inject24Hour();\r\n\r\n        if (id == \"bda-gs-7\") {\r\n            if (enabled) coloredText.injectColoredText();\r\n            else coloredText.removeColoredText();\r\n        }\r\n\r\n        if (id == \"fork-ps-4\") {\r\n            if (enabled) ClassNormalizer.start();\r\n            else ClassNormalizer.stop();\r\n        }\r\n\r\n        if (id == \"fork-ps-5\") {\r\n            if (enabled) {\r\n                ContentManager.watchContent(\"plugin\");\r\n                ContentManager.watchContent(\"theme\");\r\n            }\r\n            else {\r\n                ContentManager.unwatchContent(\"plugin\");\r\n                ContentManager.unwatchContent(\"theme\");\r\n            }\r\n        }\r\n\r\n        if (id == \"fork-wp-1\") {\r\n            Utils.setWindowPreference(\"transparent\", enabled);\r\n            if (enabled) Utils.setWindowPreference(\"backgroundColor\", null);\r\n            else Utils.setWindowPreference(\"backgroundColor\", \"#2f3136\");\r\n        }\r\n\r\n\r\n        if (id == \"bda-gs-8\") {\r\n            if (enabled) dMode.startDebugListener();\r\n            else dMode.stopDebugListener();\r\n        }\r\n\r\n        if (id == \"fork-dm-1\") {\r\n            if (enabled) dMode.startCopySelector();\r\n            else dMode.stopCopySelector();\r\n        }\r\n\r\n        if (id === \"lightcord-1\") {\r\n            if (enabled) window.Lightcord.Settings.devMode = true\r\n            else window.Lightcord.Settings.devMode = false\r\n            sidebar.forceUpdate()\r\n        }\r\n        if (id === \"lightcord-2\") {\r\n            if (enabled) window.Lightcord.Settings.callRingingBeat = true\r\n            else window.Lightcord.Settings.callRingingBeat = false\r\n        }\r\n        if (id === \"lightcord-presence-1\") {\r\n            if (enabled) {\r\n                CustomRichPresence.enable()\r\n                const settingsStore = BDModules.get(e => e.default && typeof e.default === \"object\" && \"showCurrentGame\" in e.default)[0]\r\n                if(settingsStore && !settingsStore.default.showCurrentGame){\r\n                    BDModules.get(e => e.default && e.default.updateRemoteSettings)[0].default.updateRemoteSettings({\r\n                        showCurrentGame: true\r\n                    })\r\n                }\r\n            }\r\n            else CustomRichPresence.disable()\r\n        }\r\n        if (id === \"lightcord-3\") {\r\n            if (enabled) remote.getCurrentWindow().setAlwaysOnTop(true)\r\n            else remote.getCurrentWindow().setAlwaysOnTop(false)\r\n        }\r\n        if (id === \"lightcord-4\") {\r\n            if(enabled){\r\n                AntiAdDM.enable()\r\n            }else{\r\n                AntiAdDM.disable()\r\n            }\r\n        }\r\n        if (id === \"lightcord-6\") {\r\n            if(enabled){\r\n                blurPrivate.enable()\r\n            }else{\r\n                blurPrivate.disable()\r\n            }\r\n        }\r\n        if (id === \"lightcord-7\") {\r\n            if(enabled){\r\n                disableTyping.enable()\r\n            }else{\r\n                disableTyping.disable()\r\n            }\r\n        }\r\n        if (id === \"lightcord-8\"){\r\n            let appSettings = remote.getGlobal(\"appSettings\")\r\n            appSettings.set(\"isTabs\", enabled)\r\n            appSettings.save()\r\n            remote.app.relaunch()\r\n            remote.app.exit()\r\n        }\r\n        if (id === \"lightcord-9\") {\r\n            popoutWindow[enabled ? \"enable\" : \"disable\"]()\r\n        }\r\n        if (id === \"lightcord-10\"){\r\n            core.methods.NotificationsUseShim(enabled)\r\n            return\r\n        }\r\n        if (id === \"no_window_bound\"){\r\n            let appSettings = remote.getGlobal(\"appSettings\")\r\n            appSettings.set(\"NO_WINDOWS_BOUND\", enabled)\r\n\r\n            appSettings.delete(\"IS_MAXIMIZED\")\r\n            appSettings.delete(\"IS_MINIMIZED\") \r\n            appSettings.delete(\"WINDOW_BOUNDS\")\r\n            \r\n            appSettings.save()\r\n            remote.app.relaunch()\r\n            remote.app.exit()\r\n        }\r\n        if (id === \"enable_glasstron\"){\r\n            let appSettings = remote.getGlobal(\"appSettings\")\r\n            appSettings.set(\"GLASSTRON\", enabled)\r\n            appSettings.save()\r\n            remote.app.relaunch()\r\n            remote.app.exit()\r\n        }\r\n\r\n        this.saveSettings();\r\n    }\r\n\r\n    async initializeSettings() {\r\n        if (settingsCookie[\"bda-gs-2\"]) DOM.addClass(document.body, \"bd-minimal\");\r\n        if (settingsCookie[\"bda-gs-3\"]) DOM.addClass(document.body, \"bd-minimal-chan\");\r\n        if (settingsCookie[\"bda-gs-1\"]) publicServersModule.addButton();\r\n        if (settingsCookie[\"bda-gs-4\"]) voiceMode.start();\r\n        if (settingsCookie[\"bda-gs-5\"]) DOM.addClass(DOM.query(\"#app-mount\"), \"bda-dark\");\r\n        if (settingsCookie[\"bda-gs-6\"]) tfHour.inject24Hour();\r\n        if (settingsCookie[\"bda-gs-7\"]) coloredText.injectColoredText();\r\n        if (settingsCookie[\"fork-ps-4\"]) ClassNormalizer.start();\r\n        if (settingsCookie[\"lightcord-1\"]) window.Lightcord.Settings.devMode = true\r\n        if (settingsCookie[\"lightcord-2\"]) window.Lightcord.Settings.callRingingBeat = true\r\n        if (settingsCookie[\"lightcord-presence-1\"]) CustomRichPresence.enable()\r\n        if (settingsCookie[\"lightcord-3\"]) remote.getCurrentWindow().setAlwaysOnTop(true)\r\n        if (settingsCookie[\"lightcord-4\"]) AntiAdDM.enable()\r\n        if (settingsCookie[\"lightcord-6\"]) blurPrivate.enable()\r\n        if (settingsCookie[\"lightcord-7\"]) disableTyping.enable()\r\n        if (settingsCookie[\"lightcord-9\"]) popoutWindow.enable()\r\n\r\n        if (settingsCookie[\"fork-ps-5\"]) {\r\n            ContentManager.watchContent(\"plugin\");\r\n            ContentManager.watchContent(\"theme\");\r\n        }\r\n\r\n        if (settingsCookie[\"bda-gs-8\"]) dMode.startDebugListener();\r\n        if (settingsCookie[\"fork-dm-1\"]) dMode.startCopySelector();\r\n\r\n        this.saveSettings();\r\n    }\r\n\r\n    saveSettings() {\r\n        DataStore.setSettingGroup(\"settings\", settingsCookie);\r\n        DataStore.setSettingGroup(\"rpc\", settingsRPC);\r\n        DataStore.setSettingGroup(\"lightcord-settings\", lightcordSettings);\r\n    }\r\n\r\n    loadSettings() {\r\n        Object.assign(settingsCookie, DataStore.getSettingGroup(\"settings\"));\r\n        Object.assign(settingsRPC, DataStore.getSettingGroup(\"rpc\"));\r\n        console.log(lightcordSettings, DataStore.getSettingGroup(\"lightcord-settings\"))\r\n        Object.assign(lightcordSettings, DataStore.getSettingGroup(\"lightcord-settings\"));\r\n    }\r\n\r\n    renderSidebar(sidebar) {\r\n        return this.sidebar.render(sidebar);\r\n    }\r\n\r\n    coreComponent() {\r\n        return BDV2.react.createElement(SectionedSettingsPanel, {key: \"cspanel\", onChange: this.onChange, sections: this.coreSettings})\r\n    }\r\n\r\n    lightcordComponent(sidebar, forceUpdate) {\r\n        let appSettings = remote.getGlobal(\"appSettings\")\r\n        return [\r\n            this.lightcordSettings.map((section, i) => {\r\n                return [\r\n                    (i === 0 ? null : BDV2.react.createElement(MarginTop)),\r\n                    BDV2.react.createElement(\"h2\", {className: \"ui-form-title h2 margin-reset margin-bottom-20\"}, section.title),\r\n                    section.settings.map(setting => {\r\n                        let isChecked = settingsCookie[setting.id]\r\n                        if(setting.id === \"lightcord-8\")isChecked = appSettings.get(\"isTabs\", false);\r\n                        if(setting.id === \"no_window_bound\")isChecked = appSettings.get(\"NO_WINDOWS_BOUND\", false)\r\n                        if(setting.id === \"enable_glasstron\")isChecked = appSettings.get(\"GLASSTRON\", true)\r\n                        if(setting.id === \"lightcord-10\")isChecked = !appSettings.get(\"DEFAULT_NOTIFICATIONS\", true)\r\n                        let returnValue = BDV2.react.createElement(Switch, {id: setting.id, key: setting.id, data: setting, checked: isChecked, onChange: (id, checked) => {\r\n                            this.onChange(id, checked, sidebar);\r\n                        }})\r\n                        if(setting.id == \"lightcord-8\" && isChecked){\r\n                            return [\r\n                                returnValue,\r\n                                React.createElement(Lightcord.Api.Components.inputs.Button, {\r\n                                    color: \"green\",\r\n                                    look: \"outlined\",\r\n                                    size: \"small\",\r\n                                    hoverColor: \"brand\",\r\n                                    onClick: () => {\r\n                                        DiscordNative.ipc.send(\"NEW_TAB\")\r\n                                    },\r\n                                    wrapper: false,\r\n                                    disabled: false\r\n                                }, \"Open a new Tab\")\r\n                            ]\r\n                        }\r\n                        return returnValue\r\n                    })\r\n                ]\r\n            }), \r\n            BDV2.react.createElement(window.Lightcord.Api.Components.inputs.Button, {\r\n                color: \"yellow\",\r\n                look: \"ghost\",\r\n                size: \"medium\",\r\n                hoverColor: \"red\",\r\n                onClick(){\r\n                    console.log(\"Should relaunch\")\r\n                    remote.app.relaunch({\r\n                        args: remote.process.argv.slice(1).concat([\"--disable-betterdiscord\"])\r\n                    })\r\n                    remote.app.quit()\r\n                },\r\n                wrapper: true\r\n            }, \"Relaunch without BetterDiscord\"),\r\n            React.createElement(Lightcord.Api.Components.inputs.Button, {\r\n                color: \"yellow\",\r\n                look: \"ghost\",\r\n                size: \"medium\",\r\n                hoverColor: \"red\",\r\n                onClick: () => {\r\n                    if(isClearingCache)return\r\n                    isClearingCache = true\r\n                    Utils.showToast(\"Clearing cache...\", {\r\n                        type: \"info\"\r\n                    })\r\n                    forceUpdate()\r\n                    remote.getCurrentWebContents().session.clearCache()\r\n                    .then(() => {\r\n                        Utils.showToast(\"Cache is cleared !\", {\r\n                            type: \"success\"\r\n                        })\r\n                        isClearingCache = false\r\n                        forceUpdate()\r\n                    }).catch(err => {\r\n                        console.error(err)\r\n                        Utils.showToast(\"An error occured. Check console for more informations.\", {\r\n                            type: \"error\"\r\n                        })\r\n                        isClearingCache = false\r\n                        forceUpdate()\r\n                    })\r\n                },\r\n                wrapper: true,\r\n                disabled: isClearingCache\r\n            }, \"Clear cache\")\r\n        ]\r\n    }\r\n\r\n    PresenceComponent() {\r\n        return BDV2.react.createElement(V2C_PresenceSettings, {\r\n            key: \"lppannel\",\r\n            onChange: this.onChange, \r\n            settings: this.PresenceSettings\r\n        })\r\n    }\r\n\r\n    AccountInfosComponent() {\r\n        return BDV2.react.createElement(V2C_AccountInfos, {\r\n            key: \"lapannel\"\r\n        })\r\n    }\r\n\r\n    ApiPreviewComponent() {\r\n        return BDV2.react.createElement(ApiPreview, {\r\n            key: \"lapipannel\"\r\n        })\r\n    }\r\n\r\n    customCssComponent() {\r\n        return BDV2.react.createElement(CssEditor, {key: \"csseditor\"})\r\n    }\r\n\r\n    renderAddonPane(type) {\r\n        // I know this shouldn't be here, but when it isn't,\r\n        // React refuses to change the button when going\r\n        // between plugins and themes page... something\r\n        // to debug later.\r\n        class ContentList extends BDV2.react.Component {\r\n            constructor(props) {\r\n                super(props);\r\n                this.prefix = this.props.type.replace(\"s\", \"\");\r\n            }\r\n        \r\n            onChange() {\r\n                this.props.onChange(this.props.type);\r\n            }\r\n        \r\n            render() {return this.props.children;}\r\n        }\r\n        const originalRender = ContentList.prototype.render;\r\n        Object.defineProperty(ContentList.prototype, \"render\", {\r\n            enumerable: false,\r\n            configurable: false,\r\n            set: function() {console.warn(\"Addon policy for plugins #5 https://github.com/rauenzi/BetterDiscordApp/wiki/Addon-Policies#plugins\");},\r\n            get: () => originalRender\r\n        });\r\n        return function(){\r\n            return BDV2.react.createElement(ContentList, {type}, BDV2.react.createElement(CardList, {type}))\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * No need to export settingsPanel on window\r\n */\r\n\r\nfunction makeComponent(children){\r\n    class SettingComponent extends React.Component {\r\n        render(){\r\n            return children(sidebar, () => this.forceUpdate())\r\n        }\r\n    }\r\n    let sidebar\r\n    return (s) => {\r\n        sidebar = s\r\n        return SettingComponent\r\n    }\r\n}","import BDV2 from \"../modules/v2\";\r\n\r\nexport default class BDLogo extends BDV2.reactComponent {\r\n    render() {\r\n        return BDV2.react.createElement(\r\n            \"svg\",\r\n            {height: \"100%\", width: this.props.size || \"16px\", className: \"bd-logo \" + this.props.className, style: {fillRule: \"evenodd\", clipRule: \"evenodd\", strokeLinecap: \"round\", strokeLinejoin: \"round\"}, viewBox: \"0 0 2000 2000\"},\r\n            BDV2.react.createElement(\"metadata\", null),\r\n            BDV2.react.createElement(\"defs\", null,\r\n                BDV2.react.createElement(\"filter\", {id: \"shadow1\"}, BDV2.react.createElement(\"feDropShadow\", {\"dx\": \"20\", \"dy\": \"0\", \"stdDeviation\": \"20\", \"flood-color\": \"rgba(0,0,0,0.35)\"})),\r\n                BDV2.react.createElement(\"filter\", {id: \"shadow2\"}, BDV2.react.createElement(\"feDropShadow\", {\"dx\": \"15\", \"dy\": \"0\", \"stdDeviation\": \"20\", \"flood-color\": \"rgba(255,255,255,0.15)\"})),\r\n                BDV2.react.createElement(\"filter\", {id: \"shadow3\"}, BDV2.react.createElement(\"feDropShadow\", {\"dx\": \"10\", \"dy\": \"0\", \"stdDeviation\": \"20\", \"flood-color\": \"rgba(0,0,0,0.35)\"}))\r\n            ),\r\n            BDV2.react.createElement(\"g\", null,\r\n                BDV2.react.createElement(\"path\", {style: {filter: \"url(#shadow3)\"}, d: \"M1195.44+135.442L1195.44+135.442L997.6+136.442C1024.2+149.742+1170.34+163.542+1193.64+179.742C1264.34+228.842+1319.74+291.242+1358.24+365.042C1398.14+441.642+1419.74+530.642+1422.54+629.642L1422.54+630.842L1422.54+632.042C1422.54+773.142+1422.54+1228.14+1422.54+1369.14L1422.54+1370.34L1422.54+1371.54C1419.84+1470.54+1398.24+1559.54+1358.24+1636.14C1319.74+1709.94+1264.44+1772.34+1193.64+1821.44C1171.04+1837.14+1025.7+1850.54+1000+1863.54L1193.54+1864.54C1539.74+1866.44+1864.54+1693.34+1864.54+1296.64L1864.54+716.942C1866.44+312.442+1541.64+135.442+1195.44+135.442Z\", fill: \"#171717\", opacity: \"1\"}),\r\n                BDV2.react.createElement(\"path\", {style: {filter: \"url(#shadow2)\"}, d: \"M1695.54+631.442C1685.84+278.042+1409.34+135.442+1052.94+135.442L361.74+136.442L803.74+490.442L1060.74+490.442C1335.24+490.442+1335.24+835.342+1060.74+835.342L1060.74+1164.84C1150.22+1164.84+1210.53+1201.48+1241.68+1250.87C1306.07+1353+1245.76+1509.64+1060.74+1509.64L361.74+1863.54L1052.94+1864.54C1409.24+1864.54+1685.74+1721.94+1695.54+1368.54C1695.54+1205.94+1651.04+1084.44+1572.64+999.942C1651.04+915.542+1695.54+794.042+1695.54+631.442Z\", fill: \"#3E82E5\", opacity: \"1\"}),\r\n                BDV2.react.createElement(\"path\", {style: {filter: \"url(#shadow1)\"}, d: \"M1469.25+631.442C1459.55+278.042+1183.05+135.442+826.65+135.442L135.45+135.442L135.45+1004C135.45+1004+135.427+1255.21+355.626+1255.21C575.825+1255.21+575.848+1004+575.848+1004L577.45+490.442L834.45+490.442C1108.95+490.442+1108.95+835.342+834.45+835.342L664.65+835.342L664.65+1164.84L834.45+1164.84C923.932+1164.84+984.244+1201.48+1015.39+1250.87C1079.78+1353+1019.47+1509.64+834.45+1509.64L135.45+1509.64L135.45+1864.54L826.65+1864.54C1182.95+1864.54+1459.45+1721.94+1469.25+1368.54C1469.25+1205.94+1424.75+1084.44+1346.35+999.942C1424.75+915.542+1469.25+794.042+1469.25+631.442Z\", fill: \"#FFFFFF\", opacity: \"1\"})\r\n            )\r\n        );\r\n    }\r\n}","export default class LightcordLogo extends React.Component {\r\n    render(){\r\n        const props = this.props\r\n        return (\r\n            <svg viewBox=\"0 0 168 168.69\" {...props} height=\"100%\" width={props.size}>\r\n                <defs>\r\n                    <linearGradient id=\"prefix__a\" x1={66.7} y1={-487.7} x2={66.7} y2={-508.73} gradientTransform=\"matrix(1 0 0 -1 0 -408)\" gradientUnits=\"userSpaceOnUse\">\r\n                        <stop offset={0} stopColor=\"#e30613\" />\r\n                        <stop offset={1} stopColor=\"#731a14\" />\r\n                    </linearGradient>\r\n                    <linearGradient id=\"prefix__b\" x1={101.7} y1={-487.7} x2={101.7} y2={-508.73} gradientTransform=\"matrix(1 0 0 -1 0 -408)\" gradientUnits=\"userSpaceOnUse\">\r\n                        <stop offset={0} stopColor=\"#e20613\" />\r\n                        <stop offset={1} stopColor=\"#731a13\" />\r\n                    </linearGradient>\r\n                    <linearGradient id=\"prefix__c\" x1={84} y1={-408} x2={84} y2={-576.69} gradientTransform=\"matrix(1 0 0 -1 0 -408)\" gradientUnits=\"userSpaceOnUse\">\r\n                        <stop offset={0} stopColor=\"#e30613\" />\r\n                        <stop offset={1} stopColor=\"#731a13\" />\r\n                    </linearGradient>\r\n                </defs>\r\n                <path fill=\"#fff\" d=\"M14.9 35.3h139.2V133H14.9z\" />\r\n                <path d=\"M66.7 79.7c-5.4 0-9.8 4.7-9.8 10.5s4.4 10.5 9.8 10.5 9.8-4.7 9.8-10.5-4.4-10.5-9.8-10.5z\" fill=\"url(#prefix__a)\" />\r\n                <path d=\"M101.7 79.7c-5.4 0-9.8 4.7-9.8 10.5s4.4 10.5 9.8 10.5 9.8-4.7 9.8-10.5-4.4-10.5-9.8-10.5z\" fill=\"url(#prefix__b)\" />\r\n                <path d=\"M0 0v168l168 .69V0zm111.3 124.1s-3.4-4.1-6.3-7.7c12.6-3.5 17.4-11.3 17.4-11.3a52.52 52.52 0 01-11.1 5.6 68.63 68.63 0 01-38.9 4 70.12 70.12 0 01-14.1-4.1 48.88 48.88 0 01-7.1-3.3c-.3-.2-.6-.3-.9-.5a.76.76 0 00-.4-.2c-1.7-1-2.6-1.6-2.6-1.6s4.6 7.6 16.8 11.2c-2.9 3.6-6.4 7.9-6.4 7.9-21.2-.6-29.3-14.5-29.3-14.5 0-30.6 13.8-55.4 13.8-55.4 13.8-10.3 26.9-10 26.9-10l1 1.1C52.8 50.3 45 57.9 45 57.9a56.2 56.2 0 015.7-2.7 72.19 72.19 0 0121.8-6 8.75 8.75 0 011.6-.2 89.1 89.1 0 0119.4-.2 78.45 78.45 0 0128.9 9.1s-7.5-7.2-23.9-12.1l1.3-1.5s13.1-.3 26.9 10c0 0 13.8 24.8 13.8 55.4.1-.1-8 13.8-29.2 14.4z\" fill=\"url(#prefix__c)\" />\r\n            </svg>\r\n        )\r\n    }\r\n}","import BDV2 from \"./v2\";\r\nimport Utils from \"./utils\";\r\n\r\nconst Constants = {\r\n    EmojiRegex: /<a?\\.(\\w+)\\.(\\d+)>/g\r\n}\r\n\r\nlet CustomEmojiModule = BDModules.get(e => e.CustomEmoji)[0]\r\nlet EmojiModuleApi = BDModules.get(e => e.default && e.default.getCustomEmojiById)[0]\r\nlet AutocompleteModule = BDModules.get(e => e.default && e.default.displayName === \"Autocomplete\")[0]\r\nlet AutoCompletionTemplates = BDModules.get(e => e.getAutocompleteOptions)[0]\r\nlet EmojiModuleQuery = BDModules.get(e => e.default && e.default.queryEmojiResults)[0]\r\nlet Messages = BDModules.get(e => e.default && e.default.Messages && e.default.Messages.EMOJI_MATCHING)[0]\r\nlet guildModule = BDModules.get(e => e.default && e.default.getGuild && e.default.getGuilds && !e.default.isFetching)[0]\r\nlet emojiSearch = BDModules.get(e => e.default && e.default.getDisambiguatedEmojiContext)\r\n\r\nexport default new class EmojiModule {\r\n    constructor(){\r\n        this.init().catch(err => Utils.err(\"EmojiModule\", \"An error occured\", err)) // better logging\r\n    }\r\n\r\n    async init(){\r\n        /** Emoji AutoComplete */\r\n        if(!AutocompleteModule)AutocompleteModule = await window.Lightcord.Api.ensureExported(e => e.default && e.default.displayName === \"Autocomplete\")\r\n        if(!AutoCompletionTemplates)AutoCompletionTemplates = await window.Lightcord.Api.ensureExported(e => e.getAutocompleteOptions)\r\n        if(!EmojiModuleQuery)EmojiModuleQuery = await window.Lightcord.Api.ensureExported(e => e.default && e.default.queryEmojiResults)\r\n        if(!Messages)Messages = await window.Lightcord.Api.ensureExported(e => e.default && e.default.Messages && e.default.Messages.EMOJI_MATCHING)\r\n        if(!guildModule)guildModule = await window.Lightcord.Api.ensureExported(e => e.default && e.default.getGuild && e.default.getGuilds && !e.default.isFetching)\r\n        if(!emojiSearch)emojiSearch = await window.Lightcord.Api.ensureExported(e => e.default && e.default.getDisambiguatedEmojiContext)\r\n\r\n        if(AutocompleteModule && AutoCompletionTemplates && EmojiModuleQuery && Messages && guildModule && emojiSearch){\r\n            console.log(`Patching getAutocompleteOptions of AutoCompletionTemplates`, AutoCompletionTemplates)\r\n            const getAutocompleteOptions = AutoCompletionTemplates.getAutocompleteOptions\r\n            AutoCompletionTemplates.getAutocompleteOptions = function(e, t, n, r, a){\r\n                const value = getAutocompleteOptions.call(this, ...arguments)\r\n                value.LIGHTCORD_EMOJIS = {\r\n                    matches(arg1, arg2){\r\n                        let condition = arg2.length > 1 && \".\" === arg1\r\n                        setEmojiUsable(condition)\r\n                        return condition\r\n                    },\r\n                    queryResults(t){\r\n                        let results = EmojiModuleQuery.default.queryEmojiResults(t, e)\r\n                        return results\r\n                    },\r\n                    renderResults(e, t, n, r, a){\r\n                        return D(e, t, a.emojis, n, r, Messages.default.Messages.EMOJI_MATCHING, Messages.default.Messages.EMOJI, AutocompleteModule.default.Emoji, (function(e) {\r\n                            return {\r\n                                emoji: e,\r\n                                key: e.id || e.uniqueName || e.name,\r\n                                sentinel: \".\",\r\n                                guild: null != e.guildId ? guildModule.default.getGuild(e.guildId) : null\r\n                            }\r\n                        }), (function(e) {\r\n                            return \".\" + e + \".\"\r\n                        }))\r\n                    },\r\n                    getPlainText(id, guild){\r\n                        var emojis = guild.emojis;\r\n                        if (null == emojis || null == emojis[id]) return \"\";\r\n                        var emoji = emojis[id],\r\n                            isAnimated = emoji.animated ? \"a\" : \"\";\r\n                        return emoji.managed || null == emoji.id ? \".\" + emoji.name + \".\" : \"<\" + isAnimated + \".\" + (emoji.originalName || emoji.name) + \".\" + emoji.id + \">\"\r\n                    },\r\n                    getRawText(id, guild){\r\n                        var emojis = guild.emojis;\r\n                        if (null == emojis || null == emojis[id]) return \"\";\r\n                        var emoji = emojis[id],\r\n                            isAnimated = emoji.animated ? \"a\" : \"\";\r\n                        return emoji.managed || null == emoji.id ? \".\" + emoji.name + \".\" : \"<\" + isAnimated + \".\" + (emoji.originalName || emoji.name) + \".\" + emoji.id + \">\"\r\n                    }\r\n                }\r\n                return value\r\n            }\r\n        }else{\r\n            console.error(new Error(\"Couldn't start autocompletion of Lightcord's emojis.\"))\r\n        }\r\n\r\n        /** Emoji display */\r\n        while (!BDV2.MessageComponent) await new Promise(resolve => setTimeout(resolve, 100));\r\n\r\n        if (!this.cancelEmojiRender){ // TODO: Proper emoji formatting / rendering\r\n            this.cancelEmoteRender = Utils.monkeyPatch(BDV2.MessageComponent, \"default\", {before: (data) => {\r\n                const message = Utils.getNestedProp(data.methodArguments[0], \"childrenMessageContent.props.message\")\r\n                if(!message)return\r\n                const content = Utils.getNestedProp(data.methodArguments[0], \"childrenMessageContent.props.content\")\r\n                if(!content || !content.length)return\r\n    \r\n                /**\r\n                 * @type {{\r\n                 *  raw: string,\r\n                 *  name: string,\r\n                 *  id: string,\r\n                 *  animated: boolean\r\n                 * }[]}\r\n                 */\r\n                let emojis = []\r\n                \r\n                const newContent = []\r\n                for(let node of content){\r\n                    if (typeof(node) !== \"string\") {\r\n                        newContent.push(node)\r\n                        continue\r\n                    };\r\n                    let parsed;\r\n                    let hasParsed = false\r\n        \r\n                    do {\r\n                        parsed = Constants.EmojiRegex.exec(node);\r\n                        if (parsed) {\r\n                            hasParsed = true\r\n                            if(!EmojiModuleApi)EmojiModuleApi = BDModules.get(e => e.default && e.default.getCustomEmojiById)[0]\r\n                            const emoji = EmojiModuleApi.default.getCustomEmojiById(parsed[2])\r\n                            if(emoji){\r\n                                emojis.push({\r\n                                    animated: emoji.animated,\r\n                                    name: emoji.name,\r\n                                    id: emoji.id,\r\n                                    raw: parsed[0]\r\n                                })\r\n                            }else{\r\n                                emojis.push({\r\n                                    animated: parsed[0].startsWith(\"<a\"),\r\n                                    name: parsed[1],\r\n                                    id: parsed[2],\r\n                                    raw: parsed[0]\r\n                                })\r\n                            }\r\n                        }\r\n                    } while (parsed);\r\n    \r\n                    if(hasParsed){\r\n                        const words = node.split(\" \").map((word, index, arr) => {\r\n                            if(!word)return \"\"\r\n                            const emoji = emojis.find(e => e.raw == word)\r\n                            if(!emoji)return word\r\n                            if(!CustomEmojiModule)CustomEmojiModule = BDModules.get(e => e.CustomEmoji)[0]\r\n                            return React.createElement(CustomEmojiModule.CustomEmoji, {\r\n                                emoji: {\r\n                                    name: `.${emoji.name}.`,\r\n                                    emojiId: emoji.id,\r\n                                    animated: emoji.animated,\r\n                                    jumboable: arr.length === 1 && content.length === 1\r\n                                }\r\n                            })\r\n                        }).reduce((previous, current) => {\r\n                            if(previous.length === 0)return [current]\r\n                            if(typeof current === \"string\"){\r\n                                if(typeof previous[previous.length - 1] === \"string\"){\r\n                                    previous[previous.length - 1] += ` ${current}`\r\n                                    return previous\r\n                                }\r\n                                previous.push(\" \"+current)\r\n                                return previous\r\n                            }\r\n                            previous.push(\" \", current)\r\n                            return previous\r\n                        }, [])\r\n                        newContent.push(...words)\r\n                    }else{\r\n                        newContent.push(node)\r\n                    }\r\n                }\r\n                while(data.methodArguments[0].childrenMessageContent.props.content[0]){\r\n                    data.methodArguments[0].childrenMessageContent.props.content.shift()\r\n                }\r\n                while(newContent[0]){\r\n                    data.methodArguments[0].childrenMessageContent.props.content.push(newContent.shift())\r\n                }\r\n            }});\r\n        }/*\r\n        let userModule\r\n        window.Lightcord.Api.ensureExported(e => e.default && e.default.displayName === \"EmojiPickerListRow\")\r\n        .then(EmojiPickerListRow => {\r\n            let classs = EmojiPickerListRow.default\r\n            EmojiPickerListRow.default = class EmojiPickerListRow extends React.Component {\r\n                constructor(props){\r\n                    super(props)\r\n                }\r\n\r\n                render(){\r\n                    if(!userModule)userModule = BDModules.get(e => e.default && e.default.getCurrentUser)[0]\r\n                    if(!userModule)return React.createElement(classs, this.props)\r\n                    let user = userModule.default.getCurrentUser()\r\n                    if(!user.hasPremiumSubscription)return React.createElement(classs, this.props)\r\n\r\n                    return React.createElement(classs, Object.assign({}, this.props, {\r\n                        emojiDescriptors: this.props.emojiDescriptors.map(e => {\r\n                            e.isDisabled = false\r\n                        })\r\n                    }))                    \r\n                }\r\n            }\r\n            EmojiPickerListRow.default.displayName = \"EmojiPickerListRow\"\r\n        })*/\r\n    }\r\n\r\n    disable(){\r\n        if (!this.cancelEmoteRender) return;\r\n        this.cancelEmoteRender();\r\n        this.cancelEmoteRender = null;\r\n    }\r\n\r\n    start(){\r\n        \r\n    }\r\n}\r\n\r\nfunction D(e, t, n, r, o, i, s, u, l, c) {\r\n    if (null == n || 0 === n.length) return null;\r\n    var d = n.map((function(e, n) {\r\n        return React.createElement(u, Object.assign({\r\n            onClick: o,\r\n            onHover: r,\r\n            selected: t === n,\r\n            index: n\r\n        }, l(e, n)))\r\n    }));\r\n    return [R(i, s, e, c), d]\r\n}\r\n\r\nfunction R(e, t, n, r) {\r\n    var a = (n.length > 0 ? e.format({\r\n        prefix: r(n)\r\n    }) : t)\r\n    if(Array.isArray(a)){\r\n        a.unshift(React.createElement(\"strong\", {}, \"[Lightcord] \"))\r\n    }else{\r\n        a = \"[LIGHTCORD] \"+a\r\n    }\r\n    return React.createElement(AutocompleteModule.default.Title, {\r\n        title: a\r\n    }, a)\r\n}\r\nR.displayName = \"renderHeader\";\r\n\r\nlet EmojiFilterModule = BDModules.get(e => e.default && e.default.isEmojiDisabled)[0]\r\nlet isEmojiDisabled = EmojiFilterModule && EmojiFilterModule.default.isEmojiDisabled\r\nlet isUsable = false\r\nlet hasPatched = false\r\n\r\nfunction setEmojiUsable(usable){\r\n    isUsable = usable\r\n    if(hasPatched)return\r\n    if(!EmojiFilterModule)EmojiFilterModule = BDModules.get(e => e.default && e.default.isEmojiDisabled)[0]\r\n    if(!EmojiFilterModule)return\r\n    if(!isEmojiDisabled)isEmojiDisabled = EmojiFilterModule.default.isEmojiDisabled\r\n\r\n    hasPatched = true\r\n    EmojiFilterModule.default.isEmojiDisabled = function(emoji){\r\n        if(isUsable){\r\n            if(emoji.surrogates || emoji.diversity)return true\r\n            return false\r\n        }\r\n        return isEmojiDisabled.call(this, ...arguments)\r\n    }\r\n}","import {bdConfig, minSupportedVersion, bbdVersion, settingsCookie, bdpluginErrors, bdthemeErrors, bbdChangelog, defaultCookie, currentDiscordVersion, defaultRPC, settingsRPC, lightcordSettings} from \"../0globals\";\r\nimport Utils from \"./utils\";\r\n\r\nimport BDV2 from \"./v2\";\r\nimport settingsPanel from \"./settingsPanel\";\r\nimport pluginModule from \"./pluginModule\";\r\nimport themeModule from \"./themeModule\";\r\nimport DataStore from \"./dataStore\";\r\nimport WebpackModules from \"./webpackModules\";\r\nimport DOM from \"./domtools\";\r\n\r\nimport BDLogo from \"../ui/bdLogo\";\r\nimport TooltipWrap from \"../ui/tooltipWrap\";\r\nimport LightcordLogo from \"../svg/Lightcord\";\r\nimport PluginCertifier from \"./pluginCertifier\";\r\nimport distant, { uuidv4 } from \"./distant\";\r\nimport EmojiModule from \"./emojiModule\"\r\nimport {remote as electron} from \"electron\"\r\nimport v2 from \"./v2\";\r\nimport contentManager from \"./contentManager\";\r\n\r\nlet methods\r\nfunction Core() {}\r\n\r\n\r\nCore.prototype.setConfig = function(config) {\r\n    if (this.hasStarted) return;\r\n    Object.assign(bdConfig, config);\r\n};\r\n\r\nObject.defineProperty(Core.prototype, \"methods\", {\r\n    get(){\r\n        return methods\r\n    }\r\n})\r\n\r\nCore.prototype.setMethods = function(m) {\r\n    if (this.hasStarted) return;\r\n    methods = m\r\n};\r\n\r\nCore.prototype.init = async function() {\r\n    if (this.hasStarted) return;\r\n    this.hasStarted = true;\r\n\r\n    if (!Array.prototype.flat) {\r\n        Utils.alert(\"Not Supported\", \"BetterDiscord v\" + bbdVersion + \" does not support this old version (\" + currentDiscordVersion + \") of Discord. Please update your Discord installation before proceeding.\");\r\n        return;\r\n    }\r\n\r\n    if (bdConfig.version < minSupportedVersion) {\r\n        Utils.alert(\"Not Supported\", \"BetterDiscord v\" + bdConfig.version + \" (your version)\" + \" is not supported by the latest js (\" + bbdVersion + \").<br><br> Please download the latest version from <a href='https://github.com/rauenzi/BetterDiscordApp/releases/latest' target='_blank'>GitHub</a>\");\r\n        return;\r\n    }\r\n\r\n    if (window.ED) {\r\n        Utils.alert(\"Not Supported\", \"BandagedBD does not work with EnhancedDiscord. Please uninstall one of them.\");\r\n        return;\r\n    }\r\n\r\n    if (window.WebSocket && window.WebSocket.name && window.WebSocket.name.includes(\"Patched\")) {\r\n        Utils.alert(\"Not Supported\", \"BandagedBD does not work with Powercord. Please uninstall one of them.\");\r\n        return;\r\n    }\r\n\r\n    Utils.suppressErrors(this.patchAttributes.bind(this), \"LC Plugin Certifier Patch\")();\r\n\r\n    Utils.log(\"Startup\", \"Initializing Settings\");\r\n    this.initSettings();\r\n\r\n    await this.checkForGuilds();\r\n    BDV2.initialize();\r\n    Utils.log(\"Startup\", \"Updating Settings\");\r\n    settingsPanel.initializeSettings();\r\n\r\n    Utils.log(\"Startup\", \"Loading Addons Cache\")\r\n    await contentManager.loadAddonCertifierCache()\r\n\r\n    Utils.log(\"Startup\", \"Loading Plugins\");\r\n    await pluginModule.loadPlugins();\r\n\r\n    Utils.log(\"Startup\", \"Loading Themes\");\r\n    await themeModule.loadThemes();\r\n\r\n    DOM.addStyle(\"customcss\", Buffer.from(DataStore.getBDData(\"bdcustomcss\"), \"base64\").toString(\"utf8\"));\r\n\r\n    window.addEventListener(\"beforeunload\", function() {\r\n        if (settingsCookie[\"bda-dc-0\"]) document.querySelector(\".btn.btn-disconnect\").click();\r\n    });\r\n\r\n    PluginCertifier.start()\r\n\r\n    Utils.log(\"Startup\", \"Removing Loading Icon\");\r\n    if (document.getElementsByClassName(\"bd-loaderv2\").length) document.getElementsByClassName(\"bd-loaderv2\")[0].remove();\r\n    Utils.log(\"Startup\", \"Initializing Main Observer\");\r\n    this.initObserver();\r\n\r\n    // Show loading errors\r\n    if (settingsCookie[\"fork-ps-1\"]) {\r\n        Utils.log(\"Startup\", \"Collecting Startup Errors\");\r\n        Utils.showContentErrors({plugins: bdpluginErrors, themes: bdthemeErrors});\r\n    }\r\n\r\n    const previousVersion = DataStore.getBDData(\"version\");\r\n    if (bbdVersion > previousVersion) {\r\n        if (bbdChangelog) this.showChangelogModal(bbdChangelog);\r\n        DataStore.setBDData(\"version\", bbdVersion);\r\n    }\r\n\r\n    EmojiModule.start()\r\n\r\n    Utils.suppressErrors(this.patchSocial.bind(this), \"BD Social Patch\")();\r\n    Utils.suppressErrors(this.patchGuildPills.bind(this), \"BD Guild Pills Patch\")();\r\n    Utils.suppressErrors(this.patchGuildListItems.bind(this), \"BD Guild List Items Patch\")();\r\n    Utils.suppressErrors(this.patchGuildSeparator.bind(this), \"BD Guild Separator Patch\")();\r\n    Utils.suppressErrors(this.patchMessageHeader.bind(this), \"BD Badge Chat Patch\")();\r\n    Utils.suppressErrors(this.patchMemberList.bind(this), \"BD Badge Member List Patch\")();\r\n    Utils.suppressErrors(this.patchAttachment.bind(this), \"LC Plugin Certifier Patch\")();\r\n\r\n    if(bdConfig.haveInstalledDefault){\r\n        let alert = Utils.alert(\"First Installation\", \"As it is the first time you install Lightcord, We added two default themes and one default plugin in your plugin/theme folder. Check it in the Plugin/Theme settings.\")\r\n        await new Promise((resolve) => {\r\n            alert.onClose(resolve)\r\n        })\r\n    }\r\n    const logo = document.querySelector(\"#app-mount > div.typeWindows-1za-n7.withFrame-haYltI.titleBar-AC4pGV.horizontalReverse-3tRjY7.flex-1O1GKY.directionRowReverse-m8IjIq.justifyStart-2NDFzi.alignStretch-DpGPf3.da-typeWindows.da-withFrame.da-titleBar.da-horizontalReverse.da-flex.da-directionRowReverse.da-justifyStart.da-alignStretch > div.wordmarkWindows-1v0lYD.wordmark-2iDDfm.da-wordmarkWindows.da-wordmark\")\r\n    if(logo){\r\n        logo.style.top = \"3px\"\r\n        logo.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"10\" width=\"70\" viewBox=\"0 0 72.54 10\" style=\"margin-left: -5px, margin-top: 10px\">\r\n    <path fill=\"currentColor\" d=\"M44.81,9.67V6.33c0-1.21,2.13-1.49,2.78-.28l2-.81A3.53,3.53,0,0,0,46.2,3c-1.92,0-3.81,1.13-3.81,3.33V9.67c0,2.21,1.89,3.33,3.77,3.33a3.87,3.87,0,0,0,3.45-2.18l-2.12-1C47,11.17,44.81,10.85,44.81,9.67ZM10.68,12.89h2.41V3.17H10.68ZM71.76,3.14H68.19V7.23L70.57,9.4v-4h1.27c.81,0,1.21.41,1.21,1v3c0,.63-.38,1.05-1.21,1.05H68.18v2.31h3.57c1.92,0,3.72-1,3.72-3.2V6.39C75.48,4.13,73.68,3.14,71.76,3.14ZM54.22,3c-2,0-4,1.1-4,3.34V9.66c0,2.23,2,3.34,4,3.34s3.95-1.11,3.95-3.34V6.34C58.19,4.11,56.2,3,54.22,3Zm1.55,6.66c0,.7-.78,1.06-1.54,1.06s-1.55-.35-1.55-1.06V6.34c0-.72.75-1.1,1.5-1.1s1.59.35,1.59,1.1ZM66.84,6.34c0-2.29-1.58-3.2-3.55-3.2H59.46v9.73h2.45V9.77h.43l2.22,3.09h3L65,9.52C66.13,9.15,66.84,8.14,66.84,6.34ZM63.33,7.65H61.91V5.43h1.42A1.11,1.11,0,1,1,63.33,7.65ZM29.83,13h2.42V3.06H29.83V6.73l-3,0V3.09H24.7v9.78h2.14V8.68l3,0ZM17.16,9.76V6.42c0-1.21,2.13-1.49,2.78-.28l2-.81a3.55,3.55,0,0,0-3.36-2.24c-1.92,0-3.81,1.13-3.81,3.33V9.76c0,2.21,2,3.15,3.9,3.15s3.58-1,3.58-3V7.58H18.79l0,1.36H20.3v.77C20.3,10.92,17.16,10.94,17.16,9.76Z\" transform=\"translate(-2.93 -3)\"/>\r\n    <polygon fill=\"currentColor\" points=\"35.91 0.06 38.43 0.06 38.43 1.84 35.92 1.81 35.97 10 33.55 10 33.49 1.75 30.98 1.74 30.98 0.06 33.49 0.06 35.91 0.06\"/>\r\n    <polygon fill=\"currentColor\" points=\"0 9.97 6.5 10 6.5 7.63 2.41 7.63 2.41 0.26 0 2.26 0 9.97\"/>\r\n</svg>`\r\n    }\r\n};\r\n\r\nCore.prototype.patchAttributes = async function() {\r\n    let attribsPatchs = []\r\n    this.cancelPatchAttributes = function() {\r\n        attribsPatchs.forEach(e => e())\r\n    }\r\n\r\n    while(!v2.MessageComponent)await new Promise(resolve => setTimeout(resolve, 100))\r\n    \r\n    // TODO: try to patch correctly the user popout on a next update\r\n    const Anchor = WebpackModules.find(m => m.displayName == \"Anchor\");\r\n    window.Lightcord.Api.ensureExported(e => e.default && e.default.displayName === \"DiscordTag\")\r\n    .then(DiscordTag => {\r\n        let DiscordTagComp = DiscordTag.default\r\n        DiscordTag.default = function(props){\r\n            let returnValue = DiscordTagComp(props)\r\n\r\n            let id = uuidv4()\r\n\r\n            let badgeDiv = BDV2.React.createElement(\"div\", {\r\n                style: {\r\n                    display: \"inline\",\r\n                    marginTop: \"5px\"\r\n                }\r\n            }, BDV2.React.createElement(\"span\", {\r\n                id: \"badges-\"+id,\r\n                key: \"badges-\"+id,\r\n                style: {\r\n                    display: \"inherit\"\r\n                }\r\n            }))\r\n\r\n            let children = [returnValue]\r\n\r\n            if (props.user.id === \"249746236008169473\") { // Rauenzi: BandagedBD Developer\r\n                children.push(\r\n                    BDV2.React.createElement(TooltipWrap, {color: \"black\", side: \"top\", text: \"BandagedBD Developer\"},\r\n                        BDV2.React.createElement(Anchor, {className: \"bd-chat-badge\", href: \"https://github.com/rauenzi/BetterDiscordApp\", title: \"BandagedBD\", target: \"_blank\"},\r\n                            BDV2.React.createElement(BDLogo, {size: \"16px\", className: \"bd-logo\"})\r\n                        )\r\n                    )\r\n                );\r\n            } else if (props.user.id === \"696481194443014174\" || props.user.id === \"696003456611385396\"){ // Not Thomiz: Lightcord Developer, Phorcys: Lightcord Developer\r\n                children.push(\r\n                    BDV2.React.createElement(TooltipWrap, {color: \"black\", side: \"top\", text: \"Lightcord Developer\"},\r\n                        BDV2.React.createElement(Anchor, {className: \"bd-chat-badge\", href: \"https://github.com/Lightcord/Lightcord\", title: \"Lightcord\", target: \"_blank\"},\r\n                            BDV2.React.createElement(LightcordLogo, {size: \"16px\", className: \"bd-logo\"})\r\n                        )\r\n                    )\r\n                );\r\n            }\r\n\r\n            children.push(badgeDiv)\r\n            let div = BDV2.React.createElement(\"div\", {\r\n                style: {\r\n                    display: \"block\"\r\n                }\r\n            }, children)\r\n            applyBadges(id, props.user, false)\r\n\r\n            return div\r\n        }\r\n        DiscordTag.default.displayName = DiscordTagComp.displayName\r\n    })\r\n\r\n    attribsPatchs.push(Utils.monkeyPatch(v2.MessageComponent, \"default\", {after: (data) => {\r\n        if(data.methodArguments[0].childrenMessageContent.props.message){ // this can be a blocked message (not opened)\r\n            data.returnValue.props[\"data-message-id\"] = data.methodArguments[0].childrenMessageContent.props.message.id\r\n        }\r\n    }}))\r\n        /*\r\n    attribsPatchs.push(Utils.monkeyPatch(v2.MessageComponent, \"default\", {after: (data) => {\r\n        data.returnValue.props[\"message-id\"] = data.methodArguments[0].childrenMessageContent.props.message.id\r\n    }}))*/\r\n}\r\n\r\nCore.prototype.checkForGuilds = function() {\r\n    let timesChecked = 0;\r\n    return new Promise(resolve => {\r\n        const checkForGuilds = function() {\r\n            const wrapper = BDV2.guildClasses.wrapper.split(\" \")[0];\r\n            if (document.querySelectorAll(`.${wrapper}`).length > 0) timesChecked++;\r\n            const guild = BDV2.guildClasses.listItem.split(\" \")[0];\r\n            const blob = BDV2.guildClasses.blobContainer.split(\" \")[0];\r\n            if (document.querySelectorAll(`.${wrapper} .${guild} .${blob}`).length > 0) return resolve(bdConfig.deferLoaded = true);\r\n            else if (timesChecked >= 50) return resolve(bdConfig.deferLoaded = true);\r\n            setTimeout(checkForGuilds, 100);\r\n        };\r\n        if (document.readyState != \"loading\") setTimeout(checkForGuilds, 100);\r\n        document.addEventListener(\"DOMContentLoaded\", () => {setTimeout(checkForGuilds, 100);});\r\n    });\r\n};\r\n\r\nCore.prototype.injectExternals = async function() {\r\n    // No externals\r\n};\r\n\r\nCore.prototype.initSettings = function () {\r\n    DataStore.initialize();\r\n    if(!DataStore.getSettingGroup(\"lightcord-settings\")){\r\n        for(let key in lightcordSettings){\r\n            delete lightcordSettings[key]\r\n        }\r\n    }\r\n    if(!DataStore.getSettingGroup(\"rpc\")){\r\n        Object.assign(settingsRPC, defaultRPC);\r\n    }\r\n    if(!DataStore.getSettingGroup(\"settings\")){\r\n            Object.assign(settingsCookie, defaultCookie);\r\n        settingsPanel.saveSettings();\r\n    } else {\r\n        settingsPanel.loadSettings();\r\n        for (const setting in defaultCookie) {\r\n            if (settingsCookie[setting] == undefined) {\r\n                settingsCookie[setting] = defaultCookie[setting];\r\n                settingsPanel.saveSettings();\r\n            }\r\n        }\r\n    }\r\n    window.Lightcord.Api.ensureExported(e => e.default && e.default.prototype && e.default.prototype.getPredicateSections)\r\n    .then(settingModule => {\r\n\r\n        let getPredicateSections = settingModule.default.prototype.getPredicateSections\r\n        settingModule.default.prototype.getPredicateSections = function(){\r\n            let result = getPredicateSections.call(this, ...arguments)\r\n\r\n            if(!result[1])return result\r\n            if(result[1].section === \"My Account\"){ // user settings, not guild settings\r\n                let poped = []\r\n                \r\n                poped.push(result.pop())\r\n                poped.push(result.pop())\r\n                poped.push(result.pop())\r\n                poped.push(result.pop())\r\n\r\n                result.push(...settingsPanel.renderSidebar(this))\r\n\r\n                while(poped[0]){\r\n                    result.push(poped.pop())\r\n                }\r\n            }\r\n            console.log(result)\r\n            return result\r\n        }\r\n    })\r\n};\r\n\r\n\r\nlet classNameLayer\r\nlet classNameSocialLinks\r\nlet classNameModal\r\n\r\nCore.prototype.initObserver = function () {\r\n    const mainObserver = new MutationObserver((mutations) => {\r\n        for (let i = 0, mlen = mutations.length; i < mlen; i++) {\r\n            const mutation = mutations[i];\r\n            if (typeof pluginModule !== \"undefined\") pluginModule.rawObserver(mutation);\r\n\r\n            // if there was nothing added, skip\r\n            if (!mutation.addedNodes.length || !(mutation.addedNodes[0] instanceof Element)) continue;\r\n\r\n            const node = mutation.addedNodes[0];\r\n\r\n            if(!classNameLayer)classNameLayer = BDModules.get((e) => e.layer && typeof e.layer === \"string\" && e.animating)[0].layer\r\n            if(!classNameSocialLinks)classNameSocialLinks = BDModules.get((e) => e.socialLinks && typeof e.socialLinks === \"string\")[0].socialLinks\r\n            if(!classNameModal)classNameModal = BDModules.get((e) => e.modal && typeof e.modal === \"string\" && e.inner && typeof e.inner === \"string\" && !e.responsiveWidthMobile)[0].modal\r\n\r\n            if (node.classList.contains(classNameLayer)) {\r\n                if (node.getAttribute(\"aria-label\") === \"GUILD_SETTINGS\"){\r\n                    node.setAttribute(\"layer-id\", \"server-settings\");\r\n                    node.setAttribute(\"id\", \"server-settings\");\r\n                }\r\n\r\n                if (node.getElementsByClassName(classNameSocialLinks).length) {\r\n                    node.setAttribute(\"layer-id\", \"user-settings\");\r\n                    node.setAttribute(\"id\", \"user-settings\");\r\n                }\r\n            }\r\n\r\n            if (node.parentElement == document.body && node.querySelector(\"#ace_settingsmenu\")) node.id = \"ace_settingsmenu_container\";\r\n\r\n            // Emoji Picker\r\n            //node.getElementsByClassName(\"emojiPicker-3m1S-j\").length && !node.querySelector(\".emojiPicker-3m1S-j\").parentElement.classList.contains(\"animatorLeft-1EQxU0\")\r\n            //if (node.classList.contains(classNameLayer2) && node.getElementsByClassName(classNameEmojiPicker).length  && !node.querySelector(\".\"+classNameEmojiPicker).parentElement.classList.contains(classNameAnimatorLeft)) quickEmoteMenu.obsCallback(node);\r\n\r\n        }\r\n    });\r\n\r\n    mainObserver.observe(document, {\r\n        childList: true,\r\n        subtree: true\r\n    });\r\n};\r\n\r\nCore.prototype.showChangelogModal = function(options = {}) {\r\n    return Utils.showChangelogModal(options);\r\n};\r\n\r\nCore.prototype.alert = function(title, content) {\r\n    return Utils.alert(title, content);\r\n};\r\n\r\nCore.prototype.patchSocial = function() {\r\n    if (this.socialPatch) return;\r\n    const TabBar = WebpackModules.find(m => m.displayName == \"TabBar\");\r\n    const Anchor = WebpackModules.find(m => m.displayName == \"Anchor\");\r\n    if (!TabBar) return;\r\n    this.socialPatch = Utils.monkeyPatch(TabBar.prototype, \"render\", {after: (data) => {\r\n        const children = data.returnValue.props.children;\r\n        if (!children || !children.length || children.length < 3) return;\r\n        if (children[children.length - 3].type.displayName !== \"Separator\") return;\r\n        if (!children[children.length - 2].type.toString().includes(\"socialLinks\")) return;\r\n        if (Anchor) {\r\n            let socialModule1 = BDModules.get(e => e.socialLinks)[0]\r\n            const original = children[children.length - 2].type;\r\n            const newOne = function() {\r\n                const returnVal = original(...arguments);\r\n                returnVal.props.children.push(\r\n                    BDV2.React.createElement(TooltipWrap, {color: \"black\", side: \"top\", text: \"Lightcord\"},\r\n                        BDV2.React.createElement(Anchor, {className: \"bd-social-link \"+socialModule1.link, href: \"https://github.com/Lightcord/Lightcord\", title: \"Lightcord\", target: \"_blank\"},\r\n                            BDV2.React.createElement(LightcordLogo, {size: \"16px\", className: \"bd-social-logo\"})\r\n                        )\r\n                    )\r\n                );\r\n                returnVal.props.children.push(\r\n                    BDV2.React.createElement(TooltipWrap, {color: \"black\", side: \"top\", text: \"BandagedBD\"},\r\n                        BDV2.React.createElement(Anchor, {className: \"bd-social-link \"+socialModule1.link, href: \"https://github.com/rauenzi/BetterDiscordApp\", title: \"BandagedBD\", target: \"_blank\"},\r\n                            BDV2.React.createElement(BDLogo, {size: \"16px\", className: \"bd-social-logo\"})\r\n                        )\r\n                    )\r\n                );\r\n                return returnVal;\r\n            };\r\n            children[children.length - 2].type = newOne;\r\n        }\r\n\r\n        let [\r\n            classNameColorMuted,\r\n            sizes,\r\n            classNameVersionHash\r\n        ] = [\r\n            BDModules.get(e => e.colorMuted)[0].colorMuted,\r\n            BDModules.get(e => e.size32)[0],\r\n            BDModules.get(e => e.versionHash)[0].versionHash\r\n        ]\r\n\r\n        const versionHash = `(${bdConfig.hash ? bdConfig.hash.substring(0, 7) : bdConfig.branch})`;\r\n        const additional = [\r\n            BDV2.react.createElement(\"div\", {className: `${classNameColorMuted} ${sizes.size12}`}, `Lightcord ${electron.getGlobal(\"BuildInfo\").version} `, BDV2.react.createElement(\"span\", {className: classNameVersionHash+\" da-versionHash\"}, `(${(electron.getGlobal(\"BuildInfo\").commit || \"Unknown\").slice(0, 7)})`)),\r\n            BDV2.react.createElement(\"div\", {className: `${classNameColorMuted} ${sizes.size12}`}, `BBD ${bbdVersion} `, BDV2.react.createElement(\"span\", {className: classNameVersionHash+\" da-versionHash\"}, versionHash))\r\n        ]\r\n        \r\n\r\n        const originalVersions = children[children.length - 1].type;\r\n        children[children.length - 1].type = function() {\r\n            const returnVal = originalVersions(...arguments);\r\n            returnVal.props.children.splice(1, 0, additional);\r\n            return returnVal;\r\n        };\r\n    }});\r\n};\r\n\r\nconst getGuildClasses = function() {\r\n    const guildsWrapper = WebpackModules.findByProps(\"wrapper\", \"unreadMentionsBar\");\r\n    const guilds = WebpackModules.findByProps(\"guildsError\", \"selected\");\r\n    const pill = WebpackModules.findByProps(\"blobContainer\");\r\n    return Object.assign({}, guildsWrapper, guilds, pill);\r\n};\r\n\r\nCore.prototype.patchGuildListItems = function() {\r\n    if (this.guildListItemsPatch) return;\r\n    const GuildClasses = getGuildClasses();\r\n    const listItemClass = GuildClasses.listItem.split(\" \")[0];\r\n    const blobClass = GuildClasses.blobContainer.split(\" \")[0];\r\n    const reactInstance = BDV2.getInternalInstance(document.querySelector(`.${listItemClass} .${blobClass}`).parentElement);\r\n    const GuildComponent = reactInstance.return.type;\r\n    if (!GuildComponent) return;\r\n    this.guildListItemsPatch = Utils.monkeyPatch(GuildComponent.prototype, \"render\", {after: (data) => {\r\n        if (data.returnValue && data.thisObject) {\r\n            const returnValue = data.returnValue;\r\n            const guildData = data.thisObject.props;\r\n            let className = returnValue.props.className\r\n            className += \" bd-guild\";\r\n            if (guildData.unread) className += \" bd-unread\";\r\n            if (guildData.selected) className += \" bd-selected\";\r\n            if (guildData.audio) className += \" bd-audio\";\r\n            if (guildData.video) className += \" bd-video\";\r\n            if (guildData.badge) className += \" bd-badge\";\r\n            if (guildData.animatable) className += \" bd-animatable\";\r\n            returnValue.props.className = className\r\n            return returnValue;\r\n        }\r\n    }});\r\n};\r\n\r\nCore.prototype.patchGuildPills = function() {\r\n    if (this.guildPillPatch) return;\r\n    const guildPill = WebpackModules.find(m => m.default && !m.default.displayName && m.default.toString && m.default.toString().includes(\"translate3d\"));\r\n    if (!guildPill) return;\r\n    this.guildPillPatch = Utils.monkeyPatch(guildPill, \"default\", {after: (data) => {\r\n        const props = data.methodArguments[0];\r\n        if (props.unread) data.returnValue.props.className += \" bd-unread\";\r\n        if (props.selected) data.returnValue.props.className += \" bd-selected\";\r\n        if (props.hovered) data.returnValue.props.className += \" bd-hovered\";\r\n        return data.returnValue;\r\n    }});\r\n};\r\n\r\nCore.prototype.patchGuildSeparator = function() {\r\n    if (this.guildSeparatorPatch) return;\r\n    const Guilds = WebpackModules.findByDisplayName(\"Guilds\");\r\n    const guildComponents = WebpackModules.findByProps(\"renderListItem\");\r\n    if (!guildComponents || !Guilds) return;\r\n    const GuildSeparator = function() {\r\n        const returnValue = guildComponents.Separator(...arguments);\r\n        returnValue.props.className += \" bd-guild-separator\";\r\n        return returnValue;\r\n    };\r\n    this.guildSeparatorPatch = Utils.monkeyPatch(Guilds.prototype, \"render\", {after: (data) => {\r\n        data.returnValue.props.children[1].props.children[3].type = GuildSeparator;\r\n    }});\r\n};\r\n\r\nCore.prototype.patchAttachment = function() {\r\n    if (this.AttachmentPatch) return;\r\n    const Attachment = BDModules.get(e => e.default && e.default.displayName === \"Attachment\")[0] // temporary\r\n    const Anchor = WebpackModules.find(m => m.displayName == \"Anchor\");\r\n    if (!Anchor || !Attachment || !Attachment.default) return;\r\n    this.AttachmentPatch = Utils.monkeyPatch(Attachment, \"default\", {after: (data) => {\r\n        if(!settingsCookie[\"fork-ps-6\"])return\r\n        const attachment = data.methodArguments[0] || null\r\n        const children = Utils.getNestedProp(data.returnValue, \"props.children\");\r\n\r\n        if (!children || !attachment || !attachment.url)return\r\n        if (!Array.isArray(children)) return;\r\n\r\n        const id = uuidv4()\r\n        children.push(BDV2.react.createElement(\"span\", {\r\n            id: \"certified-\"+id\r\n        }))\r\n        PluginCertifier.patch(attachment, \"certified-\"+id)\r\n    }})\r\n}\r\n\r\nCore.prototype.patchMessageHeader = function() {\r\n    if (this.messageHeaderPatch) return;\r\n    const MessageHeader = WebpackModules.findByProps(\"MessageTimestamp\");\r\n    const Anchor = WebpackModules.find(m => m.displayName == \"Anchor\");\r\n    if (!Anchor || !MessageHeader || !MessageHeader.default) return;\r\n    this.messageHeaderPatch = Utils.monkeyPatch(MessageHeader, \"default\", {after: (data) => {\r\n        const author = Utils.getNestedProp(data.methodArguments[0], \"message.author\");\r\n        // const header = Utils.getNestedProp(data.returnValue, \"props.children.1.props\");\r\n        const children = Utils.getNestedProp(data.returnValue, \"props.children.1.props.children.1.props.children\");\r\n        if (!children || !author || !author.id)return\r\n        // if (header && header.className) header.className += \" \"\r\n        if (!Array.isArray(children)) return;\r\n        if (author.id === \"249746236008169473\") { // Rauenzi: BandagedBD Developer\r\n            children.push(\r\n                BDV2.React.createElement(TooltipWrap, {color: \"black\", side: \"top\", text: \"BandagedBD Developer\"},\r\n                    BDV2.React.createElement(Anchor, {className: \"bd-chat-badge\", href: \"https://github.com/rauenzi/BetterDiscordApp\", title: \"BandagedBD\", target: \"_blank\"},\r\n                        BDV2.React.createElement(BDLogo, {size: \"16px\", className: \"bd-logo\"})\r\n                    )\r\n                )\r\n            );\r\n        } else if (author.id === \"696481194443014174\" || author.id === \"696003456611385396\"){ // Not Thomiz: Lightcord Developer, Phorcys: Lightcord Developer\r\n            children.push(\r\n                BDV2.React.createElement(TooltipWrap, {color: \"black\", side: \"top\", text: \"Lightcord Developer\"},\r\n                    BDV2.React.createElement(Anchor, {className: \"bd-chat-badge\", href: \"https://github.com/Lightcord/Lightcord\", title: \"Lightcord\", target: \"_blank\"},\r\n                        BDV2.React.createElement(LightcordLogo, {size: \"16px\", className: \"bd-logo\"})\r\n                    )\r\n                )\r\n            );\r\n        }\r\n        const id = uuidv4()\r\n        children.push(\r\n            BDV2.React.createElement(\"div\", {\r\n                id: \"badges-\"+id,\r\n                style: {\r\n                    display: \"inline\"\r\n                }\r\n            })\r\n        )\r\n        applyBadges(id, author, true)\r\n    }});\r\n};\r\n\r\nfunction applyBadges(id, user, chat){\r\n    process.nextTick(() => {\r\n        const div = document.getElementById(\"badges-\"+id)\r\n        if(!div || div.childNodes.length > 0)return\r\n        if(div.childNodes.length)return\r\n        let blockDiv = document.createElement(\"div\")\r\n        blockDiv.style.display = \"none\"\r\n        div.appendChild(blockDiv)\r\n\r\n        const Anchor = WebpackModules.find(m => m.displayName == \"Anchor\");\r\n\r\n        distant.getBadges(user.id)\r\n        .then(badges => {\r\n            badges.forEach(badge => {\r\n                const props = {\r\n                    svg: {\r\n                        size: \"16px\", \r\n                        className: \"bd-logo\",\r\n                        width: \"16px\", \r\n                    }\r\n                }\r\n                badge.scopes.forEach(scope => {\r\n                    if(scope === \"user\"){// require user\r\n                        props.user = user\r\n                    }\r\n                }) \r\n                if(!badge.href){\r\n                    props.Anchor = Anchor\r\n                    props.href = {\r\n                        className: chat ? \"bd-chat-badge\" : \"bd-member-badge\", \r\n                        title: badge.name, \r\n                        target: \"_blank\"\r\n                    }\r\n                }\r\n                const element = BDV2.React.createElement(TooltipWrap, {color: \"black\", side: \"top\", text: badge.name},\r\n                    badge.href ? BDV2.react.createElement(Anchor, {\r\n                        href: badge.href,\r\n                        className: chat ? \"bd-chat-badge\" : \"bd-member-badge\", \r\n                        title: badge.name, \r\n                        target: \"_blank\"\r\n                    }, BDV2.React.createElement(badge.component, props)) : BDV2.React.createElement(badge.component, props)\r\n                )\r\n                const div2 = document.createElement(\"div\")\r\n                BDV2.reactDom.render(element, div2)\r\n                div2.childNodes.forEach(node => {\r\n                    div.appendChild(node)\r\n                })\r\n            })\r\n        })\r\n    })\r\n}\r\n\r\nCore.prototype.patchMemberList = function() {\r\n    if (this.memberListPatch) return;\r\n    const MemberListItem = WebpackModules.findByDisplayName(\"MemberListItem\");\r\n    const Anchor = WebpackModules.find(m => m.displayName == \"Anchor\");\r\n    if (!Anchor || !MemberListItem || !MemberListItem.prototype || !MemberListItem.prototype.renderDecorators) return;\r\n    this.memberListPatch = Utils.monkeyPatch(MemberListItem.prototype, \"renderDecorators\", {after: (data) => {\r\n        const user = Utils.getNestedProp(data.thisObject, \"props.user\");\r\n        const children = Utils.getNestedProp(data.returnValue, \"props.children\");\r\n        if (!children || !user || !user.id)return\r\n        // if (header && header.className) header.className += \" \"\r\n        if (!Array.isArray(children)) return;\r\n        if (user.id === \"249746236008169473\") {\r\n            children.push(\r\n                BDV2.React.createElement(TooltipWrap, {color: \"black\", side: \"top\", text: \"BandagedBD Developer\"},\r\n                    BDV2.React.createElement(Anchor, {className: \"bd-member-badge\", href: \"https://github.com/rauenzi/BetterDiscordApp\", title: \"BandagedBD\", target: \"_blank\"},\r\n                        BDV2.React.createElement(BDLogo, {size: \"16px\", className: \"bd-logo\"})\r\n                    )\r\n                )\r\n            );\r\n        } else if (user.id === \"696481194443014174\" || user.id === \"696003456611385396\"){\r\n            children.push(\r\n                BDV2.React.createElement(TooltipWrap, {color: \"black\", side: \"top\", text: \"Lightcord Developer\"},\r\n                    BDV2.React.createElement(Anchor, {className: \"bd-member-badge\", href: \"https://github.com/Lightcord/Lightcord\", title: \"Lightcord\", target: \"_blank\"},\r\n                        BDV2.React.createElement(LightcordLogo, {size: \"16px\", className: \"bd-logo\"})\r\n                    )\r\n                )\r\n            );\r\n        }\r\n        const id = uuidv4()\r\n        children.push(\r\n            BDV2.React.createElement(\"div\", {id: \"badges-\"+id})\r\n        )\r\n        applyBadges(id, user, false)\r\n    }});\r\n};\r\n\r\nCore.prototype.updateInjector = async function() {\r\n    // There will never be an injection path, so we do not need the code below. \r\n    // Insert comments so it will be erased when production.\r\n    \r\n    const injectionPath = DataStore.injectionPath;\r\n    if (!injectionPath) return false;\r\n\r\n    /*\r\n\r\n    const fs = require(\"fs\");\r\n    const path = require(\"path\");\r\n    const rmrf = require(\"rimraf\");\r\n    const yauzl = require(\"yauzl\");\r\n    const mkdirp = require(\"mkdirp\");\r\n    const request = require(\"request\");\r\n\r\n    const parentPath = path.resolve(injectionPath, \"..\");\r\n    const folderName = path.basename(injectionPath);\r\n    const zipLink = \"https://github.com/rauenzi/BetterDiscordApp/archive/injector.zip\";\r\n    const savedZip = path.resolve(parentPath, \"injector.zip\");\r\n    const extractedFolder = path.resolve(parentPath, \"BetterDiscordApp-injector\");\r\n\r\n    // Download the injector zip file\r\n    Utils.log(\"InjectorUpdate\", \"Downloading \" + zipLink);\r\n    let success = await new Promise(resolve => {\r\n        request.get({url: zipLink, encoding: null}, async (error, response, body) => {\r\n            if (error || response.statusCode !== 200) return resolve(false);\r\n            // Save a backup in case someone has their own copy\r\n            const alreadyExists = await new Promise(res => fs.exists(savedZip, res));\r\n            if (alreadyExists) await new Promise(res => fs.rename(savedZip, `${savedZip}.bak${Math.round(performance.now())}`, res));\r\n\r\n            Utils.log(\"InjectorUpdate\", \"Writing \" + savedZip);\r\n            fs.writeFile(savedZip, body, err => resolve(!err));\r\n        });\r\n    });\r\n    if (!success) return success;\r\n\r\n    // Check and delete rename extraction\r\n    const alreadyExists = await new Promise(res => fs.exists(extractedFolder, res));\r\n    if (alreadyExists) await new Promise(res => fs.rename(extractedFolder, `${extractedFolder}.bak${Math.round(performance.now())}`, res));\r\n    \r\n    // Unzip the downloaded zip file\r\n    const zipfile = await new Promise(r => yauzl.open(savedZip, {lazyEntries: true}, (err, zip) =>  r(zip)));\r\n    zipfile.on(\"entry\", function(entry) {\r\n        // Skip directories, they are handled with mkdirp\r\n        if (entry.fileName.endsWith(\"/\")) return zipfile.readEntry();\r\n\r\n        Utils.log(\"InjectorUpdate\", \"Extracting \" + entry.fileName);\r\n        // Make any needed parent directories\r\n        const fullPath = path.resolve(parentPath, entry.fileName);\r\n        mkdirp.sync(path.dirname(fullPath));\r\n        zipfile.openReadStream(entry, function(err, readStream) {\r\n            if (err) return success = false;\r\n            readStream.on(\"end\", function() {zipfile.readEntry();}); // Go to next file after this\r\n            readStream.pipe(fs.createWriteStream(fullPath));\r\n        });\r\n    });\r\n    zipfile.readEntry(); // Start reading\r\n\r\n    // Wait for the final file to finish\r\n    await new Promise(resolve => zipfile.once(\"end\", resolve));\r\n\r\n    // Save a backup in case something goes wrong during final step\r\n    const backupFolder = path.resolve(parentPath, `${folderName}.bak${Math.round(performance.now())}`);\r\n    await new Promise(resolve => fs.rename(injectionPath, backupFolder, resolve));\r\n\r\n    // Rename the extracted folder to what it should be\r\n    Utils.log(\"InjectorUpdate\", `Renaming ${path.basename(extractedFolder)} to ${folderName}`);\r\n    success = await new Promise(resolve => fs.rename(extractedFolder, injectionPath, err => resolve(!err)));\r\n    if (!success) {\r\n        Utils.err(\"InjectorUpdate\", \"Failed to rename the final directory\");\r\n        return success;\r\n    }\r\n\r\n    // If rename had issues, delete what we tried to rename and restore backup\r\n    if (!success) {\r\n        Utils.err(\"InjectorUpdate\", \"Something went wrong... restoring backups.\");\r\n        await new Promise(resolve => rmrf(extractedFolder, resolve));\r\n        await new Promise(resolve => fs.rename(backupFolder, injectionPath, resolve));\r\n        return success;\r\n    }\r\n\r\n    // If we've gotten to this point, everything should have gone smoothly.\r\n    // Cleanup the backup folder then remove the zip\r\n    await new Promise(resolve => rmrf(backupFolder, resolve));\r\n    await new Promise(resolve => fs.unlink(savedZip, resolve));\r\n\r\n    Utils.log(\"InjectorUpdate\", \"Injector Updated!\");\r\n    return success;*/\r\n};\r\n\r\nexport default new Core();\r\n\r\n/**\r\n * Don't expose core - could be dangerous for now\r\n */","import {pluginCookie, themeCookie, bdplugins, bdthemes, settingsCookie, settings} from \"../0globals\";\r\nimport mainCore from \"./core\";\r\nimport Utils from \"./utils\";\r\nimport BDV2 from \"./v2\";\r\nimport DataStore from \"./dataStore\";\r\nimport pluginModule from \"./pluginModule\";\r\nimport themeModule from \"./themeModule\";\r\nimport settingsPanel from \"./settingsPanel\";\r\nimport DOM from \"./domtools\";\r\n\r\nconst BdApi = {\r\n    get React() { return BDV2.React; },\r\n    get ReactDOM() { return BDV2.ReactDom; },\r\n    get ReactComponent() {return BDV2.ReactComponent;},\r\n    get WindowConfigFile() {return Utils.WindowConfigFile;},\r\n    get settings() {return settings;},\r\n    get emotes() {return null}, // deprecated, deleted all emotes from betterdiscord.\r\n    get screenWidth() { return Math.max(document.documentElement.clientWidth, window.innerWidth || 0); },\r\n    get screenHeight() { return Math.max(document.documentElement.clientHeight, window.innerHeight || 0); }\r\n};\r\n\r\nBdApi.getAllWindowPreferences = function() {\r\n    return Utils.getAllWindowPreferences();\r\n};\r\n\r\nBdApi.getWindowPreference = function(key) {\r\n    return Utils.getWindowPreference(key);\r\n};\r\n\r\nBdApi.setWindowPreference = function(key, value) {\r\n    return Utils.setWindowPreference(key, value);\r\n};\r\n\r\n//Inject CSS to document head\r\n//id = id of element\r\n//css = custom css\r\nBdApi.injectCSS = function (id, css) {\r\n    DOM.addStyle(DOM.escapeID(id), css);\r\n};\r\n\r\n//Clear css/remove any element\r\n//id = id of element\r\nBdApi.clearCSS = function (id) {\r\n    DOM.removeStyle(DOM.escapeID(id));\r\n};\r\n\r\n//Inject CSS to document head\r\n//id = id of element\r\n//css = custom css\r\nBdApi.linkJS = function (id, url) {\r\n    DOM.addScript(DOM.escapeID(id), url);\r\n};\r\n\r\n//Clear css/remove any element\r\n//id = id of element\r\nBdApi.unlinkJS = function (id) {\r\n    DOM.removeScript(DOM.escapeID(id));\r\n};\r\n\r\n//Get another plugin\r\n//name = name of plugin\r\nBdApi.getPlugin = function (name) {\r\n    if (bdplugins.hasOwnProperty(name)) {\r\n        return bdplugins[name].plugin;\r\n    }\r\n    return null;\r\n};\r\n\r\n//Get BetterDiscord Core\r\nBdApi.getCore = function () {\r\n    Utils.warn(\"Deprecation Notice\", `BdApi.getCore() will be removed in future versions.`);\r\n    return mainCore;\r\n};\r\n\r\n/**\r\n * Shows a generic but very customizable modal.\r\n * @param {string} title - title of the modal\r\n * @param {string} content - a string of text to display in the modal\r\n */\r\nBdApi.alert = function (title, content) {\r\n    return Utils.showConfirmationModal(title, content, {cancelText: null});\r\n};\r\n\r\n/**\r\n * Shows a generic but very customizable confirmation modal with optional confirm and cancel callbacks.\r\n * @param {string} title - title of the modal\r\n * @param {(string|ReactElement|Array<string|ReactElement>)} children - a single or mixed array of react elements and strings. Every string is wrapped in Discord's `Markdown` component so strings will show and render properly.\r\n * @param {object} [options] - options to modify the modal\r\n * @param {boolean} [options.danger=false] - whether the main button should be red or not\r\n * @param {string} [options.confirmText=Okay] - text for the confirmation/submit button\r\n * @param {string} [options.cancelText=Cancel] - text for the cancel button\r\n * @param {callable} [options.onConfirm=NOOP] - callback to occur when clicking the submit button\r\n * @param {callable} [options.onCancel=NOOP] - callback to occur when clicking the cancel button\r\n * @param {string} [options.key] - key used to identify the modal. If not provided, one is generated and returned\r\n * @returns {string} - the key used for this modal\r\n */\r\nBdApi.showConfirmationModal = function (title, content, options = {}) {\r\n    return Utils.showConfirmationModal(title, content, options);\r\n};\r\n\r\n//Show toast alert\r\nBdApi.showToast = function(content, options = {}) {\r\n    Utils.showToast(content, options);\r\n};\r\n\r\n// Finds module\r\nBdApi.findModule = function(filter) {\r\n    return BDV2.WebpackModules.find(filter);\r\n};\r\n\r\n// Finds module\r\nBdApi.findAllModules = function(filter) {\r\n    return BDV2.WebpackModules.findAll(filter);\r\n};\r\n\r\n// Finds module\r\nBdApi.findModuleByProps = function(...props) {\r\n    return BDV2.WebpackModules.findByUniqueProperties(props);\r\n};\r\n\r\nBdApi.findModuleByPrototypes = function(...protos) {\r\n    return BDV2.WebpackModules.findByPrototypes(protos);\r\n};\r\n\r\nBdApi.findModuleByDisplayName = function(name) {\r\n    return BDV2.WebpackModules.findByDisplayName(name);\r\n};\r\n\r\n// Gets react instance\r\nBdApi.getInternalInstance = function(node) {\r\n    if (!(node instanceof window.jQuery) && !(node instanceof Element)) return undefined;\r\n    if (node instanceof jQuery) node = node[0];\r\n    return BDV2.getInternalInstance(node);\r\n};\r\n\r\n// Gets data\r\nBdApi.loadData = function(pluginName, key) {\r\n    return DataStore.getPluginData(pluginName, key);\r\n};\r\n\r\nBdApi.getData = BdApi.loadData;\r\n\r\n// Sets data\r\nBdApi.saveData = function(pluginName, key, data) {\r\n    return DataStore.setPluginData(pluginName, key, data);\r\n};\r\n\r\nBdApi.setData = BdApi.saveData;\r\n\r\n// Deletes data\r\nBdApi.deleteData = function(pluginName, key) {\r\n    return DataStore.deletePluginData(pluginName, key);\r\n};\r\n\r\n// Patches other functions\r\nBdApi.monkeyPatch = function(what, methodName, options) {\r\n    return Utils.monkeyPatch(what, methodName, options);\r\n};\r\n\r\n// Event when element is removed\r\nBdApi.onRemoved = function(node, callback) {\r\n    return Utils.onRemoved(node, callback);\r\n};\r\n\r\n// Wraps function in try..catch\r\nBdApi.suppressErrors = function(method, message) {\r\n    return Utils.suppressErrors(method, message);\r\n};\r\n\r\n// Tests for valid JSON\r\nBdApi.testJSON = function(data) {\r\n    return Utils.testJSON(data);\r\n};\r\n\r\nBdApi.isPluginEnabled = function(name) {\r\n    return !!pluginCookie[name];\r\n};\r\n\r\nBdApi.isThemeEnabled = function(name) {\r\n    return !!themeCookie[name];\r\n};\r\n\r\nBdApi.isSettingEnabled = function(id) {\r\n    return !!settingsCookie[id];\r\n};\r\n\r\nBdApi.enableSetting = function(id) {\r\n    return settingsPanel.onChange(id, true);\r\n};\r\n\r\nBdApi.disableSetting = function(id) {\r\n    return settingsPanel.onChange(id, false);\r\n};\r\n\r\nBdApi.toggleSetting = function(id) {\r\n    return settingsPanel.onChange(id, !settingsCookie[id]);\r\n};\r\n\r\n// Gets data\r\nBdApi.getBDData = function(key) {\r\n    return DataStore.getBDData(key);\r\n};\r\n\r\n// Sets data\r\nBdApi.setBDData = function(key, data) {\r\n    return DataStore.setBDData(key, data);\r\n};\r\n\r\n\r\n\r\nconst makeAddonAPI = (cookie, list, manager) => new class AddonAPI {\r\n\r\n    get folder() {return manager.folder;}\r\n\r\n    isEnabled(name) {\r\n        return !!cookie[name];\r\n    }\r\n\r\n    enable(name) {\r\n        return manager.enable(name);\r\n    }\r\n\r\n    disable(name) {\r\n        return manager.disable(name);\r\n    }\r\n\r\n    toggle(name) {\r\n        if (cookie[name]) this.disable(name);\r\n        else this.enable(name);\r\n    }\r\n\r\n    reload(name) {\r\n        return manager.reload(name);\r\n    }\r\n\r\n    get(name) {\r\n        if (list.hasOwnProperty(name)) {\r\n            if (list[name].plugin) return list[name].plugin;\r\n            return list[name];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getAll() {\r\n        return Object.keys(list).map(k => this.get(k)).filter(a => a);\r\n    }\r\n};\r\n\r\nBdApi.Plugins = makeAddonAPI(pluginCookie, bdplugins, pluginModule);\r\nBdApi.Themes = makeAddonAPI(themeCookie, bdthemes, themeModule);\r\n\r\nexport default BdApi;\r\n\r\nwindow.Lightcord.BetterDiscord.BdApi = BdApi","export default function() {\r\n    const contentWindowGetter = Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype, \"contentWindow\").get;\r\n    Object.defineProperty(HTMLIFrameElement.prototype, \"contentWindow\", {\r\n        get: function () {\r\n            const contentWindow = Reflect.apply(contentWindowGetter, this, arguments);\r\n            return new Proxy(contentWindow, {\r\n                getOwnPropertyDescriptor: function(obj, prop) {\r\n                    if (prop === \"localStorage\") return undefined;\r\n                    return Object.getOwnPropertyDescriptor(obj, prop);\r\n                },\r\n                get: function(obj, prop) {\r\n                    if (prop === \"localStorage\") return null;\r\n                    const val = obj[prop];\r\n                    if (typeof val === \"function\") return val.bind(obj);\r\n                    return val;\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    // Prevent interception by patching Reflect.apply and Function.prototype.bind\r\n    Object.defineProperty(Reflect, \"apply\", {value: Reflect.apply, writable: false, configurable: false});\r\n    Object.defineProperty(Function.prototype, \"bind\", {value: Function.prototype.bind, writable: false, configurable: false});\r\n\r\n    const oOpen = XMLHttpRequest.prototype.open;\r\n    XMLHttpRequest.prototype.open = function() {\r\n        const url = arguments[1];\r\n        if (url.toLowerCase().includes(\"api/webhooks\")) return null;\r\n        return Reflect.apply(oOpen, this, arguments);\r\n    };\r\n}","import localStorageFix from \"./localStorageFix\";\r\nimport loadingIcon from \"./loadingIcon\";\r\nlocalStorageFix();\r\nloadingIcon();\r\n\r\nconst deprecateGlobal = (key, value) => {\r\n    Object.defineProperty(window, key, {\r\n        get() {\r\n            Utils.warn(\"Deprecated Global\", `\"${key}\" will be removed in future versions. Please only use BdApi.`);\r\n            return value;\r\n        }\r\n    });  \r\n};\r\n\r\n\r\nimport * as Globals from \"./0globals\";\r\n\r\nconst globalKeys = Object.keys(Globals);\r\nfor (const key of globalKeys) deprecateGlobal(key, Globals[key]);\r\n\r\n\r\nimport BdApi from \"./modules/bdApi\";\r\nimport BDV2 from \"./modules/v2\";\r\nimport pluginModule from \"./modules/pluginModule\";\r\nimport themeModule from \"./modules/themeModule\";\r\nimport Utils from \"./modules/utils\";\r\nimport BDEvents from \"./modules/bdEvents\";\r\nimport settingsPanel from \"./modules/settingsPanel\";\r\nimport DataStore from \"./modules/dataStore\";\r\nimport ContentManager from \"./modules/contentManager\";\r\nimport ClassNormalizer from \"./modules/classNormalizer\";\r\n\r\ndeprecateGlobal(\"BDV2\", BDV2);\r\ndeprecateGlobal(\"pluginModule\", pluginModule);\r\ndeprecateGlobal(\"themeModule\", themeModule);\r\ndeprecateGlobal(\"Utils\", Utils);\r\ndeprecateGlobal(\"BDEvents\", BDEvents);\r\ndeprecateGlobal(\"settingsPanel\", settingsPanel);\r\ndeprecateGlobal(\"DataStore\", DataStore);\r\ndeprecateGlobal(\"ContentManager\", ContentManager);\r\ndeprecateGlobal(\"ClassNormalizer\", ClassNormalizer);\r\n\r\nwindow.BdApi = BdApi;\r\n\r\nimport Core from \"./modules/core\";\r\ndeprecateGlobal(\"mainCore\", Core);\r\n\r\n// TODO: Change Init mode and stop using CoreWrapper.\r\nexport default class CoreWrapper {\r\n    constructor(bdConfig, methods) {\r\n        Core.setConfig(bdConfig);\r\n        Core.setMethods(methods);\r\n    }\r\n\r\n    init() {\r\n        // deprecateGlobal(\"mainCore\", this.mainCore);\r\n        Core.init();\r\n    }\r\n}","export default () => {\r\n    const v2Loader = document.createElement(\"div\");\r\n    v2Loader.className = \"bd-loaderv2\";\r\n    v2Loader.title = \"BandagedBD is loading...\";\r\n    document.body.appendChild(v2Loader);\r\n};"],"sourceRoot":""}